(function(){function X(a){var b=this.internal=new Y(this);b.loadConfig(a);b.init();(function e(a,b,d){Object.keys(a).forEach(function(f){b[f]=a[f].bind(d);0<Object.keys(a[f]).length&&e(a[f],b[f],d)})})(n,this,this)}function Y(a){this.d3=window.d3?window.d3:"undefined"!==typeof require?require("d3"):void 0;this.api=a;this.config=this.getDefaultConfig();this.data={};this.cache={};this.axes={}}function q(a){this.owner=a}function aa(a,b,c){function e(a,b){a.attr("transform",function(a){return"translate("+
Math.ceil(b(a)+I)+", 0)"})}function k(a,b){a.attr("transform",function(a){return"translate(0,"+Math.ceil(b(a))+")"})}function g(a){var b=a[0];a=a[a.length-1];return b<a?[b,a]:[a,b]}function d(a){var b,c=[];if(a.ticks)return a.ticks.apply(a,O);b=a.domain();for(a=Math.ceil(b[0]);a<b[1];a++)c.push(a);0<c.length&&0<c[0]&&c.unshift(c[0]-(c[1]-c[0]));return c}function f(){var a=t.copy(),c;b.isCategory&&(c=t.domain(),a.domain([c[0],c[1]-1]));return a}function m(a){a=x?x(a):a;return"undefined"!==typeof a?
a:""}function v(a){if(Q)return Q;var b={h:11.5,w:5.5};a.select("text").text(m).each(function(a){var c=this.getBoundingClientRect(),e=""+m(a);a=c.height;c=e?c.width/e.length:void 0;a&&c&&(b.h=a,b.w=c)}).text("");return Q=b}function p(c){c.each(function(){function c(a,e){function k(a,b){h=void 0;for(var c=1;c<b.length;c++)if(" "===b.charAt(c)&&(h=c),d=b.substr(0,c+1),f=J.w*d.length,e<f)return k(a.concat(b.substr(0,h?h:c)),b.slice(h?h+1:c));return a.concat(b)}var g=m(a),d,h,f;if("[object Array]"===Object.prototype.toString.call(g))return g;
if(!e||0>=e)e=Q?95:b.isCategory?Math.ceil(F(x[1])-F(x[0]))-12:110;return k([],g+"")}function E(a,c){var e=J.h;0===c&&(e="left"===w||"right"===w?-(J.h/2*(T[a.index]-1)-3*b.$$.config.completeScale):".71em");return e}function O(a){a=t(a)+(r?0:I);return N[0]<a&&a<N[1]?B:0}var y=p.g=a.select(this),P=this.__chart__||t,F=this.__chart__=f(),x=C?C:d(F),K=y.selectAll(".tick").data(x,F),M=K.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6),G=K.exit().remove(),z=(b.withoutTransition?K:
a.transition(K)).style("opacity",1),R,S,H,N=t.rangeExtent?t.rangeExtent():g(t.range());S=y.selectAll(".domain").data([0]);var Z=(S.enter().append("path").attr("class","domain"),b.withoutTransition?S:a.transition(S));M.append("line");M.append("text");var A=M.select("line"),u=z.select("line"),D=M.select("text"),L=z.select("text");b.isCategory?(I=Math.ceil((F(1)-F(0))/2),S=r?0:I,H=r?I:0):I=S=0;var U,J=v(y.select(".tick")),T=[],y=Math.max(B,0)+q,Q="left"===w||"right"===w,K=K.select("text");U=K.selectAll("tspan").data(function(a,
e){var k=b.tickMultiline?c(a,b.tickWidth):[].concat(m(a));T[e]=k.length;return k.map(function(a){return{index:e,splitted:a}})});U.enter().append("tspan");U.exit().remove();!Q&&b.$$.config.noxticks||Q&&b.$$.config.noyticks||U.text(function(a){return a.splitted});var V=b.tickTextRotate;switch(w){case "bottom":R=e;A.attr("y2",B);D.attr("y",y);u.attr("x1",S).attr("x2",S).attr("y2",O);L.attr("x",0).attr("y",V?y-9.5*b.$$.config.completeScale+10*b.$$.config.completeScale*Math.cos(V/180*Math.PI):y+.5*b.$$.config.completeScale).style("text-anchor",
V?0<V?"start":"end":"middle").attr("transform",V?"rotate("+V+")":"");U.attr("x",0).attr("dy",E).attr("dx",V?y*Math.sin(V/180*Math.PI):0);Z.attr("d","M"+N[0]+","+n+"V0H"+N[1]+"V"+n);break;case "top":R=e;A.attr("y2",-B);D.attr("y",-y);u.attr("x2",0).attr("y2",-B);L.attr("x",0).attr("y",-y);K.style("text-anchor","middle");U.attr("x",0).attr("dy","0em");Z.attr("d","M"+N[0]+","+-n+"V0H"+N[1]+"V"+-n);break;case "left":R=k;A.attr("x2",-B);D.attr("x",-y);u.attr("x2",-B).attr("y1",H).attr("y2",H);L.attr("x",
-y).attr("y",I);K.style("text-anchor","end");U.attr("x",-y).attr("dy",E);Z.attr("d","M"+-n+","+N[0]+"H0V"+N[1]+"H"+-n);break;case "right":R=k,A.attr("x2",B),D.attr("x",y),u.attr("x2",B).attr("y2",0),L.attr("x",y).attr("y",0),K.style("text-anchor","start"),U.attr("x",y).attr("dy",E),Z.attr("d","M"+n+","+N[0]+"H0V"+N[1]+"H"+n)}if(F.rangeBand)var X=F,Y=X.rangeBand()/2,P=F=function(a){return X(a)+Y};else P.rangeBand?P=F:G.call(R,F);M.call(R,P);z.call(R,F)})}var t=a.scale.linear(),w="bottom",B=c.config.innerTickSize*
c.config.completeScale,n,q=3*c.config.completeScale,C=null,x,O,I=0,y=!0,r;b=b||{};b.$$=c;n=b.withOuterTick?3*c.config.completeScale:0;p.scale=function(a){if(!arguments.length)return t;t=a;return p};p.orient=function(a){if(!arguments.length)return w;w=a in{top:1,right:1,bottom:1,left:1}?a+"":"bottom";return p};p.tickFormat=function(a){if(!arguments.length)return x;x=a;return p};p.tickCentered=function(a){if(!arguments.length)return r;r=a;return p};p.tickOffset=function(){return I};p.tickInterval=function(){var a;
b.isCategory?a=2*I:(a=p.g.select("path.domain").node().getTotalLength()-2*n,a/=p.g.selectAll("line").size());return Infinity===a?0:a};p.ticks=function(){if(!arguments.length)return O;O=arguments;return p};p.tickCulling=function(a){if(!arguments.length)return y;y=a;return p};p.tickValues=function(a){if("function"===typeof a)C=function(){return a(t.domain())};else{if(!arguments.length)return C;C=a}return p};return p}var D={version:"0.4.10"},n,d;D.generate=function(a){return new X(a)};D.chart={fn:X.prototype,
internal:{fn:Y.prototype,axis:{fn:q.prototype}}};n=D.chart.fn;d=D.chart.internal.fn;d.init=function(){var a=this.config;this.initParams();if(a.data_url)this.convertUrlToData(a.data_url,a.data_mimeType,a.data_keys,this.initWithData);else if(a.data_json)this.initWithData(this.convertJsonToData(a.data_json,a.data_keys));else if(a.data_rows)this.initWithData(this.convertRowsToData(a.data_rows));else if(a.data_columns)this.initWithData(this.convertColumnsToData(a.data_columns));else throw Error("url or json or rows or columns is required.");
};d.initParams=function(){var a=this.d3,b=this.config;this.clipId="c3-"+ +new Date+"-clip";this.clipIdForXAxis=this.clipId+"-xaxis";this.clipIdForYAxis=this.clipId+"-yaxis";this.clipIdForGrid=this.clipId+"-grid";this.clipIdForSubchart=this.clipId+"-subchart";this.clipPath=this.getClipPath(this.clipId);this.clipPathForXAxis=this.getClipPath(this.clipIdForXAxis);this.clipPathForYAxis=this.getClipPath(this.clipIdForYAxis);this.clipPathForGrid=this.getClipPath(this.clipIdForGrid);this.clipPathForSubchart=
this.getClipPath(this.clipIdForSubchart);this.dragStart=null;this.transiting=this.mouseover=this.cancelClick=this.flowing=this.dragging=!1;this.color=this.generateColor();this.levelColor=this.generateLevelColor();this.dataTimeFormat=b.data_xLocaltime?a.time.format:a.time.format.utc;this.axisTimeFormat=b.axis_x_localtime?a.time.format:a.time.format.utc;this.defaultAxisTimeFormat=this.axisTimeFormat.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",
function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%-m/%-d",function(a){return a.getDay()&&1!==a.getDate()}],["%-m/%-d",function(a){return 1!==a.getDate()}],["%-m/%-d",function(a){return a.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]);this.hiddenTargetIds=[];this.hiddenLegendIds=[];this.focusedTargetIds=[];this.defocusedTargetIds=[];this.xOrient=b.axis_rotated?"left":"bottom";this.yOrient=b.axis_rotated?b.axis_y_inner?"top":"bottom":b.axis_y_inner?"right":"left";
this.y2Orient=b.axis_rotated?b.axis_y2_inner?"bottom":"top":b.axis_y2_inner?"left":"right";this.subXOrient=b.axis_rotated?"left":"bottom";this.isLegendRight="right"===b.legend_position;this.isLegendInset="inset"===b.legend_position;this.isLegendTop="top-left"===b.legend_inset_anchor||"top-right"===b.legend_inset_anchor;this.isLegendLeft="top-left"===b.legend_inset_anchor||"bottom-left"===b.legend_inset_anchor;this.legendItemHeight=this.legendItemWidth=this.legendStep=0;this.currentMaxTickWidths={x:0,
y:0,y2:0};this.rotated_padding_left=30;this.rotated_padding_right=b.axis_rotated&&!b.axis_x_show?0:30;this.rotated_padding_top=5;this.withoutFadeIn={};this.intervalForObserveInserted=void 0;this.axes.subx=a.selectAll([])};d.initChartElements=function(){this.initBar&&this.initBar();this.initLine&&this.initLine();this.initArc&&this.initArc();this.initGauge&&this.initGauge();this.initText&&this.initText()};d.initWithData=function(a){var b=this,c=b.d3,e=b.config,k=!0;b.axis=new q(b);b.bound=e.bindto;
b.initPie&&b.initPie();b.initBrush&&b.initBrush();b.initZoom&&b.initZoom();b.selectChart=e.bindto?"function"===typeof e.bindto.node?e.bindto:c.select(e.bindto):c.selectAll([]);b.selectChart.empty()&&(b.selectChart=c.select(document.createElement("div")).style("opacity",0),b.observeInserted(b.selectChart),k=!1);b.selectChart.html("").classed("c3",!0);b.data.xs={};b.data.targets=b.convertDataToTargets(a);e.data_filter&&(b.data.targets=b.data.targets.filter(e.data_filter));e.data_hide&&b.addHiddenTargetIds(!0===
e.data_hide?b.mapToIds(b.data.targets):e.data_hide);e.legend_hide&&b.addHiddenLegendIds(!0===e.legend_hide?b.mapToIds(b.data.targets):e.legend_hide);b.hasType("gauge")&&(e.legend_show=!1);b.updateSizes();b.updateScales();var g=b.getXDomain(b.data.targets),d=b.getYDomain(b.data.targets,"y");n.xd=function(){return g};n.yd=function(){return d};n.pl=function(){return b.margin.left};n.pb=function(){return b.margin.bottom};b.x.domain(c.extent(g));b.y.domain(d);b.y2.domain(b.getYDomain(b.data.targets,"y2"));
b.subX.domain(b.x.domain());b.subY.domain(b.y.domain());b.subY2.domain(b.y2.domain());b.orgXDomain=b.x.domain();b.brush&&b.brush.scale(b.subX);e.zoom_enabled&&b.zoom.scale(b.x);b.svg=b.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return e.onmouseover.call(b)}).on("mouseleave",function(){return e.onmouseout.call(b)});e.point_r*=e.completeScale;b.svg[0][0].style.strokeWidth=e.completeScale;e.padding_right*=e.completeScale;e.padding_top*=e.completeScale;a=b.svg.append("defs");
b.clipChart=b.appendClip(a,b.clipId);b.clipXAxis=b.appendClip(a,b.clipIdForXAxis);b.clipYAxis=b.appendClip(a,b.clipIdForYAxis);b.clipGrid=b.appendClip(a,b.clipIdForGrid);b.clipSubchart=b.appendClip(a,b.clipIdForSubchart);b.updateSvgSize();a=b.main=b.svg.append("g").attr("transform",b.getTranslate("main"));b.initSubchart&&b.initSubchart();b.initTooltip&&b.initTooltip();b.initLegend&&b.initLegend();a.append("text").attr("class",f.text+" "+f.empty).attr("text-anchor","middle").attr("dominant-baseline",
"middle");b.initRegion();b.initGrid();a.append("g").attr("clip-path",b.clipPath).attr("class",f.chart);e.grid_lines_front&&b.initGridLines();b.initEventRect();b.initChartElements();a.insert("rect",e.zoom_privileged?null:"g."+f.regions).attr("class",f.zoomRect).attr("width",b.width).attr("height",b.height).style("opacity",0).on("dblclick.zoom",null);e.axis_x_extent&&b.brush.extent(b.getDefaultExtent());b.axis.init();b.updateTargets(b.data.targets);k&&(b.updateDimension(),b.config.oninit.call(b),b.redraw({withTransition:!1,
withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1}));null==window.onresize&&(window.onresize=b.generateResize());window.onresize.add&&(window.onresize.add(function(){e.onresize.call(b)}),window.onresize.add(function(){b.api.flush()}),window.onresize.add(function(){e.onresized.call(b)}));b.api.element=b.selectChart.node()};d.smoothLines=function(a,b){var c=this;"grid"===b&&a.each(function(){var a=c.d3.select(this),b=a.attr("x1"),g=a.attr("x2"),d=a.attr("y1"),f=
a.attr("y2");a.attr({x1:Math.ceil(b),x2:Math.ceil(g),y1:Math.ceil(d),y2:Math.ceil(f)})})};d.updateSizes=function(){var a=this.config,b=this.legend?this.getLegendHeight():0,c=this.legend?this.getLegendWidth():0,e=this.isLegendRight||this.isLegendInset?0:b,k=this.hasArcType(),g=a.axis_rotated||k?0:this.getHorizontalAxisHeight("x"),d=a.subchart_show&&!k?a.subchart_size_height+g:0;this.currentWidth=this.getCurrentWidth();this.currentHeight=this.getCurrentHeight();this.margin=a.axis_rotated?{top:this.getHorizontalAxisHeight("y2")+
this.getCurrentPaddingTop(),right:k?0:this.getCurrentPaddingRight(),bottom:this.getHorizontalAxisHeight("y")+e+this.getCurrentPaddingBottom(),left:d+(k?0:this.getCurrentPaddingLeft())}:{top:4+this.getCurrentPaddingTop(),right:k?0:this.getCurrentPaddingRight(),bottom:g+d+e+this.getCurrentPaddingBottom(),left:k?0:this.getCurrentPaddingLeft()};this.margin2=a.axis_rotated?{top:this.margin.top,right:NaN,bottom:20+e,left:this.rotated_padding_left}:{top:this.currentHeight-d-e,right:NaN,bottom:g+e,left:this.margin.left};
this.margin3={top:0,right:NaN,bottom:0,left:0};this.updateSizeForLegend&&this.updateSizeForLegend(b,c);this.width=this.currentWidth-this.margin.left-this.margin.right;this.height=this.currentHeight-this.margin.top-this.margin.bottom;0>=this.width&&(this.width=1);0>=this.height&&(this.height=1);this.width2=a.axis_rotated?this.margin.left-this.rotated_padding_left-this.rotated_padding_right:this.width;this.height2=a.axis_rotated?this.height:this.currentHeight-this.margin2.top-this.margin2.bottom;0>
this.width2&&(this.width2=0);0>this.height2&&(this.height2=0);this.arcWidth=this.width-(this.isLegendRight?c+10:0);this.arcHeight=this.height-(this.isLegendRight?0:10);this.hasType("gauge")&&(this.arcHeight+=this.height-this.getGaugeLabelHeight());this.updateRadius&&this.updateRadius();this.isLegendRight&&k&&(this.margin3.left=this.arcWidth/2+1.1*this.radiusExpanded)};d.updateTargets=function(a){this.updateTargetsForText(a);this.updateTargetsForBar(a);this.updateTargetsForLine(a);this.hasArcType()&&
this.updateTargetsForArc&&this.updateTargetsForArc(a);this.updateTargetsForSubchart&&this.updateTargetsForSubchart(a);this.showTargets()};d.showTargets=function(){var a=this;a.svg.selectAll("."+f.target).filter(function(b){return a.isTargetToShow(b.id)}).transition().duration(a.config.transition_duration).style("opacity",1)};d.redraw=function(a,b){var c=this,e=c.main,k=c.d3,g=c.config,d=c.getShapeIndices(c.isAreaType),l=c.getShapeIndices(c.isBarType),m=c.getShapeIndices(c.isLineType),v,p,t,w,B,n,
q,r,x,O,I,y,ba,E=c.hasArcType(),z,A,H,u,P,F,W,K,M=c.filterTargetsToShow(c.data.targets),D,L,R,S=c.xv.bind(c),J,N;a=a||{};v=G(a,"withY",!0);p=G(a,"withSubchart",!0);t=G(a,"withTransition",!0);n=G(a,"withTransform",!1);q=G(a,"withUpdateXDomain",!1);r=G(a,"withUpdateOrgXDomain",!1);x=G(a,"withTrimXDomain",!0);ba=G(a,"withUpdateXAxis",q);O=G(a,"withLegend",!1);I=G(a,"withEventRect",!0);y=G(a,"withDimension",!0);w=G(a,"withTransitionForExit",t);B=G(a,"withTransitionForAxis",t);F=t?g.transition_duration:
0;w=w?F:0;b=b||c.axis.generateTransitions(B?F:0);O&&g.legend_show?c.updateLegend(c.mapToIds(c.data.targets),a,b):y&&c.updateDimension(!0);c.isCategorized()&&0===M.length&&c.x.domain([0,c.axes.x.selectAll(".tick").size()]);M.length?(c.updateXDomain(M,q,r,x),g.axis_x_tick_values||(D=c.axis.updateXAxisTickValues(M))):(c.xAxis.tickValues([]),c.subXAxis.tickValues([]));g.zoom_rescale&&!a.flow&&(R=c.x.orgDomain());c.y.domain(c.getYDomain(M,"y",R));c.y2.domain(c.getYDomain(M,"y2",R));!g.axis_y_tick_values&&
g.axis_y_tick_count&&c.yAxis.tickValues(c.axis.generateTickValues(c.y.domain(),g.axis_y_tick_count));!g.axis_y2_tick_values&&g.axis_y2_tick_count&&c.y2Axis.tickValues(c.axis.generateTickValues(c.y2.domain(),g.axis_y2_tick_count));c.axis.redraw(b,E);c.axis.updateLabels(t);if((q||ba)&&M.length)if(g.axis_x_tick_culling&&D){for(t=1;t<D.length;t++)if(D.length/t<g.axis_x_tick_culling_max){L=t;break}c.svg.selectAll("."+f.axisX+" .tick text").each(function(a){a=D.indexOf(a);0<=a&&k.select(this).style("display",
a%L?"none":"block")})}else c.svg.selectAll("."+f.axisX+" .tick text").style("display","block");z=c.generateDrawArea?c.generateDrawArea(d,!1):void 0;A=c.generateDrawBar?c.generateDrawBar(l):void 0;H=c.generateDrawLine?c.generateDrawLine(m,!1):void 0;u=c.generateXYForText(d,l,m,!0);P=c.generateXYForText(d,l,m,!1);v&&(c.subY.domain(c.getYDomain(M,"y")),c.subY2.domain(c.getYDomain(M,"y2")));c.tooltip.style("display","none");c.updateXgridFocus();e.select("text."+f.text+"."+f.empty).attr("x",c.width/2).attr("y",
c.height/2).text(g.data_empty_label_text).transition().style("opacity",M.length?0:1);c.updateGrid(F);c.updateRegion(F);c.updateBar(w);c.updateLine(w);c.updateArea(w);c.updateCircle();c.hasDataLabel()&&c.updateText(w);c.redrawArc&&c.redrawArc(F,w,n);c.redrawSubchart&&c.redrawSubchart(p,b,F,w,d,l,m);e.selectAll("."+f.selectedCircles).filter(c.isBarType.bind(c)).selectAll("circle").remove();g.interaction_enabled&&!a.flow&&I&&(c.redrawEventRect(),c.updateZoom&&c.updateZoom());c.updateCircleY();J=(c.config.axis_rotated?
c.circleY:c.circleX).bind(c);N=(c.config.axis_rotated?c.circleX:c.circleY).bind(c);a.flow&&(K=c.generateFlow({targets:M,flow:a.flow,duration:a.flow.duration,drawBar:A,drawLine:H,drawArea:z,cx:J,cy:N,xv:S,xForText:u,yForText:P}));(F||K)&&c.isTabVisible()?k.transition().duration(F).each(function(){var b=[];[c.redrawBar(A,!0),c.redrawLine(H,!0),c.redrawArea(z,!0),c.redrawCircle(J,N,!0),c.redrawText(u,P,a.flow,!0),c.redrawRegion(!0),c.redrawGrid(!0)].forEach(function(a){a.forEach(function(a){b.push(a)})});
W=c.generateWait();b.forEach(function(a){W.add(a)})}).call(W,function(){K&&K();g.onrendered&&g.onrendered.call(c)}):(c.redrawBar(A),c.redrawLine(H),c.redrawArea(z),c.redrawCircle(J,N),c.redrawText(u,P,a.flow),c.redrawRegion(),c.redrawGrid(),g.onrendered&&g.onrendered.call(c));c.mapToIds(c.data.targets).forEach(function(a){c.withoutFadeIn[a]=!0})};d.updateAndRedraw=function(a){var b=this.config,c;a=a||{};a.withTransition=G(a,"withTransition",!0);a.withTransform=G(a,"withTransform",!1);a.withLegend=
G(a,"withLegend",!1);a.withUpdateXDomain=!0;a.withUpdateOrgXDomain=!0;a.withTransitionForExit=!1;a.withTransitionForTransform=G(a,"withTransitionForTransform",a.withTransition);this.updateSizes();a.withLegend&&b.legend_show||(c=this.axis.generateTransitions(a.withTransitionForAxis?b.transition_duration:0),this.updateScales(),this.updateSvgSize(),this.transformAll(a.withTransitionForTransform,c));this.redraw(a,c)};d.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,
withTransitionForAxis:!1})};d.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type};d.isCategorized=function(){return 0<=this.config.axis_x_type.indexOf("categor")};d.isCustomX=function(){var a=this.config;return!this.isTimeSeries()&&(a.data_x||A(a.data_xs))};d.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type};d.getTranslate=function(a){var b=this.config,c,e;"main"===a?(c=T(this.margin.left),e=T(this.margin.top)):"context"===a?(c=T(this.margin2.left),e=T(this.margin2.top)):
"legend"===a?(c=this.margin3.left,e=this.margin3.top):"x"===a?(c=0,e=b.axis_rotated?0:this.height):"y"===a?(c=0,e=b.axis_rotated?this.height:0):"y2"===a?(c=b.axis_rotated?0:this.width,e=b.axis_rotated?1:0):"subx"===a?(c=0,e=b.axis_rotated?0:this.height2):"arc"===a&&(c=this.arcWidth/2,e=this.arcHeight/2);return"translate("+c+","+e+")"};d.initialOpacity=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?1:0};d.initialOpacityForCircle=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?
this.opacityForCircle(a):0};d.opacityForCircle=function(a){var b=this.config.point_show?1:0;return r(a.value)?this.isScatterType(a)?.5:b:0};d.opacityForText=function(){return this.hasDataLabel()?1:0};d.xx=function(a){return a?this.x(a.x):null};d.xv=function(a){var b=a.value;this.isTimeSeries()?b=this.parseDate(a.value):this.isCategorized()&&"string"===typeof a.value&&(b=this.config.axis_x_categories.indexOf(a.value));return Math.ceil(this.x(b))};d.yv=function(a){return Math.ceil((a.axis&&"y2"===a.axis?
this.y2:this.y)(a.value))};d.subxx=function(a){return a?this.subX(a.x):null};d.transformMain=function(a,b){var c,e,k;b&&b.axisX?c=b.axisX:(c=this.main.select("."+f.axisX),a&&(c=c.transition()));b&&b.axisY?e=b.axisY:(e=this.main.select("."+f.axisY),a&&(e=e.transition()));b&&b.axisY2?k=b.axisY2:(k=this.main.select("."+f.axisY2),a&&(k=k.transition()));(a?this.main.transition():this.main).attr("transform",this.getTranslate("main"));c.attr("transform",this.getTranslate("x"));e.attr("transform",this.getTranslate("y"));
k.attr("transform",this.getTranslate("y2"));this.main.select("."+f.chartArcs).attr("transform",this.getTranslate("arc"))};d.transformAll=function(a,b){this.transformMain(a,b);this.config.subchart_show&&this.transformContext(a,b);this.legend&&this.transformLegend(a)};d.updateSvgSize=function(){var a=this.svg.select(".c3-brush .background");this.svg.attr("width",this.currentWidth).attr("height",this.currentHeight);this.svg.selectAll(["#"+this.clipId,"#"+this.clipIdForGrid]).select("rect").attr("width",
this.currentWidth).attr("height",this.height);this.svg.select("#"+this.clipIdForXAxis).select("rect").attr("x",this.getXAxisClipX.bind(this)).attr("y",this.getXAxisClipY.bind(this)).attr("width",this.getXAxisClipWidth.bind(this)).attr("height",this.getXAxisClipHeight.bind(this));this.svg.select("#"+this.clipIdForYAxis).select("rect").attr("x",this.getYAxisClipX.bind(this)).attr("y",this.getYAxisClipY.bind(this)).attr("width",this.getYAxisClipWidth.bind(this)).attr("height",this.getYAxisClipHeight.bind(this));
this.svg.select("#"+this.clipIdForSubchart).select("rect").attr("width",this.width).attr("height",a.size()?a.attr("height"):0);this.svg.select("."+f.zoomRect).attr("width",this.width).attr("height",this.height)};d.updateDimension=function(a){a||(this.config.axis_rotated?(this.axes.x.call(this.xAxis),this.axes.subx.call(this.subXAxis)):(this.axes.y.call(this.yAxis),this.axes.y2.call(this.y2Axis)));this.updateSizes();this.updateScales();this.updateSvgSize();this.transformAll(!1)};d.observeInserted=
function(a){var b=this,c;"undefined"===typeof MutationObserver?window.console.error("MutationObserver not defined."):(c=new MutationObserver(function(e){e.forEach(function(e){"childList"===e.type&&e.previousSibling&&(c.disconnect(),b.intervalForObserveInserted=window.setInterval(function(){a.node().parentNode&&(window.clearInterval(b.intervalForObserveInserted),b.updateDimension(),b.config.oninit.call(b),b.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,
withLegend:!0}),a.transition().style("opacity",1))},10))})}),c.observe(a.node(),{attributes:!0,childList:!0,characterData:!0}))};d.generateResize=function(){function a(){b.forEach(function(a){a()})}var b=[];a.add=function(a){b.push(a)};return a};d.endall=function(a,b){var c=0;a.each(function(){++c}).each("end",function(){--c||b.apply(this,arguments)})};d.generateWait=function(){var a=[],b=function(b,e){var k=setInterval(function(){var b=0;a.forEach(function(a){if(a.empty())b+=1;else try{a.transition()}catch(c){b+=
1}});b===a.length&&(clearInterval(k),e&&e())},10)};b.add=function(b){a.push(b)};return b};d.parseDate=function(a){var b;a instanceof Date?b=a:"string"===typeof a?b=this.dataTimeFormat(this.config.data_xFormat).parse(a):"number"!==typeof a&&isNaN(a)||(b=new Date(+a));if(!b||isNaN(+b))(b=new Date(a.split("-").join("/")))&&!isNaN(+b)||window.console.error("Failed to parse x '"+a+"' to Date object");return b};d.isTabVisible=function(){var a;"undefined"!==typeof document.hidden?a="hidden":"undefined"!==
typeof document.mozHidden?a="mozHidden":"undefined"!==typeof document.msHidden?a="msHidden":"undefined"!==typeof document.webkitHidden&&(a="webkitHidden");return document[a]?!1:!0};d.getDefaultConfig=function(){var a={bindto:"#chart",completeScale:1,noxticks:!1,noyticks:!1,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:5,padding_top:5,padding_bottom:void 0,innerTickSize:3,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},
zoom_onzoomend:function(){},interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:0,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(a){return a},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},
data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,
subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,
axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!1,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_count:void 0,
axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,
point_show:!0,point_r:2.5,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_expand:!0,gauge_label_show:!0,gauge_label_format:void 0,gauge_expand:!0,gauge_min:0,gauge_max:100,gauge_units:void 0,gauge_width:void 0,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,
donut_width:void 0,donut_expand:!0,donut_title:"",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(a,c,e,k){return this.getTooltipContent?this.getTooltipContent(a,c,e,k):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"}};Object.keys(this.additionalConfig).forEach(function(b){a[b]=this.additionalConfig[b]},this);return a};d.additionalConfig=
{};d.loadConfig=function(a){function b(){var a=k.shift();return a&&e&&"object"===typeof e&&a in e?(e=e[a],b()):a?void 0:e}var c=this.config,e,k,d;Object.keys(c).forEach(function(h){e=a;k=h.split("_");d=b();H(d)&&(c[h]=d)})};d.getScale=function(a,b,c){return(c?this.d3.time.scale():this.d3.scale.linear()).range([a,b])};d.getX=function(a,b,c,e){var k=this.getScale(a,b,this.isTimeSeries()),d=c?k.domain(c):k,h;this.isCategorized()?(e=e||function(){return 0},k=function(a,b){var c=d(a)+e(a);return b?c:Math.ceil(c)}):
k=function(a,b){var c=d(a);return b?c:Math.ceil(c)};for(h in d)k[h]=d[h];k.orgDomain=function(){return d.domain()};this.isCategorized()&&(k.domain=function(a){if(!arguments.length)return a=this.orgDomain(),[a[0],a[1]+1];d.domain(a);return k});return k};d.getY=function(a,b,c){a=this.getScale(a,b,this.isTimeSeriesY());c&&a.domain(c);return a};d.getYScale=function(a){return"y2"===this.axis.getId(a)?this.y2:this.y};d.getSubYScale=function(a){return"y2"===this.axis.getId(a)?this.subY2:this.subY};d.updateScales=
function(){var a=this,b=a.config,c=!a.x;a.xMin=b.axis_rotated?1:0;a.xMax=b.axis_rotated?a.height:a.width;a.yMin=b.axis_rotated?0:a.height;a.yMax=b.axis_rotated?a.width:1;a.subXMin=a.xMin;a.subXMax=a.xMax;a.subYMin=b.axis_rotated?0:a.height2;a.subYMax=b.axis_rotated?a.width2:1;a.x=a.getX(a.xMin,a.xMax,c?void 0:a.x.orgDomain(),function(){return a.xAxis.tickOffset()});a.y=a.getY(a.yMin,a.yMax,c?b.axis_y_default:a.y.domain());a.y2=a.getY(a.yMin,a.yMax,c?b.axis_y2_default:a.y2.domain());a.subX=a.getX(a.xMin,
a.xMax,a.orgXDomain,function(b){return b%1?0:a.subXAxis.tickOffset()});a.subY=a.getY(a.subYMin,a.subYMax,c?b.axis_y_default:a.subY.domain());a.subY2=a.getY(a.subYMin,a.subYMax,c?b.axis_y2_default:a.subY2.domain());a.xAxisTickFormat=a.axis.getXAxisTickFormat();a.xAxisTickValues=a.axis.getXAxisTickValues();a.yAxisTickValues=a.axis.getYAxisTickValues();a.y2AxisTickValues=a.axis.getY2AxisTickValues();a.xAxis=a.axis.getXAxis(a.x,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer);a.subXAxis=
a.axis.getXAxis(a.subX,a.subXOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer);a.yAxis=a.axis.getYAxis(a.y,a.yOrient,b.axis_y_tick_format,a.yAxisTickValues,b.axis_y_tick_outer);a.y2Axis=a.axis.getYAxis(a.y2,a.y2Orient,b.axis_y2_tick_format,a.y2AxisTickValues,b.axis_y2_tick_outer);c||(a.brush&&a.brush.scale(a.subX),b.zoom_enabled&&a.zoom.scale(a.x));a.updateArc&&a.updateArc()};d.getYDomainMin=function(a){var b=this,c=b.config,e=b.mapToIds(a),k=b.getValuesAsIdKeyed(a),d,h,f,m,v;if(0<c.data_groups.length)for(v=
b.hasNegativeValueInTargets(a),a=0;a<c.data_groups.length;a++)if(f=c.data_groups[a].filter(function(a){return 0<=e.indexOf(a)}),0!==f.length)for(h=f[0],v&&k[h]&&k[h].forEach(function(a,b){k[h][b]=0>a?a:0}),d=1;d<f.length;d++)m=f[d],k[m]&&k[m].forEach(function(a,c){b.axis.getId(m)!==b.axis.getId(h)||!k[h]||v&&0<+a||(k[h][c]+=+a)});return b.d3.min(Object.keys(k).map(function(a){return b.d3.min(k[a])}))};d.getYDomainMax=function(a){var b=this,c=b.config,e=b.mapToIds(a),k=b.getValuesAsIdKeyed(a),d,h,
f,m,v;if(0<c.data_groups.length)for(v=b.hasPositiveValueInTargets(a),a=0;a<c.data_groups.length;a++)if(f=c.data_groups[a].filter(function(a){return 0<=e.indexOf(a)}),0!==f.length)for(h=f[0],v&&k[h]&&k[h].forEach(function(a,b){k[h][b]=0<a?a:0}),d=1;d<f.length;d++)m=f[d],k[m]&&k[m].forEach(function(a,c){b.axis.getId(m)!==b.axis.getId(h)||!k[h]||v&&0>+a||(k[h][c]+=+a)});return b.d3.max(Object.keys(k).map(function(a){return b.d3.max(k[a])}))};d.getYDomain=function(a,b,c){var e=this,k=e.config;a=a.filter(function(a){return e.axis.getId(a.id)===
b});var d=c?e.filterByXDomain(a,c):a,h="y2"===b?k.axis_y2_min:k.axis_y_min,f="y2"===b?k.axis_y2_max:k.axis_y_max,m=e.getYDomainMin(d);a=e.getYDomainMax(d);var v,p="y2"===b?k.axis_y2_center:k.axis_y_center,t,w,B=e.hasType("bar",d)&&k.bar_zerobased||e.hasType("area",d)&&k.area_zerobased;c="y2"===b?k.axis_y2_inverted:k.axis_y_inverted;t=e.hasDataLabel()&&k.axis_rotated;var n=e.hasDataLabel()&&!k.axis_rotated,m=r(h)?h:r(f)?m<f?m:f-10:m;a=r(f)?f:r(h)?h<a?a:h+10:a;if(0===d.length)return"y2"===b?e.y2.domain():
e.y.domain();isNaN(m)&&(m=0);isNaN(a)&&(a=m);m===a&&(0>m?a=0:m=0);d=0<=m&&0<=a;w=0>=m&&0>=a;if(r(h)&&d||r(f)&&w)B=!1;B&&(d&&(m=0),w&&(a=0));h=Math.abs(a-m);f=v=.03*h;v=0;"undefined"!==typeof p&&(m=Math.max(Math.abs(m),Math.abs(a)),a=p+m,m=p-m);t?(p=e.getDataLabelLength(m,a,"width"),t=L(e.y.range()),p=[p[0]/t,p[1]/t],f+=p[1]/(1-p[0]-p[1])*h,v+=p[0]/(1-p[0]-p[1])*h):n&&(p=e.getDataLabelLength(m,a,"height"),f+=e.axis.convertPixelsToAxisPadding(p[1],h),v+=e.axis.convertPixelsToAxisPadding(p[0],h));"y"===
b&&A(k.axis_y_padding)&&(f=e.axis.getPadding(k.axis_y_padding,"top",f,h),v=e.axis.getPadding(k.axis_y_padding,"bottom",v,h));"y2"===b&&A(k.axis_y2_padding)&&(f=e.axis.getPadding(k.axis_y2_padding,"top",f,h),v=e.axis.getPadding(k.axis_y2_padding,"bottom",v,h));B&&(d&&(v=m),w&&(f=-a));k=[m-v,a+f];return c?k.reverse():k};d.getXDomainMin=function(a){var b=this,c=b.config;return H(c.axis_x_min)?b.isTimeSeries()?this.parseDate(c.axis_x_min):c.axis_x_min:b.d3.min(a,function(a){return b.d3.min(a.values,function(a){return a.x})})};
d.getXDomainMax=function(a){var b=this,c=b.config;return H(c.axis_x_max)?b.isTimeSeries()?this.parseDate(c.axis_x_max):c.axis_x_max:b.d3.max(a,function(a){return b.d3.max(a.values,function(a){return a.x})})};d.getXDomainPadding=function(a){var b=this.config;a=a[1]-a[0];var c,e;this.isCategorized()?e=0:this.hasType("bar")?(c=this.getMaxDataCount(),e=1<c?a/(c-1)/2:.5):e=.03*a;"object"===typeof b.axis_x_padding&&A(b.axis_x_padding)?(c=r(b.axis_x_padding.left)?b.axis_x_padding.left:e,b=r(b.axis_x_padding.right)?
b.axis_x_padding.right:e):"number"===typeof b.axis_x_padding?c=b=b.axis_x_padding:(c=b=e,this.hasType("bar")?b+=.03*a:c=1E-8);return{left:c,right:b}};d.getXDomain=function(a){var b=[this.getXDomainMin(a),this.getXDomainMax(a)];a=b[0];var c=b[1],b=this.getXDomainPadding(b),e=0,k=0;0!==a-c||this.isCategorized()||(this.isTimeSeries()?(a=new Date(.5*a.getTime()),c=new Date(1.5*c.getTime())):(a=0===a?1:.5*a,c=0===c?-1:1.5*c));if(a||0===a)e=this.isTimeSeries()?new Date(a.getTime()-b.left):a-b.left;if(c||
0===c)k=this.isTimeSeries()?new Date(c.getTime()+b.right):c+b.right;return[e,k]};d.updateXDomain=function(a,b,c,e,k){var d=this.config;c&&(this.x.domain(k?k:this.d3.extent(this.getXDomain(a))),this.orgXDomain=this.x.domain(),d.zoom_enabled&&this.zoom.scale(this.x).updateScaleExtent(),this.subX.domain(this.x.domain()),this.brush&&this.brush.scale(this.subX));b&&(this.x.domain(k?k:!this.brush||this.brush.empty()?this.orgXDomain:this.brush.extent()),d.zoom_enabled&&this.zoom.scale(this.x).updateScaleExtent());
e&&this.x.domain(this.trimXDomain(this.x.orgDomain()));return this.x.domain()};d.trimXDomain=function(a){a[0]<=this.orgXDomain[0]&&(a[1]=+a[1]+(this.orgXDomain[0]-a[0]),a[0]=this.orgXDomain[0]);this.orgXDomain[1]<=a[1]&&(a[0]=+a[0]-(a[1]-this.orgXDomain[1]),a[1]=this.orgXDomain[1]);return a};d.isX=function(a){var b=this.config;return b.data_x&&a===b.data_x||A(b.data_xs)&&ea(b.data_xs,a)};d.isNotX=function(a){return!this.isX(a)};d.getXKey=function(a){var b=this.config;return b.data_x?b.data_x:A(b.data_xs)?
b.data_xs[a]:null};d.getXValuesOfXKey=function(a,b){var c=this,e;(b&&A(b)?c.mapToIds(b):[]).forEach(function(b){c.getXKey(b)===a&&(e=c.data.xs[b])});return e};d.getIndexByX=function(a){a=this.filterByX(this.data.targets,a);return a.length?a[0].index:null};d.getXValue=function(a,b){return a in this.data.xs&&this.data.xs[a]&&r(this.data.xs[a][b])?this.data.xs[a][b]:b};d.getOtherTargetXs=function(){var a=Object.keys(this.data.xs);return a.length?this.data.xs[a[0]]:null};d.getOtherTargetX=function(a){var b=
this.getOtherTargetXs();return b&&a<b.length?b[a]:null};d.addXs=function(a){var b=this;Object.keys(a).forEach(function(c){b.config.data_xs[c]=a[c]})};d.hasMultipleX=function(a){return 1<this.d3.set(Object.keys(a).map(function(b){return a[b]})).size()};d.isMultipleX=function(){return A(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")};d.addName=function(a){var b;a&&(b=this.config.data_names[a.id],a.name=b?b:a.id);return a};d.getValueOnIndex=function(a,b){var c=a.filter(function(a){return a.index===
b});return c.length?c[0]:null};d.updateTargetX=function(a,b){var c=this;a.forEach(function(a){a.values.forEach(function(k,d){k.x=c.generateTargetX(b[d],a.id,d)});c.data.xs[a.id]=b})};d.updateTargetXs=function(a,b){var c=this;a.forEach(function(a){b[a.id]&&c.updateTargetX([a],b[a.id])})};d.generateTargetX=function(a,b,c){if(this.isTimeSeries())b=a?this.parseDate(a):this.parseDate(this.getXValue(b,c));else if(this.isCustomX()&&!this.isCategorized()){if(b=r(a)?+a:this.getXValue(b,c),isNaN(b))throw alert('Error parsing value for xAxis! Did you forget to specify type: "timeseries" in config.\nValue was: '+
a),Error();}else b=c;return b};d.cloneTarget=function(a){return{id:a.id,id_org:a.id_org,values:a.values.map(function(a){return{x:a.x,value:a.value,id:a.id}})}};d.updateXs=function(){var a=this;a.data.targets.length&&(a.xs=[],a.data.targets[0].values.forEach(function(b){a.xs[b.index]=b.x}))};d.getPrevX=function(a){a=this.xs[a-1];return"undefined"!==typeof a?a:null};d.getNextX=function(a){a=this.xs[a+1];return"undefined"!==typeof a?a:null};d.getMaxDataCount=function(){return this.d3.max(this.data.targets,
function(a){return a.values.length})};d.getMaxDataCountTarget=function(a){var b=a.length,c=0,e;1<b?a.forEach(function(a){a.values.length>c&&(e=a,c=a.values.length)}):e=b?a[0]:null;return e};d.getEdgeX=function(a){return a.length?[this.d3.min(a,function(a){return a.values[0].x}),this.d3.max(a,function(a){return a.values[a.values.length-1].x})]:[0,0]};d.mapToIds=function(a){return a.map(function(a){return a.id})};d.mapToTargetIds=function(a){return a?z(a)?[a]:a:this.mapToIds(this.data.targets)};d.hasTarget=
function(a,b){var c=this.mapToIds(a),e;for(e=0;e<c.length;e++)if(c[e]===b)return!0;return!1};d.isTargetToShow=function(a){return 0>this.hiddenTargetIds.indexOf(a)};d.isLegendToShow=function(a){return 0>this.hiddenLegendIds.indexOf(a)};d.filterTargetsToShow=function(a){var b=this;return a.filter(function(a){return b.isTargetToShow(a.id)})};d.mapTargetsToUniqueXs=function(a){a=this.d3.set(this.d3.merge(a.map(function(a){return a.values.map(function(a){return+a.x})}))).values();return this.isTimeSeries()?
a.map(function(a){return new Date(+a)}):a.map(function(a){return+a})};d.addHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.concat(a)};d.removeHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(b){return 0>a.indexOf(b)})};d.addHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.concat(a)};d.removeHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(b){return 0>a.indexOf(b)})};d.getValuesAsIdKeyed=
function(a){var b={};a.forEach(function(a){b[a.id]=[];a.values.forEach(function(e){b[a.id].push(e.value)})});return b};d.checkValueInTargets=function(a,b){var c=Object.keys(a),e,k,d;for(e=0;e<c.length;e++)for(d=a[c[e]].values,k=0;k<d.length;k++)if(b(d[k].value))return!0;return!1};d.hasNegativeValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return 0>a})};d.hasPositiveValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return 0<a})};d.isOrderDesc=function(){var a=
this.config;return"string"===typeof a.data_order&&"desc"===a.data_order.toLowerCase()};d.isOrderAsc=function(){var a=this.config;return"string"===typeof a.data_order&&"asc"===a.data_order.toLowerCase()};d.orderTargets=function(a){var b=this.config,c=this.isOrderAsc(),e=this.isOrderDesc();c||e?a.sort(function(a,b){var e=function(a,b){return a+Math.abs(b.value)},d=a.values.reduce(e,0),e=b.values.reduce(e,0);return c?e-d:d-e}):J(b.data_order)&&a.sort(b.data_order);return a};d.filterByX=function(a,b){return this.d3.merge(a.map(function(a){return a.values})).filter(function(a){return 0===
a.x-b})};d.filterRemoveNull=function(a){return a.filter(function(a){return r(a.value)})};d.filterByXDomain=function(a,b){return a.map(function(a){return{id:a.id,id_org:a.id_org,values:a.values.filter(function(a){return b[0]<=a.x&&a.x<=b[1]})}})};d.hasDataLabel=function(){var a=this.config;return"boolean"===typeof a.data_labels&&a.data_labels||"object"===typeof a.data_labels&&A(a.data_labels)?!0:!1};d.getDataLabelLength=function(a,b,c){var e=this,k=[0,0];e.selectChart.select("svg").selectAll(".dummy").data([a,
b]).enter().append("text").text(function(a){return e.dataLabelFormat(a.id)(a)}).each(function(a,b){k[b]=1.3*this.getBoundingClientRect()[c]}).remove();return k};d.isNoneArc=function(a){return this.hasTarget(this.data.targets,a.id)};d.isArc=function(a){return"data"in a&&this.hasTarget(this.data.targets,a.data.id)};d.findSameXOfValues=function(a,b){var c,e=a[b].x,k=[];for(c=b-1;0<=c&&e===a[c].x;c--)k.push(a[c]);for(c=b;c<a.length&&e===a[c].x;c++)k.push(a[c]);return k};d.findClosestFromTargets=function(a,
b){var c=this,e;e=a.map(function(a){return c.findClosest(a.values,b)});return c.findClosest(e,b)};d.findClosest=function(a,b){var c=this,e=100,k;a.filter(function(a){return a&&c.isBarType(a.id)}).forEach(function(a){var b=c.main.select("."+f.bars+c.getTargetSelectorSuffix(a.id)+" ."+f.bar+"-"+a.index).node();!k&&c.isWithinBar(b)&&(k=a)});a.filter(function(a){return a&&!c.isBarType(a.id)}).forEach(function(a){var d=c.dist(a,b);d<e&&(e=d,k=a)});return k};d.dist=function(a,b){var c=this.config,e=c.axis_rotated?
1:0,c=c.axis_rotated?0:1,k=this.circleY(a,a.index),d=this.x(a.x);return Math.pow(d-b[e],2)+Math.pow(k-b[c],2)};d.convertValuesToStep=function(a){var b=[].concat(a),c;if(!this.isCategorized())return a;for(c=a.length+1;0<c;c--)b[c]=b[c-1];b[0]={x:b[0].x-1,value:b[0].value,id:b[0].id};b[a.length+1]={x:b[a.length].x+1,value:b[a.length].value,id:b[a.length].id};return b};d.updateDataAttributes=function(a,b){var c=this.config["data_"+a];if("undefined"===typeof b)return c;Object.keys(b).forEach(function(a){c[a]=
b[a]});this.redraw({withLegend:!0});return c};d.convertUrlToData=function(a,b,c,e){var k=this,d=b?b:"csv";k.d3.xhr(a,function(a,b){var f;if(!b)throw Error(a.responseURL+" "+a.status+" ("+a.statusText+")");f="json"===d?k.convertJsonToData(JSON.parse(b.response),c):"tsv"===d?k.convertTsvToData(b.response):k.convertCsvToData(b.response);e.call(k,f)})};d.convertXsvToData=function(a,b){var c=b.parseRows(a),e;1===c.length?(e=[{}],c[0].forEach(function(a){e[0][a]=null})):e=b.parse(a);return e};d.convertCsvToData=
function(a){return this.convertXsvToData(a,this.d3.csv)};d.convertTsvToData=function(a){return this.convertXsvToData(a,this.d3.tsv)};d.convertJsonToData=function(a,b){var c=[],e,d;b?(b.x?(e=b.value.concat(b.x),this.config.data_x=b.x):e=b.value,c.push(e),a.forEach(function(a){var b=[];e.forEach(function(c){c=u(a[c])?null:a[c];b.push(c)});c.push(b)}),d=this.convertRowsToData(c)):(Object.keys(a).forEach(function(b){c.push([b].concat(a[b]))}),d=this.convertColumnsToData(c));return d};d.convertRowsToData=
function(a){var b=a[0],c={},e=[],d,f;for(d=1;d<a.length;d++){c={};for(f=0;f<a[d].length;f++){if(u(a[d][f]))throw Error("Source data is missing a component at ("+d+","+f+")!");c[b[f]]=a[d][f]}e.push(c)}return e};d.convertColumnsToData=function(a){var b=[],c,e,d;for(c=0;c<a.length;c++)for(d=a[c][0],e=1;e<a[c].length;e++){u(b[e-1])&&(b[e-1]={});if(u(a[c][e]))throw Error("Source data is missing a component at ("+c+","+e+")!");b[e-1][d]=a[c][e]}return b};d.convertDataToTargets=function(a,b){var c=this,
e=c.config,d=c.d3.keys(a[0]).filter(c.isNotX,c),f=c.d3.keys(a[0]).filter(c.isX,c);d.forEach(function(d){var k=c.getXKey(d);c.isCustomX()||c.isTimeSeries()?0<=f.indexOf(k)?c.data.xs[d]=(b&&c.data.xs[d]?c.data.xs[d]:[]).concat(a.map(function(a){return a[k]}).filter(r).map(function(a,b){return c.generateTargetX(a,d,b)})):e.data_x?c.data.xs[d]=c.getOtherTargetXs():A(e.data_xs)&&(c.data.xs[d]=c.getXValuesOfXKey(k,c.data.targets)):c.data.xs[d]=a.map(function(a,b){return b})});d.forEach(function(a){if(!c.data.xs[a])throw Error('x is not defined for id = "'+
a+'".');});d=d.map(function(b,d){var k=e.data_idConverter(b);return{id:k,id_org:b,values:a.map(function(a,f){var g=c.getXKey(b),g=a[g],w=c.generateTargetX(g,b,f);c.isCustomX()&&c.isCategorized()&&0===d&&g&&(0===f&&(e.axis_x_categories=[]),e.axis_x_categories.push(g));if(u(a[b])||c.data.xs[b].length<=f)w=void 0;return{x:w,value:null===a[b]||isNaN(a[b])?null:+a[b],id:k}}).filter(function(a){return H(a.x)})}});d.forEach(function(a){var b;e.data_xSort&&(a.values=a.values.sort(function(a,b){return(a.x||
0===a.x?a.x:Infinity)-(b.x||0===b.x?b.x:Infinity)}));b=0;a.values.forEach(function(a){a.index=b++});c.data.xs[a.id].sort(function(a,b){return a-b})});e.data_type&&c.setTargetType(c.mapToIds(d).filter(function(a){return!(a in e.data_types)}),e.data_type);d.forEach(function(a){c.addCache(a.id_org,a)});return d};d.load=function(a,b){var c=this;a&&(b.filter&&(a=a.filter(b.filter)),(b.type||b.types)&&a.forEach(function(a){c.setTargetType(a.id,b.types&&b.types[a.id]?b.types[a.id]:b.type)}),c.data.targets.forEach(function(b){for(var c=
0;c<a.length;c++)if(b.id===a[c].id){b.values=a[c].values;a.splice(c,1);break}}),c.data.targets=c.data.targets.concat(a));c.updateTargets(c.data.targets);c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0});b.done&&b.done()};d.loadFromArgs=function(a){var b=this;a.data?b.load(b.convertDataToTargets(a.data),a):a.url?b.convertUrlToData(a.url,a.mimeType,a.keys,function(c){b.load(b.convertDataToTargets(c),a)}):a.json?b.load(b.convertDataToTargets(b.convertJsonToData(a.json,a.keys)),a):
a.rows?b.load(b.convertDataToTargets(b.convertRowsToData(a.rows)),a):a.columns?b.load(b.convertDataToTargets(b.convertColumnsToData(a.columns)),a):b.load(null,a)};d.unload=function(a,b){var c=this;b||(b=function(){});(a=a.filter(function(a){return c.hasTarget(c.data.targets,a)}))&&0!==a.length?(c.svg.selectAll(a.map(function(a){return c.selectorTarget(a)})).transition().style("opacity",0).remove().call(c.endall,b),a.forEach(function(a){c.withoutFadeIn[a]=!1;c.legend&&c.legend.selectAll("."+f.legendItem+
c.getTargetSelectorSuffix(a)).remove();c.data.targets=c.data.targets.filter(function(b){return b.id!==a})})):b()};d.categoryName=function(a){var b=this.config;return a<b.axis_x_categories.length?b.axis_x_categories[a]:a};d.initEventRect=function(){this.main.select("."+f.chart).append("g").attr("class",f.eventRects).style("fill-opacity",0)};d.redrawEventRect=function(){var a=this.config,b;b=this.isMultipleX();a=this.main.select("."+f.eventRects).style("cursor",a.zoom_enabled?a.axis_rotated?"ns-resize":
"ew-resize":null).classed(f.eventRectsMultiple,b).classed(f.eventRectsSingle,!b);a.selectAll("."+f.eventRect).remove();this.eventRect=a.selectAll("."+f.eventRect);b?(b=this.eventRect.data([0]),this.generateEventRectsForMultipleXs(b.enter()),this.updateEventRect(b)):(b=this.getMaxDataCountTarget(this.data.targets),a.datum(b?b.values:[]),this.eventRect=a.selectAll("."+f.eventRect),b=this.eventRect.data(function(a){return a}),this.generateEventRectsForSingleX(b.enter()),this.updateEventRect(b),b.exit().remove())};
d.updateEventRect=function(a){var b=this,c=b.config,e,d,f,h,l;a=a||b.eventRect.data(function(a){return a});b.isMultipleX()?(d=e=0,f=b.width,h=b.height):(!b.isCustomX()&&!b.isTimeSeries()||b.isCategorized()?(l=b.getEventRectWidth(),d=function(a){return b.x(a.x)-l/2}):(b.updateXs(),l=function(a){var e=b.getPrevX(a.index);a=b.getNextX(a.index);if(null===e&&null===a)return c.axis_rotated?b.height:b.width;null===e&&(e=b.x.domain()[0]);null===a&&(a=b.x.domain()[1]);return Math.max(0,(b.x(a)-b.x(e))/2)},
d=function(a){var c=b.getPrevX(a.index),e=b.getNextX(a.index);a=b.data.xs[a.id][a.index];if(null===c&&null===e)return 0;null===c&&(c=b.x.domain()[0]);return(b.x(a)+b.x(c))/2}),e=c.axis_rotated?0:d,d=c.axis_rotated?d:0,f=c.axis_rotated?b.width:l,h=c.axis_rotated?l:b.height);a.attr("class",b.classEvent.bind(b)).attr("x",e).attr("y",d).attr("width",f).attr("height",h)};d.generateEventRectsForSingleX=function(a){var b=this,c=b.d3,e=b.config;a.append("rect").attr("class",b.classEvent.bind(b)).style("cursor",
e.data_selection_enabled&&e.data_selection_grouped?"pointer":null).on("mouseover",function(a){a=a.index;b.dragging||b.flowing||b.hasArcType()||(e.point_focus_expand_enabled&&b.expandCircles(a,null,!0),b.expandBars(a,null,!0),b.main.selectAll("."+f.shape+"-"+a).each(function(a){e.data_onmouseover.call(b.api,a)}))}).on("mouseout",function(a){a=a.index;b.config&&!b.hasArcType()&&(b.hideXGridFocus(),b.hideTooltip(),b.unexpandCircles(),b.unexpandBars(),b.main.selectAll("."+f.shape+"-"+a).each(function(a){e.data_onmouseout.call(b.api,
a)}))}).on("mousemove",function(a){var d=a.index,h=b.svg.select("."+f.eventRect+"-"+d);b.dragging||b.flowing||b.hasArcType()||(b.isStepType(a)&&"step-after"===b.config.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,d))&&--d,a=b.filterTargetsToShow(b.data.targets).map(function(a){return b.addName(b.getValueOnIndex(a.values,d))}),e.tooltip_grouped&&(b.showTooltip(a,this),b.showXGridFocus(a)),(!e.tooltip_grouped||e.data_selection_enabled&&!e.data_selection_grouped)&&b.main.selectAll("."+f.shape+
"-"+d).each(function(){c.select(this).classed(f.EXPANDED,!0);e.data_selection_enabled&&h.style("cursor",e.data_selection_grouped?"pointer":null);e.tooltip_grouped||(b.hideXGridFocus(),b.hideTooltip(),e.data_selection_grouped||(b.unexpandCircles(d),b.unexpandBars(d)))}).filter(function(a){return b.isWithinShape(this,a)}).each(function(a){e.data_selection_enabled&&(e.data_selection_grouped||e.data_selection_isselectable(a))&&h.style("cursor","pointer");e.tooltip_grouped||(b.showTooltip([a],this),b.showXGridFocus([a]),
e.point_focus_expand_enabled&&b.expandCircles(d,a.id,!0),b.expandBars(d,a.id,!0))}))}).on("click",function(a){var d=a.index;!b.hasArcType()&&b.toggleShape&&(b.cancelClick?b.cancelClick=!1:(b.isStepType(a)&&"step-after"===e.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,d))&&--d,b.main.selectAll("."+f.shape+"-"+d).each(function(a){if(e.data_selection_grouped||b.isWithinShape(this,a))b.toggleShape(this,a,d),b.config.data_onclick.call(b.api,a,this)})))}).call(e.data_selection_draggable&&b.drag?
c.behavior.drag().origin(Object).on("drag",function(){b.drag(c.mouse(this))}).on("dragstart",function(){b.dragstart(c.mouse(this))}).on("dragend",function(){b.dragend()}):function(){})};d.generateEventRectsForMultipleXs=function(a){function b(){c.svg.select("."+f.eventRect).style("cursor",null);c.hideXGridFocus();c.hideTooltip();c.unexpandCircles();c.unexpandBars()}var c=this,e=c.d3,d=c.config;a.append("rect").attr("x",0).attr("y",0).attr("width",c.width).attr("height",c.height).attr("class",f.eventRect).on("mouseout",
function(){c.config&&(c.hasArcType()||b())}).on("mousemove",function(){var a=c.filterTargetsToShow(c.data.targets),h,l;if(!c.dragging&&!c.hasArcType(a))if(h=e.mouse(this),l=c.findClosestFromTargets(a,h),!c.mouseover||l&&l.id===c.mouseover.id||(d.data_onmouseout.call(c.api,c.mouseover),c.mouseover=void 0),l){if(a=c.isScatterType(l)||!d.tooltip_grouped?[l]:c.filterByX(a,l.x),a=a.map(function(a){return c.addName(a)}),c.showTooltip(a,this),d.point_focus_expand_enabled&&c.expandCircles(l.index,l.id,!0),
c.expandBars(l.index,l.id,!0),c.showXGridFocus(a),c.isBarType(l.id)||100>c.dist(l,h))c.svg.select("."+f.eventRect).style("cursor","pointer"),c.mouseover||(d.data_onmouseover.call(c.api,l),c.mouseover=l)}else b()}).on("click",function(){var a=c.filterTargetsToShow(c.data.targets),b,l;c.hasArcType(a)||(b=e.mouse(this),(l=c.findClosestFromTargets(a,b))&&(c.isBarType(l.id)||100>c.dist(l,b))&&c.main.selectAll("."+f.shapes+c.getTargetSelectorSuffix(l.id)).selectAll("."+f.shape+"-"+l.index).each(function(){if(d.data_selection_grouped||
c.isWithinShape(this,l))c.toggleShape(this,l,l.index),c.config.data_onclick.call(c.api,l,this)}))}).call(d.data_selection_draggable&&c.drag?e.behavior.drag().origin(Object).on("drag",function(){c.drag(e.mouse(this))}).on("dragstart",function(){c.dragstart(e.mouse(this))}).on("dragend",function(){c.dragend()}):function(){})};d.dispatchEvent=function(a,b,c){b="."+f.eventRect+(this.isMultipleX()?"":"-"+b);b=this.main.select(b).node();var e=b.getBoundingClientRect(),d=e.left+(c?c[0]:0);c=e.top+(c?c[1]:
0);e=document.createEvent("MouseEvents");e.initMouseEvent(a,!0,!0,window,0,d,c,d,c,!1,!1,!1,!1,0,null);b.dispatchEvent(e)};d.getCurrentWidth=function(){var a=this.config;return a.size_width?a.size_width:this.getParentWidth()};d.getCurrentHeight=function(){var a=this.config,a=a.size_height?a.size_height:this.getParentHeight();return 0<a?a:320/(this.hasType("gauge")?2:1)};d.getCurrentPaddingTop=function(){var a=this.config;return r(a.padding_top)?a.padding_top:0};d.getCurrentPaddingBottom=function(){var a=
this.config;return r(a.padding_bottom)?a.padding_bottom:0};d.getCurrentPaddingLeft=function(a){var b=this.config;return r(b.padding_left)?b.padding_left:b.axis_rotated?b.axis_x_show?Math.max(ca(this.getAxisWidthByAxisId("x",a)),40):1:!b.axis_y_show||b.axis_y_inner?this.axis.getYAxisLabelPosition().isOuter?30:1:this.getAxisWidthByAxisId("y",a)};d.getCurrentPaddingRight=function(){var a=this.config,b=this.isLegendRight?this.getLegendWidth()+20:0;return r(a.padding_right)?a.padding_right+1:a.axis_rotated?
10+b:!a.axis_y2_show||a.axis_y2_inner?2+b+(this.axis.getY2AxisLabelPosition().isOuter?20:0):ca(this.getAxisWidthByAxisId("y2"))+b};d.getParentRectValue=function(a){for(var b=this.selectChart.node(),c;b&&"BODY"!==b.tagName;){try{c=b.getBoundingClientRect()[a]}catch(e){"width"===a&&(c=b.offsetWidth)}if(c)break;b=b.parentNode}return c};d.getParentWidth=function(){return this.getParentRectValue("width")};d.getParentHeight=function(){var a=this.selectChart.style("height");return 0<a.indexOf("px")?+a.replace("px",
""):0};d.getSvgLeft=function(a){var b=this.config,c=b.axis_rotated||!b.axis_rotated&&!b.axis_y_inner,c=(b=this.main.select("."+(b.axis_rotated?f.axisX:f.axisY)).node())&&c?b.getBoundingClientRect():{right:0},b=this.selectChart.node().getBoundingClientRect(),e=this.hasArcType();a=c.right-b.left-(e?0:this.getCurrentPaddingLeft(a));return 0<a?a:0};d.getAxisWidthByAxisId=function(a,b){var c=this.axis.getLabelPositionById(a);return this.config.noyticks?(this.config.innerTickSize+2)*this.config.completeScale:
this.axis.getMaxTickWidth(a,b)+(c.isInner?1:16)*this.config.completeScale+(this.config.innerTickSize+3)*this.config.completeScale};d.getHorizontalAxisHeight=function(a){var b=this.config,c=(b.innerTickSize+1.5)*b.completeScale;if("x"===a&&!b.axis_x_show)return 12;if("x"===a&&b.axis_x_height)return b.axis_x_height;if("y"===a&&!b.axis_y_show)return!b.legend_show||this.isLegendRight||this.isLegendInset?1:10;if("y2"===a&&!b.axis_y2_show)return this.rotated_padding_top;if("x"===a&&!b.axis_rotated&&b.axis_x_tick_rotate)var e=
Math.cos(Math.PI*(90-b.axis_x_tick_rotate)/180),c=c+(this.axis.getMaxTickWidth(a)*e+3*b.completeScale*e+13*b.completeScale*Math.abs(1-e));"x"!==a||b.axis_rotated||b.axis_x_tick_rotate||(c+=13*b.completeScale);return b.noxticks?(b.innerTickSize+2)*b.completeScale:c+(this.axis.getLabelPositionById(a).isInner?0:11*this.config.completeScale)+("y2"===a?-10:0)+(b.lengend_show?2*b.completeScale:0)};d.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())};d.getShapeIndices=function(a){var b=
this.config,c={},e=0,d,f;this.filterTargetsToShow(this.data.targets.filter(a,this)).forEach(function(a){for(d=0;d<b.data_groups.length;d++)if(!(0>b.data_groups[d].indexOf(a.id)))for(f=0;f<b.data_groups[d].length;f++)if(b.data_groups[d][f]in c){c[a.id]=c[b.data_groups[d][f]];break}u(c[a.id])&&(c[a.id]=e++)});c.__max__=e-1;return c};d.getShapeX=function(a,b,c,e){var d=e?this.subX:this.x;return function(e){var f=e.id in c?c[e.id]:0;return e.x||0===e.x?d(e.x)-a*(b/2-f):0}};d.getShapeY=function(a){var b=
this;return function(c){return(a?b.getSubYScale(c.id):b.getYScale(c.id))(c.value)}};d.getShapeOffset=function(a,b,c){var e=this,d=e.orderTargets(e.filterTargetsToShow(e.data.targets.filter(a,e))),f=d.map(function(a){return a.id});return function(a,l){var m=c?e.getSubYScale(a.id):e.getYScale(a.id),v=m(0),p=v;d.forEach(function(c){var d=e.isStepType(a)?e.convertValuesToStep(c.values):c.values;c.id!==a.id&&b[c.id]===b[a.id]&&f.indexOf(c.id)<f.indexOf(a.id)&&0<=d[l].value*a.value&&(p+=m(d[l].value)-v)});
return p}};d.isWithinShape=function(a,b){var c=this.d3.select(a),e;this.isTargetToShow(b.id)?"circle"===a.nodeName?e=this.isStepType(b)?this.isWithinStep(a,this.getYScale(b.id)(b.value)):this.isWithinCircle(a,1.5*this.pointSelectR(b)):"path"===a.nodeName&&(e=c.classed(f.bar)?this.isWithinBar(a):!0):e=!1;return e};d.getInterpolate=function(a){return this.isSplineType(a)?"cardinal":this.isStepType(a)?this.config.line_step_type:"linear"};d.initLine=function(){this.main.select("."+f.chart).append("g").attr("class",
f.chartLines)};d.updateTargetsForLine=function(a){var b=this,c=b.config,e,d=b.classChartLine.bind(b),g=b.classLines.bind(b),h=b.classAreas.bind(b),l=b.classCircles.bind(b),m=b.classFocus.bind(b);e=b.main.select("."+f.chartLines).selectAll("."+f.chartLine).data(a).attr("class",function(a){return d(a)+m(a)}).enter().append("g").attr("class",d).style("opacity",0).style("pointer-events","none");e.append("g").attr("class",g);e.append("g").attr("class",h);e.append("g").attr("class",function(a){return b.generateClass(f.selectedCircles,
a.id)});e.append("g").attr("class",l).style("cursor",function(a){return c.data_selection_isselectable(a)?"pointer":null});a.forEach(function(a){b.main.selectAll("."+f.selectedCircles+b.getTargetSelectorSuffix(a.id)).selectAll("."+f.selectedCircle).each(function(b){b.value=a.values[b.index].value})})};d.updateLine=function(a){var b=this;b.mainLine=b.main.selectAll("."+f.lines).selectAll("."+f.line).data(b.lineData.bind(b));b.mainLine.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",
b.color);b.mainLine.style("opacity",b.initialOpacity.bind(b)).style("shape-rendering",function(a){return b.isStepType(a)?"crispEdges":""}).attr("transform",null);b.mainLine.exit().transition().duration(a).style("opacity",0).remove()};d.redrawLine=function(a,b){return[(b?this.mainLine.transition():this.mainLine).attr("d",a).style("stroke",this.color).style("opacity",1)]};d.generateDrawLine=function(a,b){var c=this,e=c.config,d=c.d3.svg.line(),f=c.generateGetLinePoints(a,b),h=b?c.getSubYScale:c.getYScale,
l=function(a){return(b?c.subxx:c.xx).call(c,a)},m=function(a,b){return 0<e.data_groups.length?f(a,b)[0][1]:h.call(c,a.id)(a.value)},d=e.axis_rotated?d.x(m).y(l):d.x(l).y(m);e.line_connectNull||(d=d.defined(function(a){return null!=a.value}));return function(a){var f=e.line_connectNull?c.filterRemoveNull(a.values):a.values,g=b?c.x:c.subX,m=h.call(c,a.id),l=0,n=0;c.isLineType(a)?e.data_regions[a.id]?a=c.lineWithRegions(f,g,m,e.data_regions[a.id]):(c.isStepType(a)&&(f=c.convertValuesToStep(f)),a=d.interpolate(c.getInterpolate(a))(f)):
(f[0]&&(l=g(f[0].x),n=m(f[0].value)),a=e.axis_rotated?"M "+n+" "+l:"M "+l+" "+n);return a?a:"M 0 0"}};d.generateGetLinePoints=function(a,b){var c=this,e=c.config,d=c.getShapeX(0,a.__max__+1,a,!!b),f=c.getShapeY(!!b),h=c.getShapeOffset(c.isLineType,a,!!b),l=b?c.getSubYScale:c.getYScale;return function(a,b){var p=l.call(c,a.id)(0),t=h(a,b)||p,w=d(a),n=f(a);e.axis_rotated&&(0<a.value&&n<p||0>a.value&&p<n)&&(n=p);return[[w,n-(p-t)],[w,n-(p-t)],[w,n-(p-t)],[w,n-(p-t)]]}};d.lineWithRegions=function(a,b,
c,e){function d(a,b){var c;for(c=0;c<b.length;c++)if(b[c].start<a&&a<=b[c].end)return!0;return!1}function f(a){return"M"+a[0][0]+" "+a[0][1]+" "+a[1][0]+" "+a[1][1]}var h=this.config,l,m,v="M",p,t,n,B,q=this.isCategorized()?.5:0,r,C,x=[];if(H(e))for(l=0;l<e.length;l++)x[l]={},u(e[l].start)?x[l].start=a[0].x:x[l].start=this.isTimeSeries()?this.parseDate(e[l].start):e[l].start,u(e[l].end)?x[l].end=a[a.length-1].x:x[l].end=this.isTimeSeries()?this.parseDate(e[l].end):e[l].end;r=h.axis_rotated?function(a){return c(a.value)}:
function(a){return b(a.x)};C=h.axis_rotated?function(a){return b(a.x)}:function(a){return c(a.value)};e=this.isTimeSeries()?function(a,e,d,k){var m=a.x.getTime();e=e.x-a.x;a=new Date(m+e*d);m=new Date(m+e*(d+k));d=h.axis_rotated?[[c(t(d)),b(a)],[c(t(d+k)),b(m)]]:[[b(a),c(t(d))],[b(m),c(t(d+k))]];return f(d)}:function(a,e,d,k){a=h.axis_rotated?[[c(t(d),!0),b(p(d))],[c(t(d+k),!0),b(p(d+k))]]:[[b(p(d),!0),c(t(d))],[b(p(d+k),!0),c(t(d+k))]];return f(a)};for(l=0;l<a.length;l++)if(u(x)||!d(a[l].x,x))v+=
" "+r(a[l])+" "+C(a[l]);else for(p=this.getScale(a[l-1].x+q,a[l].x+q,this.isTimeSeries()),t=this.getScale(a[l-1].value,a[l].value),m=b(a[l].x)-b(a[l-1].x),n=c(a[l].value)-c(a[l-1].value),m=Math.sqrt(Math.pow(m,2)+Math.pow(n,2)),n=2/m,B=2*n,m=n;1>=m;m+=B)v+=e(a[l-1],a[l],m,n);return v};d.updateArea=function(a){var b=this,c=b.d3;b.mainArea=b.main.selectAll("."+f.areas).selectAll("."+f.area).data(b.lineData.bind(b));b.mainArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",
function(){b.orgAreaOpacity=+c.select(this).style("opacity");return 0});b.mainArea.style("opacity",b.orgAreaOpacity);b.mainArea.exit().transition().duration(a).style("opacity",0).remove()};d.redrawArea=function(a,b){return[(b?this.mainArea.transition():this.mainArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)]};d.generateDrawArea=function(a,b){var c=this,e=c.config,d=c.d3.svg.area(),f=c.generateGetAreaPoints(a,b),h=b?c.getSubYScale:c.getYScale,l=function(a){return(b?
c.subxx:c.xx).call(c,a)},m=function(a,b){return 0<e.data_groups.length?f(a,b)[0][1]:h.call(c,a.id)(c.getAreaBaseValue(a.id))},v=function(a,b){return 0<e.data_groups.length?f(a,b)[1][1]:h.call(c,a.id)(a.value)},d=e.axis_rotated?d.x0(m).x1(v).y(l):d.x(l).y0(m).y1(v);e.line_connectNull||(d=d.defined(function(a){return null!==a.value}));return function(a){var b=e.line_connectNull?c.filterRemoveNull(a.values):a.values,f=0,g=0;c.isAreaType(a)?(c.isStepType(a)&&(b=c.convertValuesToStep(b)),a=d.interpolate(c.getInterpolate(a))(b)):
(b[0]&&(f=c.x(b[0].x),g=c.getYScale(a.id)(b[0].value)),a=e.axis_rotated?"M "+g+" "+f:"M "+f+" "+g);return a?a:"M 0 0"}};d.getAreaBaseValue=function(){return 0};d.generateGetAreaPoints=function(a,b){var c=this,e=c.config,d=c.getShapeX(0,a.__max__+1,a,!!b),f=c.getShapeY(!!b),h=c.getShapeOffset(c.isAreaType,a,!!b),l=b?c.getSubYScale:c.getYScale;return function(a,b){var p=l.call(c,a.id)(0),t=h(a,b)||p,n=d(a),B=f(a);e.axis_rotated&&(0<a.value&&B<p||0>a.value&&p<B)&&(B=p);return[[n,t],[n,B-(p-t)],[n,B-
(p-t)],[n,t]]}};d.updateCircle=function(){this.mainCircle=this.main.selectAll("."+f.circles).selectAll("."+f.circle).data(this.lineOrScatterData.bind(this));this.mainCircle.enter().append("circle").attr("class",this.classCircle.bind(this)).attr("r",this.pointR.bind(this)).style("fill",this.color);this.mainCircle.style("opacity",this.initialOpacityForCircle.bind(this));this.mainCircle.exit().remove()};d.redrawCircle=function(a,b,c){var e=this.main.selectAll("."+f.selectedCircle);return[(c?this.mainCircle.transition():
this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",a).attr("cy",b),(c?e.transition():e).attr("cx",a).attr("cy",b)]};d.circleX=function(a){return a.x||0===a.x?this.x(a.x):null};d.updateCircleY=function(){var a=this,b,c;0<a.config.data_groups.length?(b=a.getShapeIndices(a.isLineType),c=a.generateGetLinePoints(b),a.circleY=function(a,b){return c(a,b)[0][1]}):a.circleY=function(b){return a.getYScale(b.id)(b.value)}};d.getCircles=function(a,b){return(b?
this.main.selectAll("."+f.circles+this.getTargetSelectorSuffix(b)):this.main).selectAll("."+f.circle+(r(a)?"-"+a:""))};d.expandCircles=function(a,b,c){var e=this.pointExpandedR.bind(this);c&&this.unexpandCircles();this.getCircles(a,b).classed(f.EXPANDED,!0).attr("r",e)};d.unexpandCircles=function(a){var b=this,c=b.pointR.bind(b);b.getCircles(a).filter(function(){return b.d3.select(this).classed(f.EXPANDED)}).classed(f.EXPANDED,!1).attr("r",c)};d.pointR=function(a){var b=this.config;return this.isStepType(a)?
0:J(b.point_r)?b.point_r(a):b.point_r};d.pointExpandedR=function(a){var b=this.config;return b.point_focus_expand_enabled?b.point_focus_expand_r?b.point_focus_expand_r:1.75*this.pointR(a):this.pointR(a)};d.pointSelectR=function(a){var b=this.config;return b.point_select_r?b.point_select_r:4*this.pointR(a)};d.isWithinCircle=function(a,b){var c=this.d3,e=c.mouse(a),d=c.select(a),c=+d.attr("cx"),d=+d.attr("cy");return Math.sqrt(Math.pow(c-e[0],2)+Math.pow(d-e[1],2))<b};d.isWithinStep=function(a,b){return 30>
Math.abs(b-this.d3.mouse(a)[1])};d.initBar=function(){this.main.select("."+f.chart).append("g").attr("class",f.chartBars)};d.updateTargetsForBar=function(a){var b=this.config,c=this.classChartBar.bind(this),e=this.classBars.bind(this),d=this.classFocus.bind(this);this.main.select("."+f.chartBars).selectAll("."+f.chartBar).data(a).attr("class",function(a){return c(a)+d(a)}).enter().append("g").attr("class",c).style("opacity",0).style("pointer-events","none").append("g").attr("class",e).style("cursor",
function(a){return b.data_selection_isselectable(a)?"pointer":null})};d.updateBar=function(a){var b=this,c=b.barData.bind(b),e=b.classBar.bind(b),d=b.initialOpacity.bind(b),g=function(a){return b.color(a.id)};b.mainBar=b.main.selectAll("."+f.bars).selectAll("."+f.bar).data(c);b.mainBar.enter().append("path").attr("class",e).style("stroke",g).style("fill",g);b.mainBar.style("opacity",d);b.mainBar.exit().transition().duration(a).style("opacity",0).remove()};d.redrawBar=function(a,b){return[(b?this.mainBar.transition():
this.mainBar).attr("d",a).style("fill",this.color).style("opacity",1)]};d.getBarW=function(a,b){var c=this.config,e="number"===typeof c.bar_width?c.bar_width:b?a.tickInterval()*c.bar_width_ratio/b:0;return c.bar_width_max&&e>c.bar_width_max?c.bar_width_max:e};d.getBars=function(a,b){return(b?this.main.selectAll("."+f.bars+this.getTargetSelectorSuffix(b)):this.main).selectAll("."+f.bar+(r(a)?"-"+a:""))};d.expandBars=function(a,b,c){c&&this.unexpandBars();this.getBars(a,b).classed(f.EXPANDED,!0)};d.unexpandBars=
function(a){this.getBars(a).classed(f.EXPANDED,!1)};d.generateDrawBar=function(a,b){var c=this.config,e=this.generateGetBarPoints(a,b);return function(a,b){var d=e(a,b),f=c.axis_rotated?1:0,m=c.axis_rotated?0:1;return"M "+d[0][f]+","+d[0][m]+" L"+d[1][f]+","+d[1][m]+" L"+d[2][f]+","+d[2][m]+" L"+d[3][f]+","+d[3][m]+" z"}};d.generateGetBarPoints=function(a,b){var c=this,e=a.__max__+1,d=c.getBarW(b?c.subXAxis:c.xAxis,e),f=c.getShapeX(d,e,a,!!b),h=c.getShapeY(!!b),l=c.getShapeOffset(c.isBarType,a,!!b),
m=b?c.getSubYScale:c.getYScale;return function(a,b){var e=m.call(c,a.id)(0),n=l(a,b)||e,B=f(a),q=h(a);c.config.axis_rotated&&(0<a.value&&q<e||0>a.value&&e<q)&&(q=e);return[[B,n],[B,q-(e-n)],[B+d,q-(e-n)],[B+d,n]]}};d.isWithinBar=function(a){var b=this.d3.mouse(a),c=a.getBoundingClientRect(),e=a.pathSegList.getItem(0),d=a.pathSegList.getItem(1);a=Math.min(e.x,d.x);e=Math.min(e.y,d.y);d=a+c.width+2;c=e+c.height+2;return a-2<b[0]&&b[0]<d&&e-2<b[1]&&b[1]<c};d.initText=function(){this.main.select("."+
f.chart).append("g").attr("class",f.chartTexts);this.mainText=this.d3.selectAll([])};d.updateTargetsForText=function(a){var b=this.classChartText.bind(this),c=this.classTexts.bind(this),e=this.classFocus.bind(this);this.main.select("."+f.chartTexts).selectAll("."+f.chartText).data(a).attr("class",function(a){return b(a)+e(a)}).enter().append("g").attr("class",b).style("opacity",0).style("pointer-events","none").append("g").attr("class",c)};d.updateText=function(a){var b=this,c=b.config,e=b.barOrLineData.bind(b),
d=b.classText.bind(b);b.mainText=b.main.selectAll("."+f.texts).selectAll("."+f.text).data(e);b.mainText.enter().append("text").attr("class",d).attr("text-anchor",function(a){return c.axis_rotated?0>a.value?"end":"start":"middle"}).style("stroke","none").style("fill",function(a){return b.color(a)}).style("fill-opacity",0);b.mainText.text(function(a,c,e){return b.dataLabelFormat(a.id)(a.value,a.id,c,e)});b.mainText.exit().transition().duration(a).style("fill-opacity",0).remove()};d.redrawText=function(a,
b,c,e){return[(e?this.mainText.transition():this.mainText).attr("x",a).attr("y",b).style("fill",this.color).style("fill-opacity",c?0:this.opacityForText.bind(this))]};d.getTextRect=function(a,b){var c=this.d3.select("body").append("div").classed("c3",!0),e;c.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).style("font",$(this.config.bindto).css("font")).selectAll(".dummy").data([a]).enter().append("text").classed(b?b:"",!0).text(a).each(function(){e=
this.getBoundingClientRect()});c.remove();return e};d.generateXYForText=function(a,b,c,e){var d=this,f=d.generateGetAreaPoints(a,!1),h=d.generateGetBarPoints(b,!1),l=d.generateGetLinePoints(c,!1),m=e?d.getXForText:d.getYForText;return function(a,b){var c=d.isAreaType(a)?f:d.isBarType(a)?h:l;return m.call(d,c(a,b),a,this)}};d.getXForText=function(a,b,c){c=c.getBoundingClientRect();var e;this.config.axis_rotated?(e=this.isBarType(b)?4:6,a=a[2][1]+e*(0>b.value?-1:1)):a=this.hasType("bar")?(a[2][0]+a[0][0])/
2:a[0][0];null===b.value&&(a>this.width?a=this.width-c.width:0>a&&(a=4));return a};d.getYForText=function(a,b,c){c=c.getBoundingClientRect();this.config.axis_rotated?a=(a[0][0]+a[2][0]+.6*c.height)/2:(a=a[2][1],0>b.value?(a+=c.height,this.isBarType(b)&&this.isSafari()?a-=3:!this.isBarType(b)&&this.isChrome()&&(a+=3)):a+=this.isBarType(b)?-3:-6);null!==b.value||this.config.axis_rotated||(a<c.height?a=c.height:a>this.height&&(a=this.height-4));return a};d.setTargetType=function(a,b){var c=this,e=c.config;
c.mapToTargetIds(a).forEach(function(a){c.withoutFadeIn[a]=b===e.data_types[a];e.data_types[a]=b});a||(e.data_type=b)};d.hasType=function(a,b){var c=this.config.data_types,e=!1;(b=b||this.data.targets)&&b.length?b.forEach(function(b){if((b=c[b.id])&&0<=b.indexOf(a)||!b&&"line"===a)e=!0}):Object.keys(c).length?Object.keys(c).forEach(function(b){c[b]===a&&(e=!0)}):e=this.config.data_type===a;return e};d.hasArcType=function(a){return this.hasType("pie",a)||this.hasType("donut",a)||this.hasType("gauge",
a)};d.isLineType=function(a){var b=this.config;a=z(a)?a:a.id;return!b.data_types[a]||0<="line spline area area-spline step area-step".split(" ").indexOf(b.data_types[a])};d.isStepType=function(a){a=z(a)?a:a.id;return 0<=["step","area-step"].indexOf(this.config.data_types[a])};d.isSplineType=function(a){a=z(a)?a:a.id;return 0<=["spline","area-spline"].indexOf(this.config.data_types[a])};d.isAreaType=function(a){a=z(a)?a:a.id;return 0<=["area","area-spline","area-step"].indexOf(this.config.data_types[a])};
d.isBarType=function(a){a=z(a)?a:a.id;return"bar"===this.config.data_types[a]};d.isScatterType=function(a){a=z(a)?a:a.id;return"scatter"===this.config.data_types[a]};d.isPieType=function(a){a=z(a)?a:a.id;return"pie"===this.config.data_types[a]};d.isGaugeType=function(a){a=z(a)?a:a.id;return"gauge"===this.config.data_types[a]};d.isDonutType=function(a){a=z(a)?a:a.id;return"donut"===this.config.data_types[a]};d.isArcType=function(a){return this.isPieType(a)||this.isDonutType(a)||this.isGaugeType(a)};
d.lineData=function(a){return this.isLineType(a)?[a]:[]};d.arcData=function(a){return this.isArcType(a.data)?[a]:[]};d.barData=function(a){return this.isBarType(a)?a.values:[]};d.lineOrScatterData=function(a){return this.isLineType(a)||this.isScatterType(a)?a.values:[]};d.barOrLineData=function(a){return this.isBarType(a)||this.isLineType(a)?a.values:[]};d.initGrid=function(){var a=this.config,b=this.d3;this.grid=this.main.append("g").attr("clip-path",this.clipPathForGrid).attr("class",f.grid);a.grid_x_show&&
this.grid.append("g").attr("class",f.xgrids);a.grid_y_show&&this.grid.append("g").attr("class",f.ygrids);a.grid_focus_show&&this.grid.append("g").attr("class",f.xgridFocus).append("line").attr("class",f.xgridFocus);this.xgrid=b.selectAll([]);a.grid_lines_front||this.initGridLines()};d.initGridLines=function(){var a=this.d3;this.gridLines=this.main.append("g").attr("clip-path",this.clipPathForGrid).attr("class",f.grid+" "+f.gridLines);this.gridLines.append("g").attr("class",f.xgridLines);this.gridLines.append("g").attr("class",
f.ygridLines);this.xgridLines=a.selectAll([])};d.updateXGrid=function(a){var b=this,c=b.config,e=b.d3,d=b.generateGridData(c.grid_x_type,b.x),g=b.isCategorized()?b.xAxis.tickOffset():0;b.xgridAttr=c.axis_rotated?{x1:0,x2:b.width,y1:function(a){return b.x(a)-g},y2:function(a){return b.x(a)-g}}:{x1:function(a){return b.x(a)+g},x2:function(a){return b.x(a)+g},y1:0,y2:b.height};b.xgrid=b.main.select("."+f.xgrids).selectAll("."+f.xgrid).data(d);b.xgrid.enter().append("line").attr("class",f.xgrid);a||b.xgrid.attr(b.xgridAttr).style("opacity",
function(){return+e.select(this).attr(c.axis_rotated?"y1":"x1")===(c.axis_rotated?b.height:0)?0:1});b.xgrid.exit().remove()};d.updateYGrid=function(){var a=this.config,b=this.yAxis.tickValues()||this.y.ticks(a.grid_y_ticks);this.ygrid=this.main.select("."+f.ygrids).selectAll("."+f.ygrid).data(b);this.ygrid.enter().append("line").attr("class",f.ygrid);this.ygrid.attr("x1",a.axis_rotated?this.y:0).attr("x2",a.axis_rotated?this.y:this.width).attr("y1",a.axis_rotated?0:this.y).attr("y2",a.axis_rotated?
this.height:this.y);this.ygrid.exit().remove();this.smoothLines(this.ygrid,"grid")};d.gridTextAnchor=function(a){return a.position?a.position:"end"};d.gridTextDx=function(a){return"start"===a.position?4:"middle"===a.position?0:-4};d.xGridTextX=function(a){return"start"===a.position?-this.height:"middle"===a.position?-this.height/2:0};d.yGridTextX=function(a){return"start"===a.position?0:"middle"===a.position?this.width/2:this.width};d.updateGrid=function(a){var b=this.main,c=this.config,e;this.grid.style("visibility",
this.hasArcType()?"hidden":"visible");b.select("line."+f.xgridFocus).style("visibility","hidden");c.grid_x_show&&this.updateXGrid();this.xgridLines=b.select("."+f.xgridLines).selectAll("."+f.xgridLine).data(c.grid_x_lines);e=this.xgridLines.enter().append("g").attr("class",function(a){return f.xgridLine+(a["class"]?" "+a["class"]:"")});e.append("line").style("opacity",0);e.append("text").attr("text-anchor",this.gridTextAnchor).attr("transform",c.axis_rotated?"":"rotate(-90)").attr("dx",this.gridTextDx).attr("dy",
-5).style("opacity",0);this.xgridLines.exit().transition().duration(a).style("opacity",0).remove();c.grid_y_show&&this.updateYGrid();this.ygridLines=b.select("."+f.ygridLines).selectAll("."+f.ygridLine).data(c.grid_y_lines);b=this.ygridLines.enter().append("g").attr("class",function(a){return f.ygridLine+(a["class"]?" "+a["class"]:"")});b.append("line").style("opacity",0);b.append("text").attr("text-anchor",this.gridTextAnchor).attr("transform",c.axis_rotated?"rotate(-90)":"").attr("dx",this.gridTextDx).attr("dy",
-5).style("opacity",0);b=this.yv.bind(this);this.ygridLines.select("line").transition().duration(a).attr("x1",c.axis_rotated?b:0).attr("x2",c.axis_rotated?b:this.width).attr("y1",c.axis_rotated?0:b).attr("y2",c.axis_rotated?this.height:b).style("opacity",1);this.ygridLines.select("text").transition().duration(a).attr("x",c.axis_rotated?this.xGridTextX.bind(this):this.yGridTextX.bind(this)).attr("y",b).text(function(a){return a.text}).style("opacity",1);this.ygridLines.exit().transition().duration(a).style("opacity",
0).remove()};d.redrawGrid=function(a){var b=this.config,c=this.xv.bind(this),e=this.xgridLines.select("line"),d=this.xgridLines.select("text");return[(a?e.transition():e).attr("x1",b.axis_rotated?0:c).attr("x2",b.axis_rotated?this.width:c).attr("y1",b.axis_rotated?c:0).attr("y2",b.axis_rotated?c:this.height).style("opacity",1),(a?d.transition():d).attr("x",b.axis_rotated?this.yGridTextX.bind(this):this.xGridTextX.bind(this)).attr("y",c).text(function(a){return a.text}).style("opacity",1)]};d.showXGridFocus=
function(a){var b=this.config;a=a.filter(function(a){return a&&r(a.value)});var c=this.main.selectAll("line."+f.xgridFocus),e=this.xx.bind(this);!b.tooltip_show||this.hasType("scatter")||this.hasArcType()||(c.style("visibility","visible").data([a[0]]).attr(b.axis_rotated?"y1":"x1",e).attr(b.axis_rotated?"y2":"x2",e),this.smoothLines(c,"grid"))};d.hideXGridFocus=function(){this.main.select("line."+f.xgridFocus).style("visibility","hidden")};d.updateXgridFocus=function(){var a=this.config;this.main.select("line."+
f.xgridFocus).attr("x1",a.axis_rotated?0:-10).attr("x2",a.axis_rotated?this.width:-10).attr("y1",a.axis_rotated?-10:0).attr("y2",a.axis_rotated?-10:this.height)};d.generateGridData=function(a,b){var c=[],e,d;d=this.main.select("."+f.axisX).selectAll(".tick").size();if("year"===a)for(e=this.getXDomain(),d=e[0].getFullYear(),e=e[1].getFullYear();d<=e;d++)c.push(new Date(d+"-01-01 00:00:00"));else c=b.ticks(10),c.length>d&&(c=c.filter(function(a){return 0>(""+a).indexOf(".")}));return c};d.getGridFilterToRemove=
function(a){return a?function(b){var c=!1;[].concat(a).forEach(function(a){if("value"in a&&b.value===a.value||"class"in a&&b["class"]===a["class"])c=!0});return c}:function(){return!0}};d.removeGridLines=function(a,b){var c=this.config,e=this.getGridFilterToRemove(a),d=function(a){return!e(a)},g=b?f.xgridLine:f.ygridLine;this.main.select("."+(b?f.xgridLines:f.ygridLines)).selectAll("."+g).filter(e).transition().duration(c.transition_duration).style("opacity",0).remove();b?c.grid_x_lines=c.grid_x_lines.filter(d):
c.grid_y_lines=c.grid_y_lines.filter(d)};d.initTooltip=function(){var a=this,b=a.config,c;a.tooltip=a.selectChart.style("position","relative").append("div").attr("class",f.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none").style("transform","scale(1)").style("transform-origin","center top");if(b.tooltip_init_show){if(a.isTimeSeries()&&z(b.tooltip_init_x)){b.tooltip_init_x=a.parseDate(b.tooltip_init_x);for(c=0;c<a.data.targets[0].values.length&&0!==
a.data.targets[0].values[c].x-b.tooltip_init_x;c++);b.tooltip_init_x=c}a.tooltip.html(b.tooltip_contents.call(a,a.data.targets.map(function(c){return a.addName(c.values[b.tooltip_init_x])}),a.axis.getXAxisTickFormat(),a.getYFormat(a.hasArcType()),a.color));a.tooltip.style("top",b.tooltip_init_position.top).style("left",b.tooltip_init_position.left).style("display","block")}};d.getTooltipContent=function(a,b,c,e){var d=this.config;b=d.tooltip_format_title||b;var g=d.tooltip_format_name||function(a){return a};
c=d.tooltip_format_value||c;for(var h,l,m,n,d=0;d<a.length;d++)a[d]&&(a[d].value||0===a[d].value)&&(h||(h=b?b(a[d].x):a[d].x,h="<table class='"+f.tooltip+"'>"+(h||0===h?"<tr><th colspan='2'>"+h+"</th></tr>":"")),l=c(a[d].value,a[d].ratio,a[d].id,a[d].index),void 0!==l&&(m=g(a[d].name,a[d].ratio,a[d].id,a[d].index),n=this.levelColor?this.levelColor(a[d].value):e(a[d].id),h+="<tr class='"+f.tooltipName+"-"+a[d].id+"'>",h+="<td class='name' style='white-space: nowrap;'><span style='background-color:"+
n+";'></span>"+m+"</td>",h+="<td class='value' style='white-space: nowrap;'>"+l+"</td>",h+="</tr>"));return h+"</table>"};d.tooltipPosition=function(a,b,c,e){a=d3.mouse(e);return{top:a[1]+14,left:a[0]}};d.showTooltip=function(a,b){var c=this.config,e,f;e=this.hasArcType();f=a.filter(function(a){return a&&r(a.value)});var g=c.tooltip_position||d.tooltipPosition;0!==f.length&&c.tooltip_show&&(this.tooltip.html(c.tooltip_contents.call(this,a,this.axis.getXAxisTickFormat(),this.getYFormat(e),this.color)).style("display",
"block"),c=this.tooltip.property("offsetWidth"),e=this.tooltip.property("offsetHeight"),f=g.call(this,f,c,e,b),this.tooltip.style("top",f.top+"px").style("left",f.left+"px"))};d.hideTooltip=function(){this.tooltip.style("display","none")};d.initLegend=function(){this.legendItemTextBox={};this.legendHasRendered=!1;this.legend=this.svg.append("g").attr("transform",this.getTranslate("legend"));this.config.legend_show?this.updateLegendWithDefaults():(this.legend.style("visibility","hidden"),this.hiddenLegendIds=
this.mapToIds(this.data.targets))};d.updateLegendWithDefaults=function(){this.updateLegend(this.mapToIds(this.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})};d.updateSizeForLegend=function(a,b){var c=this.config,e=this.isLegendTop?this.getCurrentPaddingTop()+c.legend_inset_y+5.5:this.currentHeight-a-this.getCurrentPaddingBottom()-c.legend_inset_y,c=this.isLegendLeft?this.getCurrentPaddingLeft()+c.legend_inset_x+.5:this.currentWidth-b-this.getCurrentPaddingRight()-
c.legend_inset_x+.5;this.margin3={top:this.isLegendRight?0:this.isLegendInset?e:this.currentHeight-a/6,right:NaN,bottom:0,left:this.isLegendRight?this.currentWidth-b:this.isLegendInset?c:0}};d.transformLegend=function(a){(a?this.legend.transition():this.legend).attr("transform",this.getTranslate("legend"))};d.updateLegendStep=function(a){this.legendStep=a};d.updateLegendItemWidth=function(a){this.legendItemWidth=a};d.updateLegendItemHeight=function(a){this.legendItemHeight=a};d.getLegendWidth=function(){return this.config.legend_show?
this.isLegendRight||this.isLegendInset?this.legendItemWidth*(this.legendStep+1):this.currentWidth:0};d.getLegendHeight=function(){var a=0;this.config.legend_show&&(a=this.isLegendRight?this.currentHeight:this.legendItemHeight*(this.legendStep+1));return a+4*this.config.completeScale};d.opacityForLegend=function(a){return a.classed(f.legendItemHidden)?null:1};d.opacityForUnfocusedLegend=function(a){return a.classed(f.legendItemHidden)?null:.3};d.toggleFocusLegend=function(a,b){var c=this;a=c.mapToTargetIds(a);
c.legend.selectAll("."+f.legendItem).filter(function(b){return 0<=a.indexOf(b)}).classed(f.legendItemFocused,b).transition().duration(100).style("opacity",function(){return(b?c.opacityForLegend:c.opacityForUnfocusedLegend).call(c,c.d3.select(this))})};d.revertLegend=function(){var a=this,b=a.d3;a.legend.selectAll("."+f.legendItem).classed(f.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return a.opacityForLegend(b.select(this))})};d.showLegend=function(a){var b=this,c=
b.config;c.legend_show||(c.legend_show=!0,b.legend.style("visibility","visible"),b.legendHasRendered||b.updateLegendWithDefaults());b.removeHiddenLegendIds(a);b.legend.selectAll(b.selectorLegends(a)).style("visibility","visible").transition().style("opacity",function(){return b.opacityForLegend(b.d3.select(this))})};d.hideLegend=function(a){var b=this.config;b.legend_show&&da(a)&&(b.legend_show=!1,this.legend.style("visibility","hidden"));this.addHiddenLegendIds(a);this.legend.selectAll(this.selectorLegends(a)).style("opacity",
0).style("visibility","hidden")};d.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}};d.updateLegend=function(a,b,c){function e(a,b){g.legendItemTextBox[b]||(g.legendItemTextBox[b]=g.getTextRect(a.textContent,f.legendItem));return g.legendItemTextBox[b]}function d(b,c,f){function k(a,b){b||(n=(p-x-l)/2,10>n&&(n=(p-l)/2,x=0,u++));E[a]=u;A[u]=g.isLegendInset?10:n;O[a]=x;x+=l}var m=0===f;f=f===a.length-1;b=e(b,c);f=b.width+z+(!f||g.isLegendRight||g.isLegendInset?10:0);b=b.height+4;var l=
g.isLegendRight||g.isLegendInset?b:f,p=g.isLegendRight||g.isLegendInset?g.getLegendHeight():g.getLegendWidth(),n;m&&(r=q=u=x=0);if(h.legend_show&&!g.isLegendToShow(c))I[c]=y[c]=E[c]=O[c]=0;else{I[c]=f;y[c]=b;if(!q||f>=q)q=f;if(!r||b>=r)r=b;m=g.isLegendRight||g.isLegendInset?r:q;h.legend_equally?(Object.keys(I).forEach(function(a){I[a]=q}),Object.keys(y).forEach(function(a){y[a]=r}),n=(p-m*a.length)/2,10>n?(u=x=0,a.forEach(function(a){k(a)})):k(c,!0)):k(c)}}var g=this,h=g.config,l,m,n,p,t,w,q=0,r=
0,z=12*h.completeScale,C,x=0,O={},I={},y={},A=[0],E={},u=0,D,J,L;b=b||{};D=G(b,"withTransition",!0);J=G(b,"withTransitionForTransform",!0);g.isLegendInset&&(u=h.legend_inset_step?h.legend_inset_step:a.length,g.updateLegendStep(u));g.isLegendRight?(l=function(a){return q*E[a]},p=function(a){return A[E[a]]+O[a]}):g.isLegendInset?(l=function(a){return q*E[a]+10},p=function(a){return A[E[a]]+O[a]}):(l=function(a){return A[E[a]]+O[a]},p=function(a){return r*E[a]});m=function(a,b){return l(a,b)+8.33*h.completeScale*
1.5};b=function(a,b){return p(a,b)-8.33*h.completeScale};t=function(a,b){return p(a,b)};n=function(a,b){return l(a,b)};w=function(a,b){return p(a,b)-r/1.5};C=g.legend.selectAll("."+f.legendItem).data(a).enter().append("g").attr("class",function(a){return g.generateClass(f.legendItem,a)}).style("visibility",function(a){return g.isLegendToShow(a)?"visible":"hidden"}).style("cursor","pointer").on("click",function(a){h.legend_item_onclick?h.legend_item_onclick.call(g,a):g.d3.event.altKey?(g.api.hide(),
g.api.show(a)):(g.api.toggle(a),g.isTargetToShow(a)?g.api.focus(a):g.api.revert())}).on("mouseover",function(a){g.d3.select(this).classed(f.legendItemFocused,!0);!g.transiting&&g.isTargetToShow(a)&&g.api.focus(a);h.legend_item_onmouseover&&h.legend_item_onmouseover.call(g,a)}).on("mouseout",function(a){g.d3.select(this).classed(f.legendItemFocused,!1);g.api.revert();h.legend_item_onmouseout&&h.legend_item_onmouseout.call(g,a)});C.append("text").text(function(a){return H(h.data_names[a])?h.data_names[a]:
a}).each(function(a,b){d(this,a,b)}).style("pointer-events","none").attr("x",g.isLegendRight||g.isLegendInset?m:-200).attr("y",g.isLegendRight||g.isLegendInset?-200:t);C.append("rect").attr("class",f.legendItemEvent).style("fill-opacity",0).attr("x",g.isLegendRight||g.isLegendInset?n:-200).attr("y",g.isLegendRight||g.isLegendInset?-200:w);C.append("rect").attr("class",f.legendItemTile).style("pointer-events","none").style("fill",g.color).attr("x",g.isLegendRight||g.isLegendInset?m:-200).attr("y",
g.isLegendRight||g.isLegendInset?-200:b).attr("width",8.33*h.completeScale).attr("height",8.33*h.completeScale);C=g.legend.select("."+f.legendBackground+" rect");g.isLegendInset&&0<q&&0===C.size()&&(C=g.legend.insert("g","."+f.legendItem).attr("class",f.legendBackground).append("rect"));L=g.legend.selectAll("text").data(a).text(function(a){return H(h.data_names[a])?h.data_names[a]:a}).each(function(a,b){d(this,a,b)});(D?L.transition():L).attr("x",m).attr("y",t);m=g.legend.selectAll("rect."+f.legendItemEvent).data(a);
(D?m.transition():m).attr("width",function(a){return I[a]}).attr("height",function(a){return y[a]}).attr("x",n).attr("y",w);n=g.legend.selectAll("rect."+f.legendItemTile).data(a);(D?n.transition():n).style("fill",g.color).attr("x",l).attr("y",b);C&&(D?C.transition():C).attr("height",g.getLegendHeight()-12).attr("width",q*(u+1)+10);g.legend.selectAll("."+f.legendItem).classed(f.legendItemHidden,function(a){return!g.isTargetToShow(a)});g.updateLegendItemWidth(q);g.updateLegendItemHeight(r);g.updateLegendStep(u);
g.updateSizes();g.updateScales();g.updateSvgSize();g.transformAll(J,c);g.legendHasRendered=!0};(function(a,b){if(Object.create)b.prototype=Object.create(a.prototype);else{var c=function(){};c.prototype=a.prototype;b.prototype=new c}return b.prototype.constructor=b})(function(a){this.owner=a},q);q.prototype.init=function(){var a=this.owner,b=a.config,c=a.main;a.axes.x=c.append("g").attr("class",f.axis+" "+f.axisX).attr("clip-path",a.clipPathForXAxis).attr("transform",a.getTranslate("x")).style("visibility",
b.axis_x_show?"visible":"hidden");a.axes.x.append("text").attr("class",f.axisXLabel).attr("transform",b.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this));a.axes.y=c.append("g").attr("class",f.axis+" "+f.axisY).attr("clip-path",b.axis_y_inner?"":a.clipPathForYAxis).attr("transform",a.getTranslate("y")).style("visibility",b.axis_y_show?"visible":"hidden");a.axes.y.append("text").attr("class",f.axisYLabel).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",
this.textAnchorForYAxisLabel.bind(this));a.axes.y2=c.append("g").attr("class",f.axis+" "+f.axisY2).attr("transform",a.getTranslate("y2")).style("visibility",b.axis_y2_show?"visible":"hidden");a.axes.y2.append("text").attr("class",f.axisY2Label).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))};q.prototype.getXAxis=function(a,b,c,e,d,f,h){var l=this.owner,m=l.config;d={isCategory:l.isCategorized(),withOuterTick:d,tickMultiline:m.axis_x_tick_multiline,
tickWidth:m.axis_x_tick_width,tickTextRotate:h?0:m.axis_x_tick_rotate,withoutTransition:f};a=aa(l.d3,d,l).scale(a).orient(b);l.isTimeSeries()&&e&&(e=e.map(function(a){return l.parseDate(a)}));a.tickFormat(c).tickValues(e);l.isCategorized()&&(a.tickCentered(m.axis_x_tick_centered),da(m.axis_x_tick_culling)&&(m.axis_x_tick_culling=!1));return a};q.prototype.updateXAxisTickValues=function(a,b){var c=this.owner,e=c.config,d;if(e.axis_x_tick_fit||e.axis_x_tick_count)d=this.generateTickValues(c.mapTargetsToUniqueXs(a),
e.axis_x_tick_count,c.isTimeSeries());b?b.tickValues(d):(c.xAxis.tickValues(d),c.subXAxis.tickValues(d));return d};q.prototype.getYAxis=function(a,b,c,e,d,f){var h=this.owner,l=h.d3,m=h.config;a=aa(l,{withOuterTick:d,withoutTransition:f},h).scale(a).orient(b).tickFormat(c);h.isTimeSeriesY()?a.ticks(l.time[m.axis_y_tick_time_value],m.axis_y_tick_time_interval):a.tickValues(e);return a};q.prototype.getId=function(a){var b=this.owner.config;return a in b.data_axes?b.data_axes[a]:"y"};q.prototype.getXAxisTickFormat=
function(){var a=this.owner,b=a.config,c=a.isTimeSeries()?a.defaultAxisTimeFormat:a.isCategorized()?a.categoryName:function(a){return 0>a?a.toFixed(0):a};b.axis_x_tick_format&&(J(b.axis_x_tick_format)?c=b.axis_x_tick_format:a.isTimeSeries()&&(c=function(c){return c?a.axisTimeFormat(b.axis_x_tick_format)(c):""}));return J(c)?function(b){return c.call(a,b)}:c};q.prototype.getTickValues=function(a,b){return a?a:b?b.tickValues():void 0};q.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,
this.owner.xAxis)};q.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)};q.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)};q.prototype.getLabelOptionByAxisId=function(a){var b=this.owner.config,c;"y"===a?c=b.axis_y_label:"y2"===a?c=b.axis_y2_label:"x"===a&&(c=b.axis_x_label);return c};q.prototype.getLabelText=function(a){a=this.getLabelOptionByAxisId(a);
return z(a)?a:a?a.text:null};q.prototype.setLabelText=function(a,b){var c=this.owner.config,e=this.getLabelOptionByAxisId(a);z(e)?"y"===a?c.axis_y_label=b:"y2"===a?c.axis_y2_label=b:"x"===a&&(c.axis_x_label=b):e&&(e.text=b)};q.prototype.getLabelPosition=function(a,b){var c=this.getLabelOptionByAxisId(a),c=c&&"object"===typeof c&&c.position?c.position:b;return{isInner:0<=c.indexOf("inner"),isOuter:0<=c.indexOf("outer"),isLeft:0<=c.indexOf("left"),isCenter:0<=c.indexOf("center"),isRight:0<=c.indexOf("right"),
isTop:0<=c.indexOf("top"),isMiddle:0<=c.indexOf("middle"),isBottom:0<=c.indexOf("bottom")}};q.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")};q.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")};q.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")};
q.prototype.getLabelPositionById=function(a){return"y2"===a?this.getY2AxisLabelPosition():"y"===a?this.getYAxisLabelPosition():this.getXAxisLabelPosition()};q.prototype.textForXAxisLabel=function(){return this.getLabelText("x")};q.prototype.textForYAxisLabel=function(){return this.getLabelText("y")};q.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")};q.prototype.xForAxisLabel=function(a,b){var c=this.owner;return a?b.isLeft?0:b.isCenter?c.width/2:c.width:b.isBottom?-c.height:
b.isMiddle?-c.height/2:0};q.prototype.dxForAxisLabel=function(a,b){return a?b.isLeft?"0.3em":b.isRight?"-0.3em":"0":b.isTop?"0.0em":b.isBottom?"0.3em":"0"};q.prototype.textAnchorForAxisLabel=function(a,b){return a?b.isLeft?"start":b.isCenter?"middle":"end":b.isBottom?"start":b.isMiddle?"middle":"end"};q.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};q.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,
this.getYAxisLabelPosition())};q.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())};q.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};q.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())};q.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,
this.getY2AxisLabelPosition())};q.prototype.dyForXAxisLabel=function(){var a=this.owner,b=a.config,c=this.getXAxisLabelPosition();return b.axis_rotated?c.isInner?"1.0em":-25*a.config.completeScale-this.getMaxTickWidth("x"):c.isInner?"-0.3em":b.axis_x_height?b.axis_x_height-10*a.config.completeScale:"2.7em"};q.prototype.dyForYAxisLabel=function(){var a=this.owner,b=this.getYAxisLabelPosition();return a.config.axis_rotated?b.isInner?"-0.3em":"3em":b.isInner?"1.0em":-13*a.config.completeScale-(a.config.axis_y_inner?
0:this.getMaxTickWidth("y"))};q.prototype.dyForY2AxisLabel=function(){var a=this.owner,b=this.getY2AxisLabelPosition();return a.config.axis_rotated?b.isInner?"1.0em":"-2.2em":b.isInner?"-0.3em":13*a.config.completeScale+(a.config.axis_y2_inner?0:this.getMaxTickWidth("y2"))};q.prototype.textAnchorForXAxisLabel=function(){return this.textAnchorForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};q.prototype.textAnchorForYAxisLabel=function(){return this.textAnchorForAxisLabel(this.owner.config.axis_rotated,
this.getYAxisLabelPosition())};q.prototype.textAnchorForY2AxisLabel=function(){return this.textAnchorForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())};q.prototype.getMaxTickWidth=function(a,b){var c=this.owner,e=c.config,d=0,f,h,l;if(b&&c.currentMaxTickWidths[a])return c.currentMaxTickWidths[a];c.svg&&(f=c.filterTargetsToShow(c.data.targets),"y"===a?(h=c.y.copy().domain(c.getYDomain(f,"y")),h=this.getYAxis(h,c.yOrient,e.axis_y_tick_format,c.yAxisTickValues,!1,!0)):"y2"===
a?(h=c.y2.copy().domain(c.getYDomain(f,"y2")),h=this.getYAxis(h,c.y2Orient,e.axis_y2_tick_format,c.y2AxisTickValues,!1,!0)):(h=c.x.copy().domain(c.getXDomain(f)),h=this.getXAxis(h,c.xOrient,c.xAxisTickFormat,c.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(f,h)),l=c.d3.select("body").append("div").classed("c3",!0),e=l.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).style("font",$(e.bindto).css("font")),e.append("g").call(h).each(function(){c.d3.select(this).selectAll("text").each(function(){var a=
this.getBoundingClientRect();d<a.width&&(d=a.width)});l.remove()}));c.currentMaxTickWidths[a]=0>=d?c.currentMaxTickWidths[a]:d;return c.currentMaxTickWidths[a]};q.prototype.updateLabels=function(a){var b=this.owner,c=b.main.select("."+f.axisX+" ."+f.axisXLabel),e=b.main.select("."+f.axisY+" ."+f.axisYLabel),b=b.main.select("."+f.axisY2+" ."+f.axisY2Label);(a?c.transition():c).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this));
(a?e.transition():e).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this));(a?b.transition():b).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))};q.prototype.getPadding=function(a,b,c,e){return r(a[b])?"ratio"===a.unit?a[b]*e:this.convertPixelsToAxisPadding(a[b],e):
c};q.prototype.convertPixelsToAxisPadding=function(a,b){var c=this.owner;return a/(c.config.axis_rotated?c.width:c.height)*b};q.prototype.generateTickValues=function(a,b,c){var e=a,d,f,h,l;if(b)if(b=J(b)?b():b,1===b)e=[a[0]];else if(2===b)e=[a[0],a[a.length-1]];else if(2<b){d=b-2;b=a[0];a=a[a.length-1];f=(a-b)/(d+1);e=[b];for(h=0;h<d;h++)l=+b+f*(h+1),e.push(c?new Date(l):l);e.push(a)}c||(e=e.sort(function(a,b){return a-b}));return e};q.prototype.generateTransitions=function(a){var b=this.owner.axes;
return{axisX:a?b.x.transition().duration(a):b.x,axisY:a?b.y.transition().duration(a):b.y,axisY2:a?b.y2.transition().duration(a):b.y2,axisSubX:a?b.subx.transition().duration(a):b.subx}};q.prototype.redraw=function(a,b){var c=this.owner;c.axes.x.style("opacity",b?0:1);c.axes.y.style("opacity",b?0:1);c.axes.y2.style("opacity",b?0:1);c.axes.subx.style("opacity",b?0:1);a.axisX.call(c.xAxis);a.axisY.call(c.yAxis);a.axisY2.call(c.y2Axis);a.axisSubX.call(c.subXAxis)};d.getClipPath=function(a){return"url("+
(0<=window.navigator.appVersion.toLowerCase().indexOf("msie 9.")?"":document.URL.split("#")[0])+"#"+a+")"};d.appendClip=function(a,b){return a.append("clipPath").attr("id",b).append("rect")};d.getAxisClipX=function(a){var b=Math.max(40,this.margin.left);return a?-(1+b):-(b-1)};d.getAxisClipY=function(a){return a?-10:-this.margin.top};d.getXAxisClipX=function(){return this.getAxisClipX(!this.config.axis_rotated)};d.getXAxisClipY=function(){return this.getAxisClipY(!this.config.axis_rotated)-10*this.config.completeScale};
d.getYAxisClipX=function(){return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)};d.getYAxisClipY=function(){return this.getAxisClipY(this.config.axis_rotated)};d.getAxisClipWidth=function(a){var b=Math.max(30,this.margin.left),c=Math.max(30,this.margin.right);return a?this.width+2+b+c:this.margin.left+20+100*this.config.completeScale};d.getAxisClipHeight=function(a){return(a?this.margin.bottom:this.margin.top+this.height)+20+20*this.config.completeScale};d.getXAxisClipWidth=
function(){return this.getAxisClipWidth(!this.config.axis_rotated)};d.getXAxisClipHeight=function(){return this.getAxisClipHeight(!this.config.axis_rotated)};d.getYAxisClipWidth=function(){return this.getAxisClipWidth(this.config.axis_rotated)+(this.config.axis_y_inner?20:0)};d.getYAxisClipHeight=function(){return this.getAxisClipHeight(this.config.axis_rotated)};d.initPie=function(){var a=this.config;this.pie=this.d3.layout.pie().value(function(a){return a.values.reduce(function(a,b){return a+b.value},
0)});a.data_order||this.pie.sort(null)};d.updateRadius=function(){var a=this.config,a=a.gauge_width||a.donut_width;this.radiusExpanded=Math.min(this.arcWidth,this.arcHeight)/2;this.radius=.95*this.radiusExpanded;this.innerRadiusRatio=a?(this.radius-a)/this.radius:.6;this.innerRadius=this.hasType("donut")||this.hasType("gauge")?this.radius*this.innerRadiusRatio:0};d.updateArc=function(){this.svgArc=this.getSvgArc();this.svgArcExpanded=this.getSvgArcExpanded();this.svgArcExpandedSub=this.getSvgArcExpanded(.98)};
d.updateAngle=function(a){var b=this.config,c=!1,e=0,d=b.gauge_min,f=b.gauge_max;this.pie(this.filterTargetsToShow(this.data.targets)).forEach(function(b){c||b.data.id!==a.data.id||(c=!0,a=b,a.index=e);e++});isNaN(a.startAngle)&&(a.startAngle=0);isNaN(a.endAngle)&&(a.endAngle=a.startAngle);this.isGaugeType(a.data)&&(b=Math.PI/(f-d),d=a.value<d?0:a.value<f?a.value-d:f-d,a.startAngle=Math.PI/2*-1,a.endAngle=a.startAngle+b*d);return c?a:null};d.getSvgArc=function(){var a=this,b=a.d3.svg.arc().outerRadius(a.radius).innerRadius(a.innerRadius),
c=function(c,d){var f;return d?b(c):(f=a.updateAngle(c))?b(f):"M 0 0"};c.centroid=b.centroid;return c};d.getSvgArcExpanded=function(a){var b=this,c=b.d3.svg.arc().outerRadius(b.radiusExpanded*(a?a:1)).innerRadius(b.innerRadius);return function(a){return(a=b.updateAngle(a))?c(a):"M 0 0"}};d.getArc=function(a,b,c){return c||this.isArcType(a.data)?this.svgArc(a,b):"M 0 0"};d.transformForArcLabel=function(a){a=this.updateAngle(a);var b,c;b="";a&&!this.hasType("gauge")&&(b=this.svgArc.centroid(a),a=isNaN(b[0])?
0:b[0],b=isNaN(b[1])?0:b[1],c=Math.sqrt(a*a+b*b),c=this.radius&&c?(.375<36/this.radius?1.175-36/this.radius:.8)*this.radius/c:0,b="translate("+a*c+","+b*c+")");return b};d.getArcRatio=function(a){var b=this.hasType("gauge")?Math.PI:2*Math.PI;return a?(a.endAngle-a.startAngle)/b:null};d.convertToArcData=function(a){return this.addName({id:a.data.id,value:a.value,ratio:this.getArcRatio(a),index:a.index})};d.textForArcLabel=function(a){var b,c,d;if(!this.shouldShowArcLabel())return"";c=(b=this.updateAngle(a))?
b.value:null;b=this.getArcRatio(b);a=a.data.id;return this.hasType("gauge")||this.meetsArcLabelThreshold(b)?(d=this.getArcLabelFormat())?d(c,b,a):this.defaultArcValueFormat(c,b):""};d.expandArc=function(a){var b=this,c;b.transiting?c=window.setInterval(function(){b.transiting||(window.clearInterval(c),0<b.legend.selectAll(".c3-legend-item-focused").size()&&b.expandArc(a))},10):(a=b.mapToTargetIds(a),b.svg.selectAll(b.selectorTargets(a,"."+f.chartArc)).each(function(a){b.shouldExpand(a.data.id)&&b.d3.select(this).selectAll("path").transition().duration(50).attr("d",
b.svgArcExpanded).transition().duration(100).attr("d",b.svgArcExpandedSub).each(function(a){b.isDonutType(a.data)})}))};d.unexpandArc=function(a){this.transiting||(a=this.mapToTargetIds(a),this.svg.selectAll(this.selectorTargets(a,"."+f.chartArc)).selectAll("path").transition().duration(50).attr("d",this.svgArc),this.svg.selectAll("."+f.arc).style("opacity",1))};d.shouldExpand=function(a){var b=this.config;return this.isDonutType(a)&&b.donut_expand||this.isGaugeType(a)&&b.gauge_expand||this.isPieType(a)&&
b.pie_expand};d.shouldShowArcLabel=function(){var a=this.config,b=!0;this.hasType("donut")?b=a.donut_label_show:this.hasType("pie")&&(b=a.pie_label_show);return b};d.meetsArcLabelThreshold=function(a){var b=this.config,b=this.hasType("donut")?b.donut_label_threshold:b.pie_label_threshold;return a>=b};d.getArcLabelFormat=function(){var a=this.config,b=a.pie_label_format;this.hasType("gauge")?b=a.gauge_label_format:this.hasType("donut")&&(b=a.donut_label_format);return b};d.getArcTitle=function(){return this.hasType("donut")?
this.config.donut_title:""};d.updateTargetsForArc=function(a){var b=this.main,c=this.classChartArc.bind(this),d=this.classArcs.bind(this),k=this.classFocus.bind(this);a=b.select("."+f.chartArcs).selectAll("."+f.chartArc).data(this.pie(a)).attr("class",function(a){return c(a)+k(a.data)}).enter().append("g").attr("class",c);a.append("g").attr("class",d);a.append("text").attr("dy",this.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")};
d.initArc=function(){this.arcs=this.main.select("."+f.chart).append("g").attr("class",f.chartArcs).attr("transform",this.getTranslate("arc"));this.arcs.append("text").attr("class",f.chartArcsTitle).style("text-anchor","middle").text(this.getArcTitle())};d.redrawArc=function(a,b,c){var d=this,k=d.d3,g=d.config,h=d.main,l;l=h.selectAll("."+f.arcs).selectAll("."+f.arc).data(d.arcData.bind(d));l.enter().append("path").attr("class",d.classArc.bind(d)).style("fill",function(a){return d.color(a.data)}).style("cursor",
function(a){return g.interaction_enabled&&g.data_selection_isselectable(a)?"pointer":null}).style("opacity",0).each(function(a){d.isGaugeType(a.data)&&(a.startAngle=a.endAngle=Math.PI/2*-1);this._current=a});l.attr("transform",function(a){return!d.isGaugeType(a.data)&&c?"scale(0)":""}).style("opacity",function(a){return a===this._current?0:1}).on("mouseover",g.interaction_enabled?function(a){var b;d.transiting||(a=d.updateAngle(a),b=d.convertToArcData(a),d.expandArc(a.data.id),d.api.focus(a.data.id),
d.toggleFocusLegend(a.data.id,!0),d.config.data_onmouseover(b,this))}:null).on("mousemove",g.interaction_enabled?function(a){a=d.updateAngle(a);a=[d.convertToArcData(a)];d.showTooltip(a,this)}:null).on("mouseout",g.interaction_enabled?function(a){var b;d.transiting||(a=d.updateAngle(a),b=d.convertToArcData(a),d.unexpandArc(a.data.id),d.api.revert(),d.revertLegend(),d.hideTooltip(),d.config.data_onmouseout(b,this))}:null).on("click",g.interaction_enabled?function(a,b){var c=d.updateAngle(a),c=d.convertToArcData(c);
d.toggleShape&&d.toggleShape(this,c,b);d.config.data_onclick.call(d.api,c,this)}:null).each(function(){d.transiting=!0}).transition().duration(a).attrTween("d",function(a){var b=d.updateAngle(a),c;if(!b)return function(){return"M 0 0"};isNaN(this._current.startAngle)&&(this._current.startAngle=0);isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle);c=k.interpolate(this._current,b);this._current=c(0);return function(b){b=c(b);b.data=a.data;return d.getArc(b,!0)}}).attr("transform",
c?"scale(1)":"").style("fill",function(a){return d.levelColor?d.levelColor(a.data.values[0].value):d.color(a.data.id)}).style("opacity",1).call(d.endall,function(){d.transiting=!1});l.exit().transition().duration(b).style("opacity",0).remove();h.selectAll("."+f.chartArc).select("text").style("opacity",0).attr("class",function(a){return d.isGaugeType(a.data)?f.gaugeValue:""}).text(d.textForArcLabel.bind(d)).attr("transform",d.transformForArcLabel.bind(d)).style("font-size",function(a){return d.isGaugeType(a.data)?
Math.round(d.radius/5)+"px":""}).transition().duration(a).style("opacity",function(a){return d.isTargetToShow(a.data.id)&&d.isArcType(a.data)?1:0});h.select("."+f.chartArcsTitle).style("opacity",d.hasType("donut")||d.hasType("gauge")?1:0);d.hasType("gauge")&&(d.arcs.select("."+f.chartArcsBackground).attr("d",function(){return d.getArc({data:[{value:g.gauge_max}],startAngle:Math.PI/2*-1,endAngle:Math.PI/2},!0,!0)}),d.arcs.select("."+f.chartArcsGaugeUnit).attr("dy",".75em").text(g.gauge_label_show?
g.gauge_units:""),d.arcs.select("."+f.chartArcsGaugeMin).attr("dx",-1*(d.innerRadius+(d.radius-d.innerRadius)/2)+"px").attr("dy","1.2em").text(g.gauge_label_show?g.gauge_min:""),d.arcs.select("."+f.chartArcsGaugeMax).attr("dx",d.innerRadius+(d.radius-d.innerRadius)/2+"px").attr("dy","1.2em").text(g.gauge_label_show?g.gauge_max:""))};d.initGauge=function(){var a=this.arcs;this.hasType("gauge")&&(a.append("path").attr("class",f.chartArcsBackground),a.append("text").attr("class",f.chartArcsGaugeUnit).style("text-anchor",
"middle").style("pointer-events","none"),a.append("text").attr("class",f.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",f.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))};d.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0};d.initRegion=function(){this.region=this.main.append("g").attr("clip-path",this.clipPath).attr("class",f.regions)};d.updateRegion=function(a){var b=this.config;
this.region.style("visibility",this.hasArcType()?"hidden":"visible");this.mainRegion=this.main.select("."+f.regions).selectAll("."+f.region).data(b.regions);this.mainRegion.enter().append("g").attr("class",this.classRegion.bind(this)).append("rect").style("fill-opacity",0);this.mainRegion.exit().transition().duration(a).style("opacity",0).remove()};d.redrawRegion=function(a){var b=this.mainRegion.selectAll("rect"),c=this.regionX.bind(this),d=this.regionY.bind(this),f=this.regionWidth.bind(this),g=
this.regionHeight.bind(this);return[(a?b.transition():b).attr("x",c).attr("y",d).attr("width",f).attr("height",g).style("fill-opacity",function(a){return r(a.opacity)?a.opacity:.1})]};d.regionX=function(a){var b=this.config,c="y"===a.axis?this.y:this.y2;return"y"===a.axis||"y2"===a.axis?b.axis_rotated?"start"in a?c(a.start):0:0:b.axis_rotated?0:"start"in a?this.x(this.isTimeSeries()?this.parseDate(a.start):a.start):0};d.regionY=function(a){var b=this.config,c="y"===a.axis?this.y:this.y2;return"y"===
a.axis||"y2"===a.axis?b.axis_rotated?0:"end"in a?c(a.end):0:b.axis_rotated?"start"in a?this.x(this.isTimeSeries()?this.parseDate(a.start):a.start):0:0};d.regionWidth=function(a){var b=this.config,c=this.regionX(a),d="y"===a.axis?this.y:this.y2;a="y"===a.axis||"y2"===a.axis?b.axis_rotated?"end"in a?d(a.end):this.width:this.width:b.axis_rotated?this.width:"end"in a?this.x(this.isTimeSeries()?this.parseDate(a.end):a.end):this.width;return a<c?0:a-c};d.regionHeight=function(a){var b=this.config,c=this.regionY(a),
d="y"===a.axis?this.y:this.y2;a="y"===a.axis||"y2"===a.axis?b.axis_rotated?this.height:"start"in a?d(a.start):this.height:b.axis_rotated?"end"in a?this.x(this.isTimeSeries()?this.parseDate(a.end):a.end):this.height:this.height;return a<c?0:a-c};d.isRegionOnX=function(a){return!a.axis||"x"===a.axis};d.drag=function(a){var b=this,c=b.config,d=b.main,k=b.d3,g,h,l,m,n,p,t;b.hasArcType()||!c.data_selection_enabled||c.zoom_enabled&&!b.zoom.altDomain||!c.data_selection_multiple||(g=b.dragStart[0],h=b.dragStart[1],
l=a[0],a=a[1],m=Math.min(g,l),n=Math.max(g,l),p=c.data_selection_grouped?b.margin.top:Math.min(h,a),t=c.data_selection_grouped?b.height:Math.max(h,a),d.select("."+f.dragarea).attr("x",m).attr("y",p).attr("width",n-m).attr("height",t-p),d.selectAll("."+f.shapes).selectAll("."+f.shape).filter(function(a){return c.data_selection_isselectable(a)}).each(function(a,c){var d=k.select(this),e=d.classed(f.SELECTED),g=d.classed(f.INCLUDED),h,l,q,r,u;h=!1;if(d.classed(f.circle))h=1*d.attr("cx"),l=1*d.attr("cy"),
u=b.togglePoint,h=m<h&&h<n&&p<l&&l<t;else if(d.classed(f.bar))u=fa(this),h=u.x,l=u.y,q=u.width,r=u.height,u=b.togglePath,h=!(n<h||h+q<m)&&!(t<l||l+r<p);else return;h^g&&(d.classed(f.INCLUDED,!g),d.classed(f.SELECTED,!e),u.call(b,!e,d,a,c))}))};d.dragstart=function(a){var b=this.config;!this.hasArcType()&&b.data_selection_enabled&&(this.dragStart=a,this.main.select("."+f.chart).append("rect").attr("class",f.dragarea).style("opacity",.1),this.dragging=!0)};d.dragend=function(){var a=this.config;!this.hasArcType()&&
a.data_selection_enabled&&(this.main.select("."+f.dragarea).transition().duration(100).style("opacity",0).remove(),this.main.selectAll("."+f.shape).classed(f.INCLUDED,!1),this.dragging=!1)};d.selectPoint=function(a,b,c){var d=this,k=d.config,g=(k.axis_rotated?d.circleY:d.circleX).bind(d),h=(k.axis_rotated?d.circleX:d.circleY).bind(d),l=d.pointSelectR.bind(d);k.data_onselected.call(d.api,b,a.node());d.main.select("."+f.selectedCircles+d.getTargetSelectorSuffix(b.id)).selectAll("."+f.selectedCircle+
"-"+c).data([b]).enter().append("circle").attr("class",function(){return d.generateClass(f.selectedCircle,c)}).attr("cx",g).attr("cy",h).attr("stroke",function(){return d.color(b)}).attr("r",function(a){return 1.4*d.pointSelectR(a)}).transition().duration(100).attr("r",l)};d.unselectPoint=function(a,b,c){this.config.data_onunselected(b,a.node());this.main.select("."+f.selectedCircles+this.getTargetSelectorSuffix(b.id)).selectAll("."+f.selectedCircle+"-"+c).transition().duration(100).attr("r",0).remove()};
d.togglePoint=function(a,b,c,d){a?this.selectPoint(b,c,d):this.unselectPoint(b,c,d)};d.selectPath=function(a,b){var c=this;c.config.data_onselected.call(c,b,a.node());a.transition().duration(100).style("fill",function(){return c.d3.rgb(c.color(b)).brighter(.75)})};d.unselectPath=function(a,b){var c=this;c.config.data_onunselected.call(c,b,a.node());a.transition().duration(100).style("fill",function(){return c.color(b)})};d.togglePath=function(a,b,c,d){a?this.selectPath(b,c,d):this.unselectPath(b,
c,d)};d.getToggle=function(a,b){var c;"circle"===a.nodeName?c=this.isStepType(b)?function(){}:this.togglePoint:"path"===a.nodeName&&(c=this.togglePath);return c};d.toggleShape=function(a,b,c){var d=this.d3,k=this.config,g=d.select(a),h=g.classed(f.SELECTED),l=this.getToggle(a,b).bind(this);k.data_selection_enabled&&k.data_selection_isselectable(b)&&(k.data_selection_multiple||this.main.selectAll("."+f.shapes+(k.data_selection_grouped?this.getTargetSelectorSuffix(b.id):"")).selectAll("."+f.shape).each(function(a,
b){var c=d.select(this);c.classed(f.SELECTED)&&l(!1,c.classed(f.SELECTED,!1),a,b)}),g.classed(f.SELECTED,!h),l(!h,g,b,c))};d.initBrush=function(){var a=this;a.brush=a.d3.svg.brush().on("brush",function(){a.redrawForBrush()});a.brush.update=function(){a.context&&a.context.select("."+f.brush).call(this);return this};a.brush.scale=function(b){return a.config.axis_rotated?this.y(b):this.x(b)}};d.initSubchart=function(){var a=this.config,b=this.context=this.svg.append("g").attr("transform",this.getTranslate("context"));
b.style("visibility",a.subchart_show?"visible":"hidden");b.append("g").attr("clip-path",this.clipPathForSubchart).attr("class",f.chart);b.select("."+f.chart).append("g").attr("class",f.chartBars);b.select("."+f.chart).append("g").attr("class",f.chartLines);b.append("g").attr("clip-path",this.clipPath).attr("class",f.brush).call(this.brush);this.axes.subx=b.append("g").attr("class",f.axisX).attr("transform",this.getTranslate("subx")).attr("clip-path",a.axis_rotated?"":this.clipPathForXAxis)};d.updateTargetsForSubchart=
function(a){var b=this.context,c=this.config,d,k,g=this.classChartBar.bind(this),h=this.classBars.bind(this);d=this.classChartLine.bind(this);var l=this.classLines.bind(this),m=this.classAreas.bind(this);c.subchart_show&&(k=b.select("."+f.chartBars).selectAll("."+f.chartBar).data(a).attr("class",g),k=k.enter().append("g").style("opacity",0).attr("class",g),k.append("g").attr("class",h),a=b.select("."+f.chartLines).selectAll("."+f.chartLine).data(a).attr("class",d),d=a.enter().append("g").style("opacity",
0).attr("class",d),d.append("g").attr("class",l),d.append("g").attr("class",m),b.selectAll("."+f.brush+" rect").attr(c.axis_rotated?"width":"height",c.axis_rotated?this.width2:this.height2))};d.updateBarForSubchart=function(a){this.contextBar=this.context.selectAll("."+f.bars).selectAll("."+f.bar).data(this.barData.bind(this));this.contextBar.enter().append("path").attr("class",this.classBar.bind(this)).style("stroke","none").style("fill",this.color);this.contextBar.style("opacity",this.initialOpacity.bind(this));
this.contextBar.exit().transition().duration(a).style("opacity",0).remove()};d.redrawBarForSubchart=function(a,b,c){(b?this.contextBar.transition().duration(c):this.contextBar).attr("d",a).style("opacity",1)};d.updateLineForSubchart=function(a){this.contextLine=this.context.selectAll("."+f.lines).selectAll("."+f.line).data(this.lineData.bind(this));this.contextLine.enter().append("path").attr("class",this.classLine.bind(this)).style("stroke",this.color);this.contextLine.style("opacity",this.initialOpacity.bind(this));
this.contextLine.exit().transition().duration(a).style("opacity",0).remove()};d.redrawLineForSubchart=function(a,b,c){(b?this.contextLine.transition().duration(c):this.contextLine).attr("d",a).style("opacity",1)};d.updateAreaForSubchart=function(a){var b=this,c=b.d3;b.contextArea=b.context.selectAll("."+f.areas).selectAll("."+f.area).data(b.lineData.bind(b));b.contextArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){b.orgAreaOpacity=+c.select(this).style("opacity");
return 0});b.contextArea.style("opacity",0);b.contextArea.exit().transition().duration(a).style("opacity",0).remove()};d.redrawAreaForSubchart=function(a,b,c){(b?this.contextArea.transition().duration(c):this.contextArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)};d.redrawSubchart=function(a,b,c,d,f,g,h){b=this.d3;d=this.config;this.context.style("visibility",d.subchart_show?"visible":"hidden");d.subchart_show&&(b.event&&"zoom"===b.event.type&&this.brush.extent(this.x.orgDomain()).update(),
a&&(this.brush.empty()||this.brush.extent(this.x.orgDomain()).update(),a=this.generateDrawArea(f,!0),g=this.generateDrawBar(g,!0),h=this.generateDrawLine(h,!0),this.updateBarForSubchart(c),this.updateLineForSubchart(c),this.updateAreaForSubchart(c),this.redrawBarForSubchart(g,c,c),this.redrawLineForSubchart(h,c,c),this.redrawAreaForSubchart(a,c,c)))};d.redrawForBrush=function(){var a=this.x;this.redraw({withTransition:!1,withY:this.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1});
this.config.subchart_onbrush.call(this.api,a.orgDomain())};d.transformContext=function(a,b){var c;b&&b.axisSubX?c=b.axisSubX:(c=this.context.select("."+f.axisX),a&&(c=c.transition()));this.context.attr("transform",this.getTranslate("context"));c.attr("transform",this.getTranslate("subx"))};d.getDefaultExtent=function(){var a=this.config,a=J(a.axis_x_extent)?a.axis_x_extent(this.getXDomain(this.data.targets)):a.axis_x_extent;this.isTimeSeries()&&(a=[this.parseDate(a[0]),this.parseDate(a[1])]);return a};
d.initZoom=function(){var a=this,b=a.d3,c=a.config,d;a.zoom=b.behavior.zoom().on("zoomstart",function(){d=b.event.sourceEvent;a.zoom.altDomain=b.event.sourceEvent.altKey?a.x.orgDomain():null;c.zoom_onzoomstart.call(a.api,b.event.sourceEvent)}).on("zoom",function(){a.redrawForZoom.call(a)}).on("zoomend",function(){var f=b.event.sourceEvent;f&&d.clientX===f.clientX&&d.clientY===f.clientY||(a.redrawEventRect(),a.updateZoom(),c.zoom_onzoomend.call(a.api,a.x.orgDomain()))});a.zoom.scale=function(a){return c.axis_rotated?
this.y(a):this.x(a)};a.zoom.orgScaleExtent=function(){var b=c.zoom_extent?c.zoom_extent:[1,10];return[b[0],Math.max(a.getMaxDataCount()/b[1],b[1])]};a.zoom.updateScaleExtent=function(){var b=L(a.x.orgDomain())/L(a.orgXDomain),c=this.orgScaleExtent();this.scaleExtent([c[0]*b,c[1]*b]);return this}};d.updateZoom=function(){var a=this.config.zoom_enabled?this.zoom:function(){};this.main.select("."+f.zoomRect).call(a).on("dblclick.zoom",null);this.main.selectAll("."+f.eventRect).call(a).on("dblclick.zoom",
null)};d.redrawForZoom=function(){var a=this.d3,b=this.config,c=this.zoom,d=this.x;b.zoom_enabled&&0!==this.filterTargetsToShow(this.data.targets).length&&("mousemove"===a.event.sourceEvent.type&&c.altDomain?(d.domain(c.altDomain),c.scale(d).updateScaleExtent()):(this.isCategorized()&&d.orgDomain()[0]===this.orgXDomain[0]&&d.domain([this.orgXDomain[0]-1E-10,d.orgDomain()[1]]),this.redraw({withTransition:!1,withY:b.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===a.event.sourceEvent.type&&
(this.cancelClick=!0),b.zoom_onzoom.call(this.api,d.orgDomain())))};d.generateColor=function(){var a=this.config,b=this.d3,c=a.data_colors,d=A(a.color_pattern)?a.color_pattern:b.scale.category10().range(),f=a.data_color,g=[];return function(a){var b=a.id||a.data&&a.data.id||a,m;c[b]instanceof Function?m=c[b](a):c[b]?m=c[b]:(0>g.indexOf(b)&&g.push(b),m=d[g.indexOf(b)%d.length],c[b]=m);return f instanceof Function?f(m,a):m}};d.generateLevelColor=function(){var a=this.config,b=a.color_pattern,c=a.color_threshold,
d="value"===c.unit,f=c.values&&c.values.length?c.values:[],g=c.max||100;return A(a.color_threshold)?function(a){var c,m,n=b[b.length-1];for(c=0;c<f.length;c++)if(m=d?a:100*a/g,m<f[c]){n=b[c];break}return n}:null};d.getYFormat=function(a){var b=this,c=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.yFormat,d=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.y2Format;return function(a,f,h){return("y2"===b.axis.getId(h)?d:c).call(b,a,f)}};d.yFormat=function(a){var b=this.config;return(b.axis_y_tick_format?
b.axis_y_tick_format:this.defaultValueFormat)(a)};d.y2Format=function(a){var b=this.config;return(b.axis_y2_tick_format?b.axis_y2_tick_format:this.defaultValueFormat)(a)};d.defaultValueFormat=function(a){return r(a)?+a:""};d.defaultArcValueFormat=function(a,b){return(100*b).toFixed(1)+"%"};d.dataLabelFormat=function(a){var b=this.config.data_labels,c=function(a){return r(a)?+a:""};return"function"===typeof b.format?b.format:"object"===typeof b.format?b.format[a]?!0===b.format[a]?c:b.format[a]:function(){return""}:
c};d.hasCaches=function(a){for(var b=0;b<a.length;b++)if(!(a[b]in this.cache))return!1;return!0};d.addCache=function(a,b){this.cache[a]=this.cloneTarget(b)};d.getCaches=function(a){var b=[],c;for(c=0;c<a.length;c++)a[c]in this.cache&&b.push(this.cloneTarget(this.cache[a[c]]));return b};var f=d.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",
chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",
defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",
xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",
legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};d.generateClass=function(a,b){return" "+a+" "+a+this.getTargetSelectorSuffix(b)};d.classText=function(a){return this.generateClass(f.text,a.index)};d.classTexts=function(a){return this.generateClass(f.texts,a.id)};d.classShape=function(a){return this.generateClass(f.shape,a.index)};d.classShapes=function(a){return this.generateClass(f.shapes,a.id)};d.classLine=function(a){return this.classShape(a)+
this.generateClass(f.line,a.id)};d.classLines=function(a){return this.classShapes(a)+this.generateClass(f.lines,a.id)};d.classCircle=function(a){return this.classShape(a)+this.generateClass(f.circle,a.index)};d.classCircles=function(a){return this.classShapes(a)+this.generateClass(f.circles,a.id)};d.classBar=function(a){return this.classShape(a)+this.generateClass(f.bar,a.index)};d.classBars=function(a){return this.classShapes(a)+this.generateClass(f.bars,a.id)};d.classArc=function(a){return this.classShape(a.data)+
this.generateClass(f.arc,a.data.id)};d.classArcs=function(a){return this.classShapes(a.data)+this.generateClass(f.arcs,a.data.id)};d.classArea=function(a){return this.classShape(a)+this.generateClass(f.area,a.id)};d.classAreas=function(a){return this.classShapes(a)+this.generateClass(f.areas,a.id)};d.classRegion=function(a,b){return this.generateClass(f.region,b)+" "+("class"in a?a["class"]:"")};d.classEvent=function(a){return this.generateClass(f.eventRect,a.index)};d.classTarget=function(a){var b=
this.config.data_classes[a],c="";b&&(c=" "+f.target+"-"+b);return this.generateClass(f.target,a)+c};d.classFocus=function(a){return this.classFocused(a)+this.classDefocused(a)};d.classFocused=function(a){return" "+(0<=this.focusedTargetIds.indexOf(a.id)?f.focused:"")};d.classDefocused=function(a){return" "+(0<=this.defocusedTargetIds.indexOf(a.id)?f.defocused:"")};d.classChartText=function(a){return f.chartText+this.classTarget(a.id)};d.classChartLine=function(a){return f.chartLine+this.classTarget(a.id)};
d.classChartBar=function(a){return f.chartBar+this.classTarget(a.id)};d.classChartArc=function(a){return f.chartArc+this.classTarget(a.data.id)};d.getTargetSelectorSuffix=function(a){return a||0===a?("-"+a).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""};d.selectorTarget=function(a,b){return(b||"")+"."+f.target+this.getTargetSelectorSuffix(a)};d.selectorTargets=function(a,b){var c=this;a=a||[];return a.length?a.map(function(a){return c.selectorTarget(a,b)}):null};d.selectorLegend=function(a){return"."+
f.legendItem+this.getTargetSelectorSuffix(a)};d.selectorLegends=function(a){var b=this;return a&&a.length?a.map(function(a){return b.selectorLegend(a)}):null};var r=d.isValue=function(a){return a||0===a},J=d.isFunction=function(a){return"function"===typeof a},z=d.isString=function(a){return"string"===typeof a},u=d.isUndefined=function(a){return"undefined"===typeof a},H=d.isDefined=function(a){return"undefined"!==typeof a},ca=d.ceil10=function(a){return 10*Math.ceil(a/10)},T=d.asHalfPixel=function(a){return Math.ceil(a)+
.5},L=d.diffDomain=function(a){return a[1]-a[0]},da=d.isEmpty=function(a){return!a||z(a)&&0===a.length||"object"===typeof a&&0===Object.keys(a).length},A=d.notEmpty=function(a){return 0<Object.keys(a).length},G=d.getOption=function(a,b,c){return H(a[b])?a[b]:c},ea=d.hasValue=function(a,b){var c=!1;Object.keys(a).forEach(function(d){a[d]===b&&(c=!0)});return c},fa=d.getPathBox=function(a){var b=a.getBoundingClientRect();a=[a.pathSegList.getItem(0),a.pathSegList.getItem(1)];return{x:a[0].x,y:Math.min(a[0].y,
a[1].y),width:b.width,height:b.height}};n.focus=function(a){var b=this.internal,c;a=b.mapToTargetIds(a);c=b.svg.selectAll(b.selectorTargets(a.filter(b.isTargetToShow,b)));this.revert();this.defocus();c.classed(f.focused,!0).classed(f.defocused,!1);b.hasArcType()&&b.expandArc(a);b.toggleFocusLegend(a,!0);b.focusedTargetIds=a;b.defocusedTargetIds=b.defocusedTargetIds.filter(function(b){return 0>a.indexOf(b)})};n.defocus=function(a){var b=this.internal;a=b.mapToTargetIds(a);b.svg.selectAll(b.selectorTargets(a.filter(b.isTargetToShow,
b))).classed(f.focused,!1).classed(f.defocused,!0);b.hasArcType()&&b.unexpandArc(a);b.toggleFocusLegend(a,!1);b.focusedTargetIds=b.focusedTargetIds.filter(function(b){return 0>a.indexOf(b)});b.defocusedTargetIds=a};n.revert=function(a){var b=this.internal;a=b.mapToTargetIds(a);b.svg.selectAll(b.selectorTargets(a)).classed(f.focused,!1).classed(f.defocused,!1);b.hasArcType()&&b.unexpandArc(a);b.config.legend_show&&(b.showLegend(a.filter(b.isLegendToShow.bind(b))),b.legend.selectAll(b.selectorLegends(a)).filter(function(){return b.d3.select(this).classed(f.legendItemFocused)}).classed(f.legendItemFocused,
!1));b.focusedTargetIds=[];b.defocusedTargetIds=[]};n.show=function(a,b){var c=this.internal,d;a=c.mapToTargetIds(a);b=b||{};c.removeHiddenTargetIds(a);d=c.svg.selectAll(c.selectorTargets(a));d.transition().style("opacity",1,"important").call(c.endall,function(){d.style("opacity",null).style("opacity",1)});b.withLegend&&c.showLegend(a);c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})};n.hide=function(a,b){var c=this.internal,d;a=c.mapToTargetIds(a);b=b||{};c.addHiddenTargetIds(a);
d=c.svg.selectAll(c.selectorTargets(a));d.transition().style("opacity",0,"important").call(c.endall,function(){d.style("opacity",null).style("opacity",0)});b.withLegend&&c.hideLegend(a);c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})};n.toggle=function(a,b){var c=this,d=this.internal;d.mapToTargetIds(a).forEach(function(a){d.isTargetToShow(a)?c.hide(a,b):c.show(a,b)})};n.zoom=function(a){var b=this.internal;a&&(b.isTimeSeries()&&(a=a.map(function(a){return b.parseDate(a)})),
b.brush.extent(a),b.redraw({withUpdateXDomain:!0,withY:b.config.zoom_rescale}),b.config.zoom_onzoom.call(this,b.x.orgDomain()));return b.brush.extent()};n.zoom.enable=function(a){var b=this.internal;b.config.zoom_enabled=a;b.updateAndRedraw()};n.unzoom=function(){var a=this.internal;a.brush.clear().update();a.redraw({withUpdateXDomain:!0})};n.load=function(a){var b=this.internal,c=b.config;a.xs&&b.addXs(a.xs);"classes"in a&&Object.keys(a.classes).forEach(function(b){c.data_classes[b]=a.classes[b]});
"categories"in a&&b.isCategorized()&&(c.axis_x_categories=a.categories);"axes"in a&&Object.keys(a.axes).forEach(function(b){c.data_axes[b]=a.axes[b]});"colors"in a&&Object.keys(a.colors).forEach(function(b){c.data_colors[b]=a.colors[b]});"cacheIds"in a&&b.hasCaches(a.cacheIds)?b.load(b.getCaches(a.cacheIds),a.done):"unload"in a?b.unload(b.mapToTargetIds("boolean"===typeof a.unload&&a.unload?null:a.unload),function(){b.loadFromArgs(a)}):b.loadFromArgs(a)};n.unload=function(a){var b=this.internal;a=
a||{};a instanceof Array?a={ids:a}:"string"===typeof a&&(a={ids:[a]});b.unload(b.mapToTargetIds(a.ids),function(){b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0});a.done&&a.done()})};n.flow=function(a){var b=this.internal,c,d,f=[],g=b.getMaxDataCount(),h,l=0,m=0,n;if(a.json)d=b.convertJsonToData(a.json,a.keys);else if(a.rows)d=b.convertRowsToData(a.rows);else if(a.columns)d=b.convertColumnsToData(a.columns);else return;c=b.convertDataToTargets(d,!0);b.data.targets.forEach(function(a){var d=
!1,e,g;for(e=0;e<c.length;e++)if(a.id===c[e].id){d=!0;a.values[a.values.length-1]&&(m=a.values[a.values.length-1].index+1);l=c[e].values.length;for(g=0;g<l;g++)c[e].values[g].index=m+g,b.isTimeSeries()||(c[e].values[g].x=m+g);a.values=a.values.concat(c[e].values);c.splice(e,1);break}d||f.push(a.id)});b.data.targets.forEach(function(a){var c,d;for(c=0;c<f.length;c++)if(a.id===f[c])for(m=a.values[a.values.length-1].index+1,d=0;d<l;d++)a.values.push({id:a.id,index:m+d,x:b.isTimeSeries()?b.getOtherTargetX(m+
d):m+d,value:null})});b.data.targets.length&&c.forEach(function(a){var c,d=[];for(c=b.data.targets[0].values[0].index;c<m;c++)d.push({id:a.id,index:c,x:b.isTimeSeries()?b.getOtherTargetX(c):c,value:null});a.values.forEach(function(a){a.index+=m;b.isTimeSeries()||(a.x+=m)});a.values=d.concat(a.values)});b.data.targets=b.data.targets.concat(c);b.getMaxDataCount();h=b.data.targets[0];d=h.values[0];H(a.to)?(l=0,n=b.isTimeSeries()?b.parseDate(a.to):a.to,h.values.forEach(function(a){a.x<n&&l++})):H(a.length)&&
(l=a.length);g?1===g&&b.isTimeSeries()&&(h=(h.values[h.values.length-1].x-d.x)/2,h=[new Date(+d.x-h),new Date(+d.x+h)],b.updateXDomain(null,!0,!0,!1,h)):(h=b.isTimeSeries()?1<h.values.length?h.values[h.values.length-1].x-d.x:d.x-b.getXDomain(b.data.targets)[0]:1,h=[d.x-h,d.x],b.updateXDomain(null,!0,!0,!1,h));b.updateTargets(b.data.targets);b.redraw({flow:{index:d.index,length:l,duration:r(a.duration)?a.duration:b.config.transition_duration,done:a.done,orgDataCount:g},withLegend:!0,withTransition:1<
g,withTrimXDomain:!1,withUpdateXAxis:!0})};d.generateFlow=function(a){var b=this,c=b.config,d=b.d3;return function(){var k=a.targets,g=a.flow,h=a.drawBar,l=a.drawLine,m=a.drawArea,n=a.cx,p=a.cy,q=a.xv,r=a.xForText,u=a.yForText,A=a.duration,z=1,C,x=g.index,D=g.length,I=b.getValueOnIndex(b.data.targets[0].values,x),y=b.getValueOnIndex(b.data.targets[0].values,x+D),z=b.x.domain(),A=g.duration||A,H=g.done||function(){},E=b.generateWait(),G=b.xgrid||d.selectAll([]),J=b.xgridLines||d.selectAll([]),Q=b.mainRegion||
d.selectAll([]),T=b.mainText||d.selectAll([]),P=b.mainBar||d.selectAll([]),F=b.mainLine||d.selectAll([]),W=b.mainArea||d.selectAll([]),K=b.mainCircle||d.selectAll([]);b.flowing=!0;b.data.targets.forEach(function(a){a.values.splice(0,D)});k=b.updateXDomain(k,!0,!0);b.updateXGrid&&b.updateXGrid(!0);g.orgDataCount?g=1===g.orgDataCount||I.x===y.x?b.x(z[0])-b.x(k[0]):b.isTimeSeries()?b.x(z[0])-b.x(k[0]):b.x(I.x)-b.x(y.x):1!==b.data.targets[0].values.length?g=b.x(z[0])-b.x(k[0]):b.isTimeSeries()?(I=b.getValueOnIndex(b.data.targets[0].values,
0),y=b.getValueOnIndex(b.data.targets[0].values,b.data.targets[0].values.length-1),g=b.x(I.x)-b.x(y.x)):g=L(k)/2;z=L(z)/L(k);C="translate("+g+",0) scale("+z+",1)";b.hideXGridFocus();b.hideTooltip();d.transition().ease("linear").duration(A).each(function(){E.add(b.axes.x.transition().call(b.xAxis));E.add(P.transition().attr("transform",C));E.add(F.transition().attr("transform",C));E.add(W.transition().attr("transform",C));E.add(K.transition().attr("transform",C));E.add(T.transition().attr("transform",
C));E.add(Q.filter(b.isRegionOnX).transition().attr("transform",C));E.add(G.transition().attr("transform",C));E.add(J.transition().attr("transform",C))}).call(E,function(){var a,d=[],e=[],g=[];if(D){for(a=0;a<D;a++)d.push("."+f.shape+"-"+(x+a)),e.push("."+f.text+"-"+(x+a)),g.push("."+f.eventRect+"-"+(x+a));b.svg.selectAll("."+f.shapes).selectAll(d).remove();b.svg.selectAll("."+f.texts).selectAll(e).remove();b.svg.selectAll("."+f.eventRects).selectAll(g).remove();b.svg.select("."+f.xgrid).remove()}G.attr("transform",
null).attr(b.xgridAttr);J.attr("transform",null);J.select("line").attr("x1",c.axis_rotated?0:q).attr("x2",c.axis_rotated?b.width:q);J.select("text").attr("x",c.axis_rotated?b.width:0).attr("y",q);P.attr("transform",null).attr("d",h);F.attr("transform",null).attr("d",l);W.attr("transform",null).attr("d",m);K.attr("transform",null).attr("cx",n).attr("cy",p);T.attr("transform",null).attr("x",r).attr("y",u).style("fill-opacity",b.opacityForText.bind(b));Q.attr("transform",null);Q.select("rect").filter(b.isRegionOnX).attr("x",
b.regionX.bind(b)).attr("width",b.regionWidth.bind(b));c.interaction_enabled&&b.redrawEventRect();H();b.flowing=!1})}};n.selected=function(a){var b=this.internal,c=b.d3;return c.merge(b.main.selectAll("."+f.shapes+b.getTargetSelectorSuffix(a)).selectAll("."+f.shape).filter(function(){return c.select(this).classed(f.SELECTED)}).map(function(a){return a.map(function(a){a=a.__data__;return a.data?a.data:a})}))};n.select=function(a,b,c){var d=this.internal,k=d.d3,g=d.config;g.data_selection_enabled&&
d.main.selectAll("."+f.shapes).selectAll("."+f.shape).each(function(h,l){var m=k.select(this),n=h.data?h.data.id:h.id,p=d.getToggle(this,h).bind(d),n=g.data_selection_grouped||!a||0<=a.indexOf(n),q=!b||0<=b.indexOf(l),r=m.classed(f.SELECTED);m.classed(f.line)||m.classed(f.area)||(n&&q?g.data_selection_isselectable(h)&&!r&&p(!0,m.classed(f.SELECTED,!0),h,l):H(c)&&c&&r&&p(!1,m.classed(f.SELECTED,!1),h,l))})};n.unselect=function(a,b){var c=this.internal,d=c.d3,k=c.config;k.data_selection_enabled&&c.main.selectAll("."+
f.shapes).selectAll("."+f.shape).each(function(g,h){var l=d.select(this),m=g.data?g.data.id:g.id,n=c.getToggle(this,g).bind(c),m=k.data_selection_grouped||!a||0<=a.indexOf(m),p=!b||0<=b.indexOf(h),q=l.classed(f.SELECTED);l.classed(f.line)||l.classed(f.area)||m&&p&&k.data_selection_isselectable(g)&&q&&n(!1,l.classed(f.SELECTED,!1),g,h)})};n.transform=function(a,b){var c=this.internal,d=0<=["pie","donut"].indexOf(a)?{withTransform:!0}:null;c.transformTo(b,a,d)};d.transformTo=function(a,b,c){var d=!this.hasArcType();
c=c||{withTransitionForAxis:d};this.transiting=c.withTransitionForTransform=!1;this.setTargetType(a,b);this.updateTargets(this.data.targets);this.updateAndRedraw(c)};n.groups=function(a){var b=this.internal,c=b.config;if(u(a))return c.data_groups;c.data_groups=a;b.redraw();return c.data_groups};n.xgrids=function(a){var b=this.internal,c=b.config;if(!a)return c.grid_x_lines;c.grid_x_lines=a;b.redrawWithoutRescale();return c.grid_x_lines};n.xgrids.add=function(a){return this.xgrids(this.internal.config.grid_x_lines.concat(a?
a:[]))};n.xgrids.remove=function(a){this.internal.removeGridLines(a,!0)};n.ygrids=function(a){var b=this.internal,c=b.config;if(!a)return c.grid_y_lines;c.grid_y_lines=a;b.redrawWithoutRescale();return c.grid_y_lines};n.ygrids.add=function(a){return this.ygrids(this.internal.config.grid_y_lines.concat(a?a:[]))};n.ygrids.remove=function(a){this.internal.removeGridLines(a,!1)};n.regions=function(a){var b=this.internal,c=b.config;if(!a)return c.regions;c.regions=a;b.redrawWithoutRescale();return c.regions};
n.regions.add=function(a){var b=this.internal,c=b.config;if(!a)return c.regions;c.regions=c.regions.concat(a);b.redrawWithoutRescale();return c.regions};n.regions.remove=function(a){var b=this.internal,c=b.config,d,k;a=a||{};d=b.getOption(a,"duration",c.transition_duration);k=b.getOption(a,"classes",[f.region]);a=b.main.select("."+f.regions).selectAll(k.map(function(a){return"."+a}));(d?a.transition().duration(d):a).style("opacity",0).remove();c.regions=c.regions.filter(function(a){var b=!1;if(!a["class"])return!0;
a["class"].split(" ").forEach(function(a){0<=k.indexOf(a)&&(b=!0)});return!b});return c.regions};n.data=function(a){var b=this.internal.data.targets;return"undefined"===typeof a?b:b.filter(function(b){return 0<=[].concat(a).indexOf(b.id)})};n.data.shown=function(a){return this.internal.filterTargetsToShow(this.data(a))};n.data.values=function(a){var b=null;a&&(a=this.data(a),b=a[0]?a[0].values.map(function(a){return a.value}):null);return b};n.data.names=function(a){this.internal.clearLegendItemTextBoxCache();
return this.internal.updateDataAttributes("names",a)};n.data.colors=function(a){return this.internal.updateDataAttributes("colors",a)};n.data.axes=function(a){return this.internal.updateDataAttributes("axes",a)};n.category=function(a,b){var c=this.internal,d=c.config;1<arguments.length&&(d.axis_x_categories[a]=b,c.redraw());return d.axis_x_categories[a]};n.categories=function(a){var b=this.internal,c=b.config;if(!arguments.length)return c.axis_x_categories;c.axis_x_categories=a;b.redraw();return c.axis_x_categories};
n.color=function(a){return this.internal.color(a)};n.x=function(a){var b=this.internal;arguments.length&&(b.updateTargetX(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}));return b.data.xs};n.xs=function(a){var b=this.internal;arguments.length&&(b.updateTargetXs(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}));return b.data.xs};n.axis=function(){};n.axis.labels=function(a){var b=this.internal;arguments.length&&(Object.keys(a).forEach(function(c){b.axis.setLabelText(c,
a[c])}),b.axis.updateLabels())};n.axis.max=function(a){var b=this.internal,c=b.config;if(arguments.length)"object"===typeof a?(r(a.x)&&(c.axis_x_max=a.x),r(a.y)&&(c.axis_y_max=a.y),r(a.y2)&&(c.axis_y2_max=a.y2)):c.axis_y_max=c.axis_y2_max=a,b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0});else return{x:c.axis_x_max,y:c.axis_y_max,y2:c.axis_y2_max}};n.axis.min=function(a){var b=this.internal,c=b.config;if(arguments.length)"object"===typeof a?(r(a.x)&&(c.axis_x_min=a.x),r(a.y)&&(c.axis_y_min=
a.y),r(a.y2)&&(c.axis_y2_min=a.y2)):c.axis_y_min=c.axis_y2_min=a,b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0});else return{x:c.axis_x_min,y:c.axis_y_min,y2:c.axis_y2_min}};n.axis.range=function(a){if(arguments.length)H(a.max)&&this.axis.max(a.max),H(a.min)&&this.axis.min(a.min);else return{max:this.axis.max(),min:this.axis.min()}};n.legend=function(){};n.legend.show=function(a){var b=this.internal;b.showLegend(b.mapToTargetIds(a));b.updateAndRedraw({withLegend:!0})};n.legend.hide=function(a){var b=
this.internal;b.hideLegend(b.mapToTargetIds(a));b.updateAndRedraw({withLegend:!0})};n.resize=function(a){var b=this.internal.config;b.size_width=a?a.width:null;b.size_height=a?a.height:null;this.flush()};n.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})};n.destroy=function(){var a=this.internal;window.clearInterval(a.intervalForObserveInserted);window.onresize=null;a.selectChart.classed("c3",!1).html("");Object.keys(a).forEach(function(b){a[b]=
null});return null};n.tooltip=function(){};n.tooltip.show=function(a){var b=this.internal,c,d;a.mouse&&(d=a.mouse);a.data?b.isMultipleX()?(d=[b.x(a.data.x),b.getYScale(a.data.id)(a.data.value)],c=null):c=r(a.data.index)?a.data.index:b.getIndexByX(a.data.x):"undefined"!==typeof a.x?c=b.getIndexByX(a.x):"undefined"!==typeof a.index&&(c=a.index);b.dispatchEvent("mouseover",c,d);b.dispatchEvent("mousemove",c,d)};n.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0)};var Q;d.isSafari=function(){var a=
window.navigator.userAgent;return 0<=a.indexOf("Safari")&&0>a.indexOf("Chrome")};d.isChrome=function(){return 0<=window.navigator.userAgent.indexOf("Chrome")};"function"===typeof define&&define.amd?define("c3",["d3"],D):"undefined"!==typeof exports&&"undefined"!==typeof module?module.exports=D:window.c3=D})();