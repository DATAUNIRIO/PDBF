(function(u){function Y(a){var b=this.internal=new ca(this);b.loadConfig(a);b.beforeInit(a);b.init();b.afterInit(a);(function f(a,b,d){Object.keys(a).forEach(function(e){b[e]=a[e].bind(d);0<Object.keys(a[e]).length&&f(a[e],b[e],d)})})(n,this,this)}function ca(a){this.d3=u.d3?u.d3:"undefined"!==typeof require?require("d3"):void 0;this.api=a;this.config=this.getDefaultConfig();this.data={};this.cache={};this.axes={}}function q(a){this.owner=a}function da(a,b,c){function f(a,b){a.attr("transform",function(a){return"translate("+
Math.ceil(b(a)+T)+", 0)"})}function k(a,b){a.attr("transform",function(a){return"translate(0,"+Math.ceil(b(a))+")"})}function h(a){var b=a[0];a=a[a.length-1];return b<a?[b,a]:[a,b]}function d(a){var b,c=[];if(a.ticks)return a.ticks.apply(a,J);b=a.domain();for(a=Math.ceil(b[0]);a<b[1];a++)c.push(a);0<c.length&&0<c[0]&&c.unshift(c[0]-(c[1]-c[0]));return c}function e(){var a=r.copy(),c;b.isCategory&&(c=r.domain(),a.domain([c[0],c[1]-1]));return a}function m(a){a=v?v(a):a;return"undefined"!==typeof a?
a:""}function x(a){if(U)return U;var b={h:11.5,w:5.5};a.select("text").text(m).each(function(a){var c=this.getBoundingClientRect(),f=""+m(a);a=c.height;c=f?c.width/f.length:void 0;a&&c&&(b.h=a,b.w=c)}).text("");return U=b}function p(c){c.each(function(){function c(a,f){function k(a,b){g=void 0;for(var c=1;c<b.length;c++)if(" "===b.charAt(c)&&(g=c),d=b.substr(0,c+1),e=G.w*d.length,f<e)return k(a.concat(b.substr(0,g?g:c)),b.slice(g?g+1:c));return a.concat(b)}var h=m(a),d,g,e;if("[object Array]"===Object.prototype.toString.call(h))return h;
if(!f||0>=f)f=E?95:b.isCategory?Math.ceil(A(u[1])-A(u[0]))-12:110;return k([],h+"")}function J(a,c){var f=G.h;0===c&&(f="left"===w||"right"===w?-(G.h/2*(P[a.index]-1)-5.5*b.$$.config.completeScale):".71em");return f}function F(a){a=r(a)+(K?0:T);return O[0]<a&&a<O[1]?L:0}var v=p.g=a.select(this),S=this.__chart__||r,A=this.__chart__=e(),u=t?t:d(A),H=v.selectAll(".tick").data(u,A),I=H.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6),W=H.exit().remove(),X=(b.withoutTransition?
H:a.transition(H)).style("opacity",1),R,y,C,O=r.rangeExtent?r.rangeExtent():h(r.range());y=v.selectAll(".domain").data([0]);var Z=(y.enter().append("path").attr("class","domain"),b.withoutTransition?y:a.transition(y));I.append("line");I.append("text");var aa=I.select("line"),ba=X.select("line"),B=I.select("text"),D=X.select("text");b.isCategory?(T=Math.ceil((A(1)-A(0))/2),y=K?0:T,C=K?T:0):T=y=0;var z,G=x(v.select(".tick")),P=[],v=Math.max(L,0)+q,E="left"===w||"right"===w,H=H.select("text");z=H.selectAll("tspan").data(function(a,
f){var k=b.tickMultiline?c(a,b.tickWidth):[].concat(m(a));P[f]=k.length;return k.map(function(a){return{index:f,splitted:a}})});z.enter().append("tspan");z.exit().remove();!E&&b.$$.config.noxticks||E&&b.$$.config.noyticks||z.text(function(a){return a.splitted});var V=b.tickTextRotate;switch(w){case "bottom":R=f;aa.attr("y2",L);B.attr("y",v);ba.attr("x1",y).attr("x2",y).attr("y2",F);D.attr("x",0).attr("y",V?v-9.5*b.$$.config.completeScale+10*b.$$.config.completeScale*Math.cos(V/180*Math.PI):v+.5*b.$$.config.completeScale).style("text-anchor",
V?0<V?"start":"end":"middle").attr("transform",V?"rotate("+V+")":"");z.attr("x",0).attr("dy",J).attr("dx",V?v*Math.sin(V/180*Math.PI):0);Z.attr("d","M"+O[0]+","+n+"V0H"+O[1]+"V"+n);break;case "top":R=f;aa.attr("y2",-L);B.attr("y",-v);ba.attr("x2",0).attr("y2",-L);D.attr("x",0).attr("y",-v);H.style("text-anchor","middle");z.attr("x",0).attr("dy","0em");Z.attr("d","M"+O[0]+","+-n+"V0H"+O[1]+"V"+-n);break;case "left":R=k;aa.attr("x2",-L);B.attr("x",-v);ba.attr("x2",-L).attr("y1",C).attr("y2",C);D.attr("x",
-v).attr("y",T);H.style("text-anchor","end");z.attr("x",-v).attr("dy",J);Z.attr("d","M"+-n+","+O[0]+"H0V"+O[1]+"H"+-n);break;case "right":R=k,aa.attr("x2",L),B.attr("x",v),ba.attr("x2",L).attr("y2",0),D.attr("x",v).attr("y",0),H.style("text-anchor","start"),z.attr("x",v).attr("dy",J),Z.attr("d","M"+n+","+O[0]+"H0V"+O[1]+"H"+n)}if(A.rangeBand)var M=A,U=M.rangeBand()/2,S=A=function(a){return M(a)+U};else S.rangeBand?S=A:W.call(R,A);I.call(R,S);X.call(R,A)})}var r=a.scale.linear(),w="bottom",L=c.config.innerTickSize*
c.config.completeScale,n,q=3*c.config.completeScale,t=null,v,J,T=0,S=!0,K;b=b||{};b.$$=c;n=b.withOuterTick?3*c.config.completeScale:0;p.scale=function(a){if(!arguments.length)return r;r=a;return p};p.orient=function(a){if(!arguments.length)return w;w=a in{top:1,right:1,bottom:1,left:1}?a+"":"bottom";return p};p.tickFormat=function(a){if(!arguments.length)return v;v=a;return p};p.tickCentered=function(a){if(!arguments.length)return K;K=a;return p};p.tickOffset=function(){return T};p.tickInterval=function(){var a;
b.isCategory?a=2*T:(a=p.g.select("path.domain").node().getTotalLength()-2*n,a/=p.g.selectAll("line").size());return Infinity===a?0:a};p.ticks=function(){if(!arguments.length)return J;J=arguments;return p};p.tickCulling=function(a){if(!arguments.length)return S;S=a;return p};p.tickValues=function(a){if("function"===typeof a)t=function(){return a(r.domain())};else{if(!arguments.length)return t;t=a}return p};return p}var G={version:"0.4.11-rc4"},n,d;G.generate=function(a){return new Y(a)};G.chart={fn:Y.prototype,
internal:{fn:ca.prototype,axis:{fn:q.prototype}}};n=G.chart.fn;d=G.chart.internal.fn;d.beforeInit=function(){};d.afterInit=function(){};d.init=function(){var a=this.config;this.initParams();if(a.data_url)this.convertUrlToData(a.data_url,a.data_mimeType,a.data_keys,this.initWithData);else if(a.data_json)this.initWithData(this.convertJsonToData(a.data_json,a.data_keys));else if(a.data_rows)this.initWithData(this.convertRowsToData(a.data_rows));else if(a.data_columns)this.initWithData(this.convertColumnsToData(a.data_columns));
else throw Error("url or json or rows or columns is required.");};d.initParams=function(){var a=this.d3,b=this.config;this.clipId="c3-"+ +new Date+"-clip";this.clipIdForXAxis=this.clipId+"-xaxis";this.clipIdForYAxis=this.clipId+"-yaxis";this.clipIdForGrid=this.clipId+"-grid";this.clipIdForSubchart=this.clipId+"-subchart";this.clipPath=this.getClipPath(this.clipId);this.clipPathForYAxis=this.clipPathForXAxis="";this.clipPathForGrid=this.getClipPath(this.clipIdForGrid);this.clipPathForSubchart=this.getClipPath(this.clipIdForSubchart);
this.dragStart=null;this.transiting=this.mouseover=this.cancelClick=this.flowing=this.dragging=!1;this.color=this.generateColor();this.levelColor=this.generateLevelColor();this.dataTimeFormat=b.data_xLocaltime?a.time.format:a.time.format.utc;this.axisTimeFormat=b.axis_x_localtime?a.time.format:a.time.format.utc;this.defaultAxisTimeFormat=this.axisTimeFormat.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],
["%I %p",function(a){return a.getHours()}],["%-m/%-d",function(a){return a.getDay()&&1!==a.getDate()}],["%-m/%-d",function(a){return 1!==a.getDate()}],["%-m/%-d",function(a){return a.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]);this.hiddenTargetIds=[];this.hiddenLegendIds=[];this.focusedTargetIds=[];this.defocusedTargetIds=[];this.xOrient=b.axis_rotated?"left":"bottom";this.yOrient=b.axis_rotated?b.axis_y_inner?"top":"bottom":b.axis_y_inner?"right":"left";this.y2Orient=b.axis_rotated?b.axis_y2_inner?
"bottom":"top":b.axis_y2_inner?"left":"right";this.subXOrient=b.axis_rotated?"left":"bottom";this.isLegendRight="right"===b.legend_position;this.isLegendInset="inset"===b.legend_position;this.isLegendTop="top-left"===b.legend_inset_anchor||"top-right"===b.legend_inset_anchor;this.isLegendLeft="top-left"===b.legend_inset_anchor||"bottom-left"===b.legend_inset_anchor;this.legendItemHeight=this.legendItemWidth=this.legendStep=0;this.currentMaxTickWidths={x:0,y:0,y2:0};this.rotated_padding_left=30;this.rotated_padding_right=
b.axis_rotated&&!b.axis_x_show?0:30;this.rotated_padding_top=5;this.withoutFadeIn={};this.intervalForObserveInserted=void 0;this.axes.subx=a.selectAll([])};d.initChartElements=function(){this.initBar&&this.initBar();this.initLine&&this.initLine();this.initArc&&this.initArc();this.initGauge&&this.initGauge();this.initText&&this.initText()};d.initWithData=function(a){var b=this,c=b.d3,f=b.config,k=!0;b.axis=new q(b);b.initPie&&b.initPie();b.initBrush&&b.initBrush();b.initZoom&&b.initZoom();b.selectChart=
f.bindto?"function"===typeof f.bindto.node?f.bindto:c.select(f.bindto):c.selectAll([]);b.selectChart.empty()&&(b.selectChart=c.select(document.createElement("div")).style("opacity",0),b.observeInserted(b.selectChart),k=!1);b.selectChart.html("").classed("c3",!0);b.data.xs={};b.data.targets=b.convertDataToTargets(a);f.data_filter&&(b.data.targets=b.data.targets.filter(f.data_filter));f.data_hide&&b.addHiddenTargetIds(!0===f.data_hide?b.mapToIds(b.data.targets):f.data_hide);f.legend_hide&&b.addHiddenLegendIds(!0===
f.legend_hide?b.mapToIds(b.data.targets):f.legend_hide);b.hasType("gauge")&&(f.legend_show=!1);b.updateSizes();b.updateScales();var h=b.getXDomain(b.data.targets),d=b.getYDomain(b.data.targets,"y");n.xd=function(){return h};n.yd=function(){return d};n.pl=function(){return b.margin.left};n.pb=function(){return b.margin.bottom};b.x.domain(c.extent(h));b.y.domain(d);b.y2.domain(b.getYDomain(b.data.targets,"y2"));b.subX.domain(b.x.domain());b.subY.domain(b.y.domain());b.subY2.domain(b.y2.domain());b.orgXDomain=
b.x.domain();b.brush&&b.brush.scale(b.subX);f.zoom_enabled&&b.zoom.scale(b.x);b.svg=b.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return f.onmouseover.call(b)}).on("mouseleave",function(){return f.onmouseout.call(b)});b.config.svg_classname&&b.svg.attr("class",b.config.svg_classname);f.point_r*=f.completeScale;b.svg[0][0].style.strokeWidth=f.completeScale;a=b.svg.append("defs");b.clipChart=b.appendClip(a,b.clipId);b.clipXAxis=b.appendClip(a,b.clipIdForXAxis);b.clipYAxis=
b.appendClip(a,b.clipIdForYAxis);b.clipGrid=b.appendClip(a,b.clipIdForGrid);b.clipSubchart=b.appendClip(a,b.clipIdForSubchart);b.updateSvgSize();a=b.main=b.svg.append("g").attr("transform",b.getTranslate("main"));b.initSubchart&&b.initSubchart();b.initTooltip&&b.initTooltip();b.initLegend&&b.initLegend();b.initTitle&&b.initTitle();a.append("text").attr("class",e.text+" "+e.empty).attr("text-anchor","middle").attr("dominant-baseline","middle");b.initRegion();b.initGrid();a.append("g").attr("clip-path",
b.clipPath).attr("class",e.chart);f.grid_lines_front&&b.initGridLines();b.initEventRect();b.initChartElements();a.insert("rect",f.zoom_privileged?null:"g."+e.regions).attr("class",e.zoomRect).attr("width",b.width).attr("height",b.height).style("opacity",0).on("dblclick.zoom",null);f.axis_x_extent&&b.brush.extent(b.getDefaultExtent());b.axis.init();b.updateTargets(b.data.targets);k&&(b.updateDimension(),b.config.oninit.call(b),b.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,
withTransitionForAxis:!1}));b.bindResize();b.api.element=b.selectChart.node()};d.smoothLines=function(a,b){var c=this;"grid"===b&&a.each(function(){var a=c.d3.select(this),b=a.attr("x1"),h=a.attr("x2"),d=a.attr("y1"),e=a.attr("y2");a.attr({x1:Math.ceil(b),x2:Math.ceil(h),y1:Math.ceil(d),y2:Math.ceil(e)})})};d.updateSizes=function(){var a=this.config,b=this.legend?this.getLegendHeight():0,c=this.legend?this.getLegendWidth():0,f=this.isLegendRight||this.isLegendInset?0:b,k=this.hasArcType(),h=a.axis_rotated||
k?0:this.getHorizontalAxisHeight("x"),d=a.subchart_show&&!k?a.subchart_size_height+h:0;this.currentWidth=this.getCurrentWidth();this.currentHeight=this.getCurrentHeight();this.margin=a.axis_rotated?{top:this.getHorizontalAxisHeight("y2")+this.getCurrentPaddingTop(),right:k?0:this.getCurrentPaddingRight(),bottom:this.getHorizontalAxisHeight("y")+f+this.getCurrentPaddingBottom(),left:d+(k?0:this.getCurrentPaddingLeft())}:{top:4*a.completeScale+this.getCurrentPaddingTop(),right:k?0:this.getCurrentPaddingRight(),
bottom:h+d+f+this.getCurrentPaddingBottom(),left:k?0:this.getCurrentPaddingLeft()};this.margin2=a.axis_rotated?{top:this.margin.top,right:NaN,bottom:20*a.completeScale+f,left:this.rotated_padding_left}:{top:this.currentHeight-d-f,right:NaN,bottom:h+f,left:this.margin.left};this.margin3={top:0,right:NaN,bottom:0,left:0};this.updateSizeForLegend&&this.updateSizeForLegend(b,c);this.width=this.currentWidth-this.margin.left-this.margin.right;this.height=this.currentHeight-this.margin.top-this.margin.bottom;
0>=this.width&&(this.width=1);0>=this.height&&(this.height=1);this.width2=a.axis_rotated?this.margin.left-this.rotated_padding_left-this.rotated_padding_right:this.width;this.height2=a.axis_rotated?this.height:this.currentHeight-this.margin2.top-this.margin2.bottom;0>this.width2&&(this.width2=0);0>this.height2&&(this.height2=0);this.arcWidth=this.width-(this.isLegendRight?c+10:0);this.arcHeight=this.height-(this.isLegendRight?0:10);this.hasType("gauge")&&(this.arcHeight+=this.height-this.getGaugeLabelHeight());
this.updateRadius&&this.updateRadius();this.isLegendRight&&k&&(this.margin3.left=this.arcWidth/2+1.1*this.radiusExpanded)};d.updateTargets=function(a){this.updateTargetsForText(a);this.updateTargetsForBar(a);this.updateTargetsForLine(a);this.hasArcType()&&this.updateTargetsForArc&&this.updateTargetsForArc(a);this.updateTargetsForSubchart&&this.updateTargetsForSubchart(a);this.showTargets()};d.showTargets=function(){var a=this;a.svg.selectAll("."+e.target).filter(function(b){return a.isTargetToShow(b.id)}).transition().duration(a.config.transition_duration).style("opacity",
1)};d.redraw=function(a,b){var c=this,f=c.main,k=c.d3,d=c.config,g=c.getShapeIndices(c.isAreaType),l=c.getShapeIndices(c.isBarType),m=c.getShapeIndices(c.isLineType),x,p,r,w,L,n,q,t,v,J,u,S,K,F=c.hasArcType(),C,z,B,D,N,A,Q,H,I=c.filterTargetsToShow(c.data.targets),W,X,R,G=c.xv.bind(c),E,O;a=a||{};x=y(a,"withY",!0);p=y(a,"withSubchart",!0);r=y(a,"withTransition",!0);n=y(a,"withTransform",!1);q=y(a,"withUpdateXDomain",!1);t=y(a,"withUpdateOrgXDomain",!1);v=y(a,"withTrimXDomain",!0);K=y(a,"withUpdateXAxis",
q);J=y(a,"withLegend",!1);u=y(a,"withEventRect",!0);S=y(a,"withDimension",!0);w=y(a,"withTransitionForExit",r);L=y(a,"withTransitionForAxis",r);A=r?d.transition_duration:0;w=w?A:0;b=b||c.axis.generateTransitions(L?A:0);J&&d.legend_show?c.updateLegend(c.mapToIds(c.data.targets),a,b):S&&c.updateDimension(!0);c.isCategorized()&&0===I.length&&c.x.domain([0,c.axes.x.selectAll(".tick").size()]);I.length?(c.updateXDomain(I,q,t,v),d.axis_x_tick_values||(W=c.axis.updateXAxisTickValues(I))):(c.xAxis.tickValues([]),
c.subXAxis.tickValues([]));d.zoom_rescale&&!a.flow&&(R=c.x.orgDomain());c.y.domain(c.getYDomain(I,"y",R));c.y2.domain(c.getYDomain(I,"y2",R));!d.axis_y_tick_values&&d.axis_y_tick_count&&c.yAxis.tickValues(c.axis.generateTickValues(c.y.domain(),d.axis_y_tick_count));!d.axis_y2_tick_values&&d.axis_y2_tick_count&&c.y2Axis.tickValues(c.axis.generateTickValues(c.y2.domain(),d.axis_y2_tick_count));c.axis.redraw(b,F);c.axis.updateLabels(r);if((q||K)&&I.length)if(d.axis_x_tick_culling&&W){for(r=1;r<W.length;r++)if(W.length/
r<d.axis_x_tick_culling_max){X=r;break}c.svg.selectAll("."+e.axisX+" .tick text").each(function(a){a=W.indexOf(a);0<=a&&k.select(this).style("display",a%X?"none":"block")})}else c.svg.selectAll("."+e.axisX+" .tick text").style("display","block");C=c.generateDrawArea?c.generateDrawArea(g,!1):void 0;z=c.generateDrawBar?c.generateDrawBar(l):void 0;B=c.generateDrawLine?c.generateDrawLine(m,!1):void 0;D=c.generateXYForText(g,l,m,!0);N=c.generateXYForText(g,l,m,!1);x&&(c.subY.domain(c.getYDomain(I,"y")),
c.subY2.domain(c.getYDomain(I,"y2")));c.updateXgridFocus();f.select("text."+e.text+"."+e.empty).attr("x",c.width/2).attr("y",c.height/2).text(d.data_empty_label_text).transition().style("opacity",I.length?0:1);c.updateGrid(A);c.updateRegion(A);c.updateBar(w);c.updateLine(w);c.updateArea(w);c.updateCircle();c.hasDataLabel()&&c.updateText(w);c.redrawTitle&&c.redrawTitle();c.redrawArc&&c.redrawArc(A,w,n);c.redrawSubchart&&c.redrawSubchart(p,b,A,w,g,l,m);f.selectAll("."+e.selectedCircles).filter(c.isBarType.bind(c)).selectAll("circle").remove();
d.interaction_enabled&&!a.flow&&u&&(c.redrawEventRect(),c.updateZoom&&c.updateZoom());c.updateCircleY();E=(c.config.axis_rotated?c.circleY:c.circleX).bind(c);O=(c.config.axis_rotated?c.circleX:c.circleY).bind(c);a.flow&&(H=c.generateFlow({targets:I,flow:a.flow,duration:a.flow.duration,drawBar:z,drawLine:B,drawArea:C,cx:E,cy:O,xv:G,xForText:D,yForText:N}));(A||H)&&c.isTabVisible()?k.transition().duration(A).each(function(){var b=[];[c.redrawBar(z,!0),c.redrawLine(B,!0),c.redrawArea(C,!0),c.redrawCircle(E,
O,!0),c.redrawText(D,N,a.flow,!0),c.redrawRegion(!0),c.redrawGrid(!0)].forEach(function(a){a.forEach(function(a){b.push(a)})});Q=c.generateWait();b.forEach(function(a){Q.add(a)})}).call(Q,function(){H&&H();d.onrendered&&d.onrendered.call(c)}):(c.redrawBar(z),c.redrawLine(B),c.redrawArea(C),c.redrawCircle(E,O),c.redrawText(D,N,a.flow),c.redrawRegion(),c.redrawGrid(),d.onrendered&&d.onrendered.call(c));c.mapToIds(c.data.targets).forEach(function(a){c.withoutFadeIn[a]=!0})};d.updateAndRedraw=function(a){var b=
this.config,c;a=a||{};a.withTransition=y(a,"withTransition",!0);a.withTransform=y(a,"withTransform",!1);a.withLegend=y(a,"withLegend",!1);a.withUpdateXDomain=!0;a.withUpdateOrgXDomain=!0;a.withTransitionForExit=!1;a.withTransitionForTransform=y(a,"withTransitionForTransform",a.withTransition);this.updateSizes();a.withLegend&&b.legend_show||(c=this.axis.generateTransitions(a.withTransitionForAxis?b.transition_duration:0),this.updateScales(),this.updateSvgSize(),this.transformAll(a.withTransitionForTransform,
c));this.redraw(a,c)};d.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})};d.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type};d.isCategorized=function(){return 0<=this.config.axis_x_type.indexOf("categor")};d.isCustomX=function(){var a=this.config;return!this.isTimeSeries()&&(a.data_x||D(a.data_xs))};d.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type};d.getTranslate=function(a){var b=this.config,
c,f;"main"===a?(c=M(this.margin.left),f=M(this.margin.top)):"context"===a?(c=M(this.margin2.left),f=M(this.margin2.top)):"legend"===a?(c=this.margin3.left,f=this.margin3.top):"x"===a?(c=0,f=b.axis_rotated?0:this.height):"y"===a?(c=0,f=b.axis_rotated?this.height:0):"y2"===a?(c=b.axis_rotated?0:this.width,f=b.axis_rotated?1:0):"subx"===a?(c=0,f=b.axis_rotated?0:this.height2):"arc"===a&&(c=this.arcWidth/2,f=this.arcHeight/2);return"translate("+c+","+f+")"};d.initialOpacity=function(a){return null!==
a.value&&this.withoutFadeIn[a.id]?1:0};d.initialOpacityForCircle=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?this.opacityForCircle(a):0};d.opacityForCircle=function(a){var b=this.config.point_show?1:0;return t(a.value)?this.isScatterType(a)?.5:b:0};d.opacityForText=function(){return this.hasDataLabel()?1:0};d.xx=function(a){return a?this.x(a.x):null};d.xv=function(a){var b=a.value;this.isTimeSeries()?b=this.parseDate(a.value):this.isCategorized()&&"string"===typeof a.value&&(b=this.config.axis_x_categories.indexOf(a.value));
return Math.ceil(this.x(b))};d.yv=function(a){return Math.ceil((a.axis&&"y2"===a.axis?this.y2:this.y)(a.value))};d.subxx=function(a){return a?this.subX(a.x):null};d.transformMain=function(a,b){var c,f,k;b&&b.axisX?c=b.axisX:(c=this.main.select("."+e.axisX),a&&(c=c.transition()));b&&b.axisY?f=b.axisY:(f=this.main.select("."+e.axisY),a&&(f=f.transition()));b&&b.axisY2?k=b.axisY2:(k=this.main.select("."+e.axisY2),a&&(k=k.transition()));(a?this.main.transition():this.main).attr("transform",this.getTranslate("main"));
c.attr("transform",this.getTranslate("x"));f.attr("transform",this.getTranslate("y"));k.attr("transform",this.getTranslate("y2"));this.main.select("."+e.chartArcs).attr("transform",this.getTranslate("arc"))};d.transformAll=function(a,b){this.transformMain(a,b);this.config.subchart_show&&this.transformContext(a,b);this.legend&&this.transformLegend(a)};d.updateSvgSize=function(){var a=this.svg.select(".c3-brush .background");this.svg.attr("width",this.currentWidth).attr("height",this.currentHeight);
this.svg.selectAll(["#"+this.clipId,"#"+this.clipIdForGrid]).select("rect").attr("width",this.width).attr("height",this.height);this.svg.select("#"+this.clipIdForXAxis).select("rect").attr("x",this.getXAxisClipX.bind(this)).attr("y",this.getXAxisClipY.bind(this)).attr("width",this.getXAxisClipWidth.bind(this)).attr("height",this.getXAxisClipHeight.bind(this));this.svg.select("#"+this.clipIdForYAxis).select("rect").attr("x",this.getYAxisClipX.bind(this)).attr("y",this.getYAxisClipY.bind(this)).attr("width",
this.getYAxisClipWidth.bind(this)).attr("height",this.getYAxisClipHeight.bind(this));this.svg.select("#"+this.clipIdForSubchart).select("rect").attr("width",this.width).attr("height",a.size()?a.attr("height"):0);this.svg.select("."+e.zoomRect).attr("width",this.width).attr("height",this.height);this.selectChart.style("max-height",this.currentHeight+"px")};d.updateDimension=function(a){a||(this.config.axis_rotated?(this.axes.x.call(this.xAxis),this.axes.subx.call(this.subXAxis)):(this.axes.y.call(this.yAxis),
this.axes.y2.call(this.y2Axis)));this.updateSizes();this.updateScales();this.updateSvgSize();this.transformAll(!1)};d.observeInserted=function(a){var b=this,c;"undefined"===typeof MutationObserver?u.console.error("MutationObserver not defined."):(c=new MutationObserver(function(f){f.forEach(function(f){"childList"===f.type&&f.previousSibling&&(c.disconnect(),b.intervalForObserveInserted=u.setInterval(function(){a.node().parentNode&&(u.clearInterval(b.intervalForObserveInserted),b.updateDimension(),
b.brush&&b.brush.update(),b.config.oninit.call(b),b.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),a.transition().style("opacity",1))},10))})}),c.observe(a.node(),{attributes:!0,childList:!0,characterData:!0}))};d.bindResize=function(){var a=this,b=a.config;a.resizeFunction=a.generateResize();a.resizeFunction.add(function(){b.onresize.call(a)});b.resize_auto&&a.resizeFunction.add(function(){void 0!==a.resizeTimeout&&
u.clearTimeout(a.resizeTimeout);a.resizeTimeout=u.setTimeout(function(){delete a.resizeTimeout;a.api.flush()},100)});a.resizeFunction.add(function(){b.onresized.call(a)});if(u.attachEvent)u.attachEvent("onresize",a.resizeFunction);else if(u.addEventListener)u.addEventListener("resize",a.resizeFunction,!1);else{var c=u.onresize;c?c.add&&c.remove||(c=a.generateResize(),c.add(u.onresize)):c=a.generateResize();c.add(a.resizeFunction);u.onresize=c}};d.generateResize=function(){function a(){b.forEach(function(a){a()})}
var b=[];a.add=function(a){b.push(a)};a.remove=function(a){for(var f=0;f<b.length;f++)if(b[f]===a){b.splice(f,1);break}};return a};d.endall=function(a,b){var c=0;a.each(function(){++c}).each("end",function(){--c||b.apply(this,arguments)})};d.generateWait=function(){var a=[],b=function(b,f){var k=setInterval(function(){var b=0;a.forEach(function(a){if(a.empty())b+=1;else try{a.transition()}catch(c){b+=1}});b===a.length&&(clearInterval(k),f&&f())},10)};b.add=function(b){a.push(b)};return b};d.parseDate=
function(a){var b;a instanceof Date?b=a:"string"===typeof a?b=this.dataTimeFormat(this.config.data_xFormat).parse(a):"number"!==typeof a||isNaN(a)||(b=new Date(+a));if(!b||isNaN(+b))(b=new Date(a.split("-").join("/")))&&!isNaN(+b)||u.console.error("Failed to parse x '"+a+"' to Date object");return b};d.isTabVisible=function(){var a;"undefined"!==typeof document.hidden?a="hidden":"undefined"!==typeof document.mozHidden?a="mozHidden":"undefined"!==typeof document.msHidden?a="msHidden":"undefined"!==
typeof document.webkitHidden&&(a="webkitHidden");return document[a]?!1:!0};d.getDefaultConfig=function(){var a={bindto:"#chart",svg_classname:void 0,completeScale:1,noxticks:!1,noyticks:!1,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!1,innerTickSize:3,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,
zoom_x_max:void 0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:0,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(a){return a},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,
data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,
subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,
axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!1,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,
axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,
grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_expand:{},pie_expand_duration:50,gauge_label_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,
gauge_units:void 0,gauge_width:void 0,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(a,c,f,k){return this.getTooltipContent?this.getTooltipContent(a,
c,f,k):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};Object.keys(this.additionalConfig).forEach(function(b){a[b]=this.additionalConfig[b]},this);return a};d.additionalConfig={};d.loadConfig=function(a){function b(){var a=k.shift();return a&&f&&"object"===typeof f&&a in f?(f=f[a],b()):a?void 0:f}var c=this.config,
f,k,d;Object.keys(c).forEach(function(g){f=a;k=g.split("_");d=b();C(d)&&(c[g]=d)})};d.getScale=function(a,b,c){return(c?this.d3.time.scale():this.d3.scale.linear()).range([a,b])};d.getX=function(a,b,c,f){var k=this.getScale(a,b,this.isTimeSeries()),d=c?k.domain(c):k,g;this.isCategorized()?(f=f||function(){return 0},k=function(a,b){var c=d(a)+f(a);return b?c:Math.ceil(c)}):k=function(a,b){var c=d(a);return b?c:Math.ceil(c)};for(g in d)k[g]=d[g];k.orgDomain=function(){return d.domain()};this.isCategorized()&&
(k.domain=function(a){if(!arguments.length)return a=this.orgDomain(),[a[0],a[1]+1];d.domain(a);return k});return k};d.getY=function(a,b,c){a=this.getScale(a,b,this.isTimeSeriesY());c&&a.domain(c);return a};d.getYScale=function(a){return"y2"===this.axis.getId(a)?this.y2:this.y};d.getSubYScale=function(a){return"y2"===this.axis.getId(a)?this.subY2:this.subY};d.updateScales=function(){var a=this,b=a.config,c=!a.x;a.xMin=b.axis_rotated?1:0;a.xMax=b.axis_rotated?a.height:a.width;a.yMin=b.axis_rotated?
0:a.height;a.yMax=b.axis_rotated?a.width:1;a.subXMin=a.xMin;a.subXMax=a.xMax;a.subYMin=b.axis_rotated?0:a.height2;a.subYMax=b.axis_rotated?a.width2:1;a.x=a.getX(a.xMin,a.xMax,c?void 0:a.x.orgDomain(),function(){return a.xAxis.tickOffset()});a.y=a.getY(a.yMin,a.yMax,c?b.axis_y_default:a.y.domain());a.y2=a.getY(a.yMin,a.yMax,c?b.axis_y2_default:a.y2.domain());a.subX=a.getX(a.xMin,a.xMax,a.orgXDomain,function(b){return b%1?0:a.subXAxis.tickOffset()});a.subY=a.getY(a.subYMin,a.subYMax,c?b.axis_y_default:
a.subY.domain());a.subY2=a.getY(a.subYMin,a.subYMax,c?b.axis_y2_default:a.subY2.domain());a.xAxisTickFormat=a.axis.getXAxisTickFormat();a.xAxisTickValues=a.axis.getXAxisTickValues();a.yAxisTickValues=a.axis.getYAxisTickValues();a.y2AxisTickValues=a.axis.getY2AxisTickValues();a.xAxis=a.axis.getXAxis(a.x,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer);a.subXAxis=a.axis.getXAxis(a.subX,a.subXOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer);a.yAxis=a.axis.getYAxis(a.y,
a.yOrient,b.axis_y_tick_format,a.yAxisTickValues,b.axis_y_tick_outer);a.y2Axis=a.axis.getYAxis(a.y2,a.y2Orient,b.axis_y2_tick_format,a.y2AxisTickValues,b.axis_y2_tick_outer);c||(a.brush&&a.brush.scale(a.subX),b.zoom_enabled&&a.zoom.scale(a.x));a.updateArc&&a.updateArc()};d.getYDomainMin=function(a){var b=this,c=b.config,f=b.mapToIds(a),k=b.getValuesAsIdKeyed(a),d,g,e,m,x;if(0<c.data_groups.length)for(x=b.hasNegativeValueInTargets(a),a=0;a<c.data_groups.length;a++)if(e=c.data_groups[a].filter(function(a){return 0<=
f.indexOf(a)}),0!==e.length)for(g=e[0],x&&k[g]&&k[g].forEach(function(a,b){k[g][b]=0>a?a:0}),d=1;d<e.length;d++)m=e[d],k[m]&&k[m].forEach(function(a,c){b.axis.getId(m)!==b.axis.getId(g)||!k[g]||x&&0<+a||(k[g][c]+=+a)});return b.d3.min(Object.keys(k).map(function(a){return b.d3.min(k[a])}))};d.getYDomainMax=function(a){var b=this,c=b.config,f=b.mapToIds(a),k=b.getValuesAsIdKeyed(a),d,g,e,m,x;if(0<c.data_groups.length)for(x=b.hasPositiveValueInTargets(a),a=0;a<c.data_groups.length;a++)if(e=c.data_groups[a].filter(function(a){return 0<=
f.indexOf(a)}),0!==e.length)for(g=e[0],x&&k[g]&&k[g].forEach(function(a,b){k[g][b]=0<a?a:0}),d=1;d<e.length;d++)m=e[d],k[m]&&k[m].forEach(function(a,c){b.axis.getId(m)!==b.axis.getId(g)||!k[g]||x&&0>+a||(k[g][c]+=+a)});return b.d3.max(Object.keys(k).map(function(a){return b.d3.max(k[a])}))};d.getYDomain=function(a,b,c){var f=this,k=f.config;a=a.filter(function(a){return f.axis.getId(a.id)===b});var d=c?f.filterByXDomain(a,c):a,g="y2"===b?k.axis_y2_min:k.axis_y_min,e="y2"===b?k.axis_y2_max:k.axis_y_max,
m=f.getYDomainMin(d);a=f.getYDomainMax(d);var x,p="y2"===b?k.axis_y2_center:k.axis_y_center,r,w,L=f.hasType("bar",d)&&k.bar_zerobased||f.hasType("area",d)&&k.area_zerobased;c="y2"===b?k.axis_y2_inverted:k.axis_y_inverted;r=f.hasDataLabel()&&k.axis_rotated;var n=f.hasDataLabel()&&!k.axis_rotated,m=t(g)?g:t(e)?m<e?m:e-10:m;a=t(e)?e:t(g)?g<a?a:g+10:a;if(0===d.length)return"y2"===b?f.y2.domain():f.y.domain();isNaN(m)&&(m=0);isNaN(a)&&(a=m);m===a&&(0>m?a=0:m=0);d=0<=m&&0<=a;w=0>=m&&0>=a;if(t(g)&&d||t(e)&&
w)L=!1;L&&(d&&(m=0),w&&(a=0));g=Math.abs(a-m);e=x=.03*g;x=0;"undefined"!==typeof p&&(m=Math.max(Math.abs(m),Math.abs(a)),a=p+m,m=p-m);r?(p=f.getDataLabelLength(m,a,"width"),r=P(f.y.range()),p=[p[0]/r,p[1]/r],e+=p[1]/(1-p[0]-p[1])*g,x+=p[0]/(1-p[0]-p[1])*g):n&&(p=f.getDataLabelLength(m,a,"height"),e+=f.axis.convertPixelsToAxisPadding(p[1],g),x+=f.axis.convertPixelsToAxisPadding(p[0],g));"y"===b&&D(k.axis_y_padding)&&(e=f.axis.getPadding(k.axis_y_padding,"top",e,g),x=f.axis.getPadding(k.axis_y_padding,
"bottom",x,g));"y2"===b&&D(k.axis_y2_padding)&&(e=f.axis.getPadding(k.axis_y2_padding,"top",e,g),x=f.axis.getPadding(k.axis_y2_padding,"bottom",x,g));L&&(d&&(x=m),w&&(e=-a));k=[m-x,a+e];return c?k.reverse():k};d.getXDomainMin=function(a){var b=this,c=b.config;return C(c.axis_x_min)?b.isTimeSeries()?this.parseDate(c.axis_x_min):c.axis_x_min:b.d3.min(a,function(a){return b.d3.min(a.values,function(a){return a.x})})};d.getXDomainMax=function(a){var b=this,c=b.config;return C(c.axis_x_max)?b.isTimeSeries()?
this.parseDate(c.axis_x_max):c.axis_x_max:b.d3.max(a,function(a){return b.d3.max(a.values,function(a){return a.x})})};d.getXDomainPadding=function(a){var b=this.config;a=a[1]-a[0];var c,f;this.isCategorized()?f=0:this.hasType("bar")?(c=this.getMaxDataCount(),f=1<c?a/(c-1)/2:.5):f=.06*a;"object"===typeof b.axis_x_padding&&D(b.axis_x_padding)?(c=t(b.axis_x_padding.left)?b.axis_x_padding.left:f,b=t(b.axis_x_padding.right)?b.axis_x_padding.right:f):"number"===typeof b.axis_x_padding?c=b=b.axis_x_padding:
(c=b=f,this.hasType("bar")?b+=.03*a:c=1E-8);return{left:c,right:b}};d.getXDomain=function(a){var b=[this.getXDomainMin(a),this.getXDomainMax(a)];a=b[0];var c=b[1],b=this.getXDomainPadding(b),f=0,k=0;0!==a-c||this.isCategorized()||(this.isTimeSeries()?(a=new Date(.5*a.getTime()),c=new Date(1.5*c.getTime())):(a=0===a?1:.5*a,c=0===c?-1:1.5*c));if(a||0===a)f=this.isTimeSeries()?new Date(a.getTime()-b.left):a-b.left;if(c||0===c)k=this.isTimeSeries()?new Date(c.getTime()+b.right):c+b.right;return[f,k]};
d.updateXDomain=function(a,b,c,f,k){var d=this.config;c&&(this.x.domain(k?k:this.d3.extent(this.getXDomain(a))),this.orgXDomain=this.x.domain(),d.zoom_enabled&&this.zoom.scale(this.x).updateScaleExtent(),this.subX.domain(this.x.domain()),this.brush&&this.brush.scale(this.subX));b&&(this.x.domain(k?k:!this.brush||this.brush.empty()?this.orgXDomain:this.brush.extent()),d.zoom_enabled&&this.zoom.scale(this.x).updateScaleExtent());f&&this.x.domain(this.trimXDomain(this.x.orgDomain()));return this.x.domain()};
d.trimXDomain=function(a){var b=this.getZoomDomain(),c=b[0],b=b[1];a[0]<=c&&(a[1]=+a[1]+(c-a[0]),a[0]=c);b<=a[1]&&(a[0]=+a[0]-(a[1]-b),a[1]=b);return a};d.isX=function(a){var b=this.config;return b.data_x&&a===b.data_x||D(b.data_xs)&&fa(b.data_xs,a)};d.isNotX=function(a){return!this.isX(a)};d.getXKey=function(a){var b=this.config;return b.data_x?b.data_x:D(b.data_xs)?b.data_xs[a]:null};d.getXValuesOfXKey=function(a,b){var c=this,f;(b&&D(b)?c.mapToIds(b):[]).forEach(function(b){c.getXKey(b)===a&&(f=
c.data.xs[b])});return f};d.getIndexByX=function(a){a=this.filterByX(this.data.targets,a);return a.length?a[0].index:null};d.getXValue=function(a,b){return a in this.data.xs&&this.data.xs[a]&&t(this.data.xs[a][b])?this.data.xs[a][b]:b};d.getOtherTargetXs=function(){var a=Object.keys(this.data.xs);return a.length?this.data.xs[a[0]]:null};d.getOtherTargetX=function(a){var b=this.getOtherTargetXs();return b&&a<b.length?b[a]:null};d.addXs=function(a){var b=this;Object.keys(a).forEach(function(c){b.config.data_xs[c]=
a[c]})};d.hasMultipleX=function(a){return 1<this.d3.set(Object.keys(a).map(function(b){return a[b]})).size()};d.isMultipleX=function(){return D(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")};d.addName=function(a){var b;a&&(b=this.config.data_names[a.id],a.name=void 0!==b?b:a.id);return a};d.getValueOnIndex=function(a,b){var c=a.filter(function(a){return a.index===b});return c.length?c[0]:null};d.updateTargetX=function(a,b){var c=this;a.forEach(function(a){a.values.forEach(function(k,
d){k.x=c.generateTargetX(b[d],a.id,d)});c.data.xs[a.id]=b})};d.updateTargetXs=function(a,b){var c=this;a.forEach(function(a){b[a.id]&&c.updateTargetX([a],b[a.id])})};d.generateTargetX=function(a,b,c){if(this.isTimeSeries())b=a?this.parseDate(a):this.parseDate(this.getXValue(b,c));else if(this.isCustomX()&&!this.isCategorized()){if(b=t(a)?+a:this.getXValue(b,c),isNaN(b))throw alert('Error parsing value for xAxis! Did you forget to specify type: "timeseries" in config.\nValue was: '+a),Error();}else b=
c;return b};d.cloneTarget=function(a){return{id:a.id,id_org:a.id_org,values:a.values.map(function(a){return{x:a.x,value:a.value,id:a.id}})}};d.updateXs=function(){var a=this;a.data.targets.length&&(a.xs=[],a.data.targets[0].values.forEach(function(b){a.xs[b.index]=b.x}))};d.getPrevX=function(a){a=this.xs[a-1];return"undefined"!==typeof a?a:null};d.getNextX=function(a){a=this.xs[a+1];return"undefined"!==typeof a?a:null};d.getMaxDataCount=function(){return this.d3.max(this.data.targets,function(a){return a.values.length})};
d.getMaxDataCountTarget=function(a){var b=a.length,c=0,f;1<b?a.forEach(function(a){a.values.length>c&&(f=a,c=a.values.length)}):f=b?a[0]:null;return f};d.getEdgeX=function(a){return a.length?[this.d3.min(a,function(a){return a.values[0].x}),this.d3.max(a,function(a){return a.values[a.values.length-1].x})]:[0,0]};d.mapToIds=function(a){return a.map(function(a){return a.id})};d.mapToTargetIds=function(a){return a?[].concat(a):this.mapToIds(this.data.targets)};d.hasTarget=function(a,b){var c=this.mapToIds(a),
f;for(f=0;f<c.length;f++)if(c[f]===b)return!0;return!1};d.isTargetToShow=function(a){return 0>this.hiddenTargetIds.indexOf(a)};d.isLegendToShow=function(a){return 0>this.hiddenLegendIds.indexOf(a)};d.filterTargetsToShow=function(a){var b=this;return a.filter(function(a){return b.isTargetToShow(a.id)})};d.mapTargetsToUniqueXs=function(a){a=this.d3.set(this.d3.merge(a.map(function(a){return a.values.map(function(a){return+a.x})}))).values();a=this.isTimeSeries()?a.map(function(a){return new Date(+a)}):
a.map(function(a){return+a});return a.sort(function(a,c){return a<c?-1:a>c?1:a>=c?0:NaN})};d.addHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.concat(a)};d.removeHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(b){return 0>a.indexOf(b)})};d.addHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.concat(a)};d.removeHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(b){return 0>a.indexOf(b)})};
d.getValuesAsIdKeyed=function(a){var b={};a.forEach(function(a){b[a.id]=[];a.values.forEach(function(f){b[a.id].push(f.value)})});return b};d.checkValueInTargets=function(a,b){var c=Object.keys(a),f,k,d;for(f=0;f<c.length;f++)for(d=a[c[f]].values,k=0;k<d.length;k++)if(b(d[k].value))return!0;return!1};d.hasNegativeValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return 0>a})};d.hasPositiveValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return 0<a})};
d.isOrderDesc=function(){var a=this.config;return"string"===typeof a.data_order&&"desc"===a.data_order.toLowerCase()};d.isOrderAsc=function(){var a=this.config;return"string"===typeof a.data_order&&"asc"===a.data_order.toLowerCase()};d.orderTargets=function(a){var b=this.config,c=this.isOrderAsc(),f=this.isOrderDesc();c||f?a.sort(function(a,b){var f=function(a,b){return a+Math.abs(b.value)},d=a.values.reduce(f,0),f=b.values.reduce(f,0);return c?f-d:d-f}):E(b.data_order)&&a.sort(b.data_order);return a};
d.filterByX=function(a,b){return this.d3.merge(a.map(function(a){return a.values})).filter(function(a){return 0===a.x-b})};d.filterRemoveNull=function(a){return a.filter(function(a){return t(a.value)})};d.filterByXDomain=function(a,b){return a.map(function(a){return{id:a.id,id_org:a.id_org,values:a.values.filter(function(a){return b[0]<=a.x&&a.x<=b[1]})}})};d.hasDataLabel=function(){var a=this.config;return"boolean"===typeof a.data_labels&&a.data_labels||"object"===typeof a.data_labels&&D(a.data_labels)?
!0:!1};d.getDataLabelLength=function(a,b,c){var f=this,k=[0,0];f.selectChart.select("svg").selectAll(".dummy").data([a,b]).enter().append("text").text(function(a){return f.dataLabelFormat(a.id)(a)}).each(function(a,b){k[b]=1.3*this.getBoundingClientRect()[c]}).remove();return k};d.isNoneArc=function(a){return this.hasTarget(this.data.targets,a.id)};d.isArc=function(a){return"data"in a&&this.hasTarget(this.data.targets,a.data.id)};d.findSameXOfValues=function(a,b){var c,f=a[b].x,k=[];for(c=b-1;0<=
c&&f===a[c].x;c--)k.push(a[c]);for(c=b;c<a.length&&f===a[c].x;c++)k.push(a[c]);return k};d.findClosestFromTargets=function(a,b){var c=this,f;f=a.map(function(a){return c.findClosest(a.values,b)});return c.findClosest(f,b)};d.findClosest=function(a,b){var c=this,f=c.config.point_sensitivity,k;a.filter(function(a){return a&&c.isBarType(a.id)}).forEach(function(a){var b=c.main.select("."+e.bars+c.getTargetSelectorSuffix(a.id)+" ."+e.bar+"-"+a.index).node();!k&&c.isWithinBar(b)&&(k=a)});a.filter(function(a){return a&&
!c.isBarType(a.id)}).forEach(function(a){var d=c.dist(a,b);d<f&&(f=d,k=a)});return k};d.dist=function(a,b){var c=this.config,f=c.axis_rotated?1:0,c=c.axis_rotated?0:1,k=this.circleY(a,a.index),d=this.x(a.x);return Math.sqrt(Math.pow(d-b[f],2)+Math.pow(k-b[c],2))};d.convertValuesToStep=function(a){var b=[].concat(a),c;if(!this.isCategorized())return a;for(c=a.length+1;0<c;c--)b[c]=b[c-1];b[0]={x:b[0].x-1,value:b[0].value,id:b[0].id};b[a.length+1]={x:b[a.length].x+1,value:b[a.length].value,id:b[a.length].id};
return b};d.updateDataAttributes=function(a,b){var c=this.config["data_"+a];if("undefined"===typeof b)return c;Object.keys(b).forEach(function(a){c[a]=b[a]});this.redraw({withLegend:!0});return c};d.convertUrlToData=function(a,b,c,f){var d=this,h=b?b:"csv";d.d3.xhr(a,function(a,b){var e;if(!b)throw Error(a.responseURL+" "+a.status+" ("+a.statusText+")");e="json"===h?d.convertJsonToData(JSON.parse(b.response),c):"tsv"===h?d.convertTsvToData(b.response):d.convertCsvToData(b.response);f.call(d,e)})};
d.convertXsvToData=function(a,b){var c=b.parseRows(a),f;1===c.length?(f=[{}],c[0].forEach(function(a){f[0][a]=null})):f=b.parse(a);return f};d.convertCsvToData=function(a){return this.convertXsvToData(a,this.d3.csv)};d.convertTsvToData=function(a){return this.convertXsvToData(a,this.d3.tsv)};d.convertJsonToData=function(a,b){var c=[],f,d;b?(b.x?(f=b.value.concat(b.x),this.config.data_x=b.x):f=b.value,c.push(f),a.forEach(function(a){var b=[];f.forEach(function(c){c=z(a[c])?null:a[c];b.push(c)});c.push(b)}),
d=this.convertRowsToData(c)):(Object.keys(a).forEach(function(b){c.push([b].concat(a[b]))}),d=this.convertColumnsToData(c));return d};d.convertRowsToData=function(a){var b=a[0],c={},f=[],d,e;for(d=1;d<a.length;d++){c={};for(e=0;e<a[d].length;e++){if(z(a[d][e]))throw Error("Source data is missing a component at ("+d+","+e+")!");c[b[e]]=a[d][e]}f.push(c)}return f};d.convertColumnsToData=function(a){var b=[],c,f,d;for(c=0;c<a.length;c++)for(d=a[c][0],f=1;f<a[c].length;f++){z(b[f-1])&&(b[f-1]={});if(z(a[c][f]))throw Error("Source data is missing a component at ("+
c+","+f+")!");b[f-1][d]=a[c][f]}return b};d.convertDataToTargets=function(a,b){var c=this,f=c.config,d=c.d3.keys(a[0]).filter(c.isNotX,c),e=c.d3.keys(a[0]).filter(c.isX,c);d.forEach(function(d){var k=c.getXKey(d);c.isCustomX()||c.isTimeSeries()?0<=e.indexOf(k)?c.data.xs[d]=(b&&c.data.xs[d]?c.data.xs[d]:[]).concat(a.map(function(a){return a[k]}).filter(t).map(function(a,b){return c.generateTargetX(a,d,b)})):f.data_x?c.data.xs[d]=c.getOtherTargetXs():D(f.data_xs)&&(c.data.xs[d]=c.getXValuesOfXKey(k,
c.data.targets)):c.data.xs[d]=a.map(function(a,b){return b})});d.forEach(function(a){if(!c.data.xs[a])throw Error('x is not defined for id = "'+a+'".');});d=d.map(function(b,d){var k=f.data_idConverter(b);return{id:k,id_org:b,values:a.map(function(a,e){var h=c.getXKey(b),h=a[h],w=c.generateTargetX(h,b,e),L=null===a[b]||isNaN(a[b])?null:+a[b];c.isCustomX()&&c.isCategorized()&&0===d&&h&&(0===e&&(f.axis_x_categories=[]),f.axis_x_categories.push(h));if(z(a[b])||c.data.xs[b].length<=e)w=void 0;return{x:w,
value:L,id:k}}).filter(function(a){return C(a.x)})}});d.forEach(function(a){var b;f.data_xSort&&(a.values=a.values.sort(function(a,b){return(a.x||0===a.x?a.x:Infinity)-(b.x||0===b.x?b.x:Infinity)}));b=0;a.values.forEach(function(a){a.index=b++});c.data.xs[a.id].sort(function(a,b){return a-b})});c.hasNegativeValue=c.hasNegativeValueInTargets(d);c.hasPositiveValue=c.hasPositiveValueInTargets(d);f.data_type&&c.setTargetType(c.mapToIds(d).filter(function(a){return!(a in f.data_types)}),f.data_type);d.forEach(function(a){c.addCache(a.id_org,
a)});return d};d.load=function(a,b){var c=this;a&&(b.filter&&(a=a.filter(b.filter)),(b.type||b.types)&&a.forEach(function(a){c.setTargetType(a.id,b.types&&b.types[a.id]?b.types[a.id]:b.type)}),c.data.targets.forEach(function(b){for(var c=0;c<a.length;c++)if(b.id===a[c].id){b.values=a[c].values;a.splice(c,1);break}}),c.data.targets=c.data.targets.concat(a));c.updateTargets(c.data.targets);c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0});b.done&&b.done()};d.loadFromArgs=function(a){var b=
this;a.data?b.load(b.convertDataToTargets(a.data),a):a.url?b.convertUrlToData(a.url,a.mimeType,a.keys,function(c){b.load(b.convertDataToTargets(c),a)}):a.json?b.load(b.convertDataToTargets(b.convertJsonToData(a.json,a.keys)),a):a.rows?b.load(b.convertDataToTargets(b.convertRowsToData(a.rows)),a):a.columns?b.load(b.convertDataToTargets(b.convertColumnsToData(a.columns)),a):b.load(null,a)};d.unload=function(a,b){var c=this;b||(b=function(){});(a=a.filter(function(a){return c.hasTarget(c.data.targets,
a)}))&&0!==a.length?(c.svg.selectAll(a.map(function(a){return c.selectorTarget(a)})).transition().style("opacity",0).remove().call(c.endall,b),a.forEach(function(a){c.withoutFadeIn[a]=!1;c.legend&&c.legend.selectAll("."+e.legendItem+c.getTargetSelectorSuffix(a)).remove();c.data.targets=c.data.targets.filter(function(b){return b.id!==a})})):b()};d.categoryName=function(a){var b=this.config;return a<b.axis_x_categories.length?b.axis_x_categories[a]:a};d.initEventRect=function(){this.main.select("."+
e.chart).append("g").attr("class",e.eventRects).style("fill-opacity",0)};d.redrawEventRect=function(){var a=this.config,b;b=this.isMultipleX();a=this.main.select("."+e.eventRects).style("cursor",a.zoom_enabled?a.axis_rotated?"ns-resize":"ew-resize":null).classed(e.eventRectsMultiple,b).classed(e.eventRectsSingle,!b);a.selectAll("."+e.eventRect).remove();this.eventRect=a.selectAll("."+e.eventRect);b?(b=this.eventRect.data([0]),this.generateEventRectsForMultipleXs(b.enter()),this.updateEventRect(b)):
(b=this.getMaxDataCountTarget(this.data.targets),a.datum(b?b.values:[]),this.eventRect=a.selectAll("."+e.eventRect),b=this.eventRect.data(function(a){return a}),this.generateEventRectsForSingleX(b.enter()),this.updateEventRect(b),b.exit().remove())};d.updateEventRect=function(a){var b=this,c=b.config,f,d,e,g,l;a=a||b.eventRect.data(function(a){return a});b.isMultipleX()?(d=f=0,e=b.width,g=b.height):(!b.isCustomX()&&!b.isTimeSeries()||b.isCategorized()?(l=b.getEventRectWidth(),d=function(a){return b.x(a.x)-
l/2}):(b.updateXs(),l=function(a){var f=b.getPrevX(a.index);a=b.getNextX(a.index);if(null===f&&null===a)return c.axis_rotated?b.height:b.width;null===f&&(f=b.x.domain()[0]);null===a&&(a=b.x.domain()[1]);return Math.max(0,(b.x(a)-b.x(f))/2)},d=function(a){var c=b.getPrevX(a.index),f=b.getNextX(a.index);a=b.data.xs[a.id][a.index];if(null===c&&null===f)return 0;null===c&&(c=b.x.domain()[0]);return(b.x(a)+b.x(c))/2}),f=c.axis_rotated?0:d,d=c.axis_rotated?d:0,e=c.axis_rotated?b.width:l,g=c.axis_rotated?
l:b.height);a.attr("class",b.classEvent.bind(b)).attr("x",f).attr("y",d).attr("width",e).attr("height",g)};d.generateEventRectsForSingleX=function(a){var b=this,c=b.d3,f=b.config;a.append("rect").attr("class",b.classEvent.bind(b)).style("cursor",f.data_selection_enabled&&f.data_selection_grouped?"pointer":null).on("mouseover",function(a){a=a.index;b.dragging||b.flowing||b.hasArcType()||(f.point_focus_expand_enabled&&b.expandCircles(a,null,!0),b.expandBars(a,null,!0),b.main.selectAll("."+e.shape+"-"+
a).each(function(a){f.data_onmouseover.call(b.api,a)}))}).on("mouseout",function(a){a=a.index;b.config&&!b.hasArcType()&&(b.hideXGridFocus(),b.hideTooltip(),b.unexpandCircles(),b.unexpandBars(),b.main.selectAll("."+e.shape+"-"+a).each(function(a){f.data_onmouseout.call(b.api,a)}))}).on("mousemove",function(a){var d=a.index,g=b.svg.select("."+e.eventRect+"-"+d);b.dragging||b.flowing||b.hasArcType()||(b.isStepType(a)&&"step-after"===b.config.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,d))&&
--d,a=b.filterTargetsToShow(b.data.targets).map(function(a){return b.addName(b.getValueOnIndex(a.values,d))}),f.tooltip_grouped&&(b.showTooltip(a,this),b.showXGridFocus(a)),(!f.tooltip_grouped||f.data_selection_enabled&&!f.data_selection_grouped)&&b.main.selectAll("."+e.shape+"-"+d).each(function(){c.select(this).classed(e.EXPANDED,!0);f.data_selection_enabled&&g.style("cursor",f.data_selection_grouped?"pointer":null);f.tooltip_grouped||(b.hideXGridFocus(),b.hideTooltip(),f.data_selection_grouped||
(b.unexpandCircles(d),b.unexpandBars(d)))}).filter(function(a){return b.isWithinShape(this,a)}).each(function(a){f.data_selection_enabled&&(f.data_selection_grouped||f.data_selection_isselectable(a))&&g.style("cursor","pointer");f.tooltip_grouped||(b.showTooltip([a],this),b.showXGridFocus([a]),f.point_focus_expand_enabled&&b.expandCircles(d,a.id,!0),b.expandBars(d,a.id,!0))}))}).on("click",function(a){var d=a.index;!b.hasArcType()&&b.toggleShape&&(b.cancelClick?b.cancelClick=!1:(b.isStepType(a)&&
"step-after"===f.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,d))&&--d,b.main.selectAll("."+e.shape+"-"+d).each(function(a){if(f.data_selection_grouped||b.isWithinShape(this,a))b.toggleShape(this,a,d),b.config.data_onclick.call(b.api,a,this)})))}).call(f.data_selection_draggable&&b.drag?c.behavior.drag().origin(Object).on("drag",function(){b.drag(c.mouse(this))}).on("dragstart",function(){b.dragstart(c.mouse(this))}).on("dragend",function(){b.dragend()}):function(){})};d.generateEventRectsForMultipleXs=
function(a){function b(){c.svg.select("."+e.eventRect).style("cursor",null);c.hideXGridFocus();c.hideTooltip();c.unexpandCircles();c.unexpandBars()}var c=this,f=c.d3,d=c.config;a.append("rect").attr("x",0).attr("y",0).attr("width",c.width).attr("height",c.height).attr("class",e.eventRect).on("mouseout",function(){c.config&&(c.hasArcType()||b())}).on("mousemove",function(){var a=c.filterTargetsToShow(c.data.targets),g,l;if(!c.dragging&&!c.hasArcType(a))if(g=f.mouse(this),l=c.findClosestFromTargets(a,
g),!c.mouseover||l&&l.id===c.mouseover.id||(d.data_onmouseout.call(c.api,c.mouseover),c.mouseover=void 0),l){if(a=c.isScatterType(l)||!d.tooltip_grouped?[l]:c.filterByX(a,l.x),a=a.map(function(a){return c.addName(a)}),c.showTooltip(a,this),d.point_focus_expand_enabled&&c.expandCircles(l.index,l.id,!0),c.expandBars(l.index,l.id,!0),c.showXGridFocus(a),c.isBarType(l.id)||c.dist(l,g)<d.point_sensitivity)c.svg.select("."+e.eventRect).style("cursor","pointer"),c.mouseover||(d.data_onmouseover.call(c.api,
l),c.mouseover=l)}else b()}).on("click",function(){var a=c.filterTargetsToShow(c.data.targets),b,l;c.hasArcType(a)||(b=f.mouse(this),(l=c.findClosestFromTargets(a,b))&&(c.isBarType(l.id)||c.dist(l,b)<d.point_sensitivity)&&c.main.selectAll("."+e.shapes+c.getTargetSelectorSuffix(l.id)).selectAll("."+e.shape+"-"+l.index).each(function(){if(d.data_selection_grouped||c.isWithinShape(this,l))c.toggleShape(this,l,l.index),c.config.data_onclick.call(c.api,l,this)}))}).call(d.data_selection_draggable&&c.drag?
f.behavior.drag().origin(Object).on("drag",function(){c.drag(f.mouse(this))}).on("dragstart",function(){c.dragstart(f.mouse(this))}).on("dragend",function(){c.dragend()}):function(){})};d.dispatchEvent=function(a,b,c){b="."+e.eventRect+(this.isMultipleX()?"":"-"+b);b=this.main.select(b).node();var f=b.getBoundingClientRect(),d=f.left+(c?c[0]:0);c=f.top+(c?c[1]:0);f=document.createEvent("MouseEvents");f.initMouseEvent(a,!0,!0,u,0,d,c,d,c,!1,!1,!1,!1,0,null);b.dispatchEvent(f)};d.getCurrentWidth=function(){var a=
this.config;return a.size_width?a.size_width:this.getParentWidth()};d.getCurrentHeight=function(){var a=this.config,a=a.size_height?a.size_height:this.getParentHeight();return 0<a?a:320/(this.hasType("gauge")?2:1)};d.getCurrentPaddingTop=function(){var a=this.config,a=t(a.padding_top)?a.padding_top:0;this.title&&this.title.node()&&(a+=this.getTitlePadding());return a};d.getCurrentPaddingBottom=function(){var a=this.config;return t(a.padding_bottom)?a.padding_bottom:0};d.getCurrentPaddingLeft=function(a){var b=
this.config;return t(b.padding_left)?b.padding_left:b.axis_rotated?b.axis_x_show?Math.max(this.getAxisWidthByAxisId("x",a),40*b.completeScale):1:!b.axis_y_show||b.axis_y_inner?this.axis.getYAxisLabelPosition().isOuter?30*b.completeScale:1*b.completeScale:this.getAxisWidthByAxisId("y",a)};d.getCurrentPaddingRight=function(){var a=this.config,b=10*a.completeScale,c=this.isLegendRight?this.getLegendWidth()+10*a.completeScale:0;return t(a.padding_right)?a.padding_right+1:a.axis_rotated?b+c:!a.axis_y2_show||
a.axis_y2_inner?4*a.completeScale+c+(this.axis.getY2AxisLabelPosition().isOuter?20*a.completeScale:0):this.getAxisWidthByAxisId("y2")+c};d.getParentRectValue=function(a){for(var b=this.selectChart.node(),c;b&&"BODY"!==b.tagName;){try{c=b.getBoundingClientRect()[a]}catch(f){"width"===a&&(c=b.offsetWidth)}if(c)break;b=b.parentNode}return c};d.getParentWidth=function(){return this.getParentRectValue("width")};d.getParentHeight=function(){var a=this.selectChart.style("height");return 0<a.indexOf("px")?
+a.replace("px",""):0};d.getSvgLeft=function(a){var b=this.config,c=b.axis_rotated||!b.axis_rotated&&!b.axis_y_inner,c=(b=this.main.select("."+(b.axis_rotated?e.axisX:e.axisY)).node())&&c?b.getBoundingClientRect():{right:0},b=this.selectChart.node().getBoundingClientRect(),f=this.hasArcType();a=c.right-b.left-(f?0:this.getCurrentPaddingLeft(a));return 0<a?a:0};d.getAxisWidthByAxisId=function(a,b){var c=this.axis.getLabelPositionById(a);return this.config.noyticks?(this.config.innerTickSize+2)*this.config.completeScale:
this.axis.getMaxTickWidth(a,b)+(c.isInner?1:16)*this.config.completeScale+(this.config.innerTickSize+3)*this.config.completeScale};d.getHorizontalAxisHeight=function(a){var b=this.config,c=(b.innerTickSize+1.5)*b.completeScale;if("x"===a&&!b.axis_x_show)return 8*this.config.completeScale;if("x"===a&&b.axis_x_height)return b.axis_x_height;if("y"===a&&!b.axis_y_show)return(!b.legend_show||this.isLegendRight||this.isLegendInset?1:10)*this.config.completeScale;if("y2"===a&&!b.axis_y2_show)return this.rotated_padding_top;
if("x"===a&&!b.axis_rotated&&b.axis_x_tick_rotate)var f=Math.cos(Math.PI*(90-b.axis_x_tick_rotate)/180),c=c+(this.axis.getMaxTickWidth(a)*f+3*b.completeScale*f+13*b.completeScale*Math.abs(1-f));"x"!==a||b.axis_rotated||b.axis_x_tick_rotate||(c+=13*b.completeScale);return b.noxticks?(b.innerTickSize+2)*b.completeScale:c+(this.axis.getLabelPositionById(a).isInner?0:13*this.config.completeScale)+("y2"===a?-10:0)+4*b.completeScale};d.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())};
d.getShapeIndices=function(a){var b=this.config,c={},f=0,d,e;this.filterTargetsToShow(this.data.targets.filter(a,this)).forEach(function(a){for(d=0;d<b.data_groups.length;d++)if(!(0>b.data_groups[d].indexOf(a.id)))for(e=0;e<b.data_groups[d].length;e++)if(b.data_groups[d][e]in c){c[a.id]=c[b.data_groups[d][e]];break}z(c[a.id])&&(c[a.id]=f++)});c.__max__=f-1;return c};d.getShapeX=function(a,b,c,f){var d=f?this.subX:this.x;return function(f){var e=f.id in c?c[f.id]:0;return f.x||0===f.x?d(f.x)-a*(b/
2-e):0}};d.getShapeY=function(a){var b=this;return function(c){return(a?b.getSubYScale(c.id):b.getYScale(c.id))(c.value)}};d.getShapeOffset=function(a,b,c){var f=this,d=f.orderTargets(f.filterTargetsToShow(f.data.targets.filter(a,f))),e=d.map(function(a){return a.id});return function(a,l){var m=c?f.getSubYScale(a.id):f.getYScale(a.id),x=m(0),p=x;d.forEach(function(c){var d=f.isStepType(a)?f.convertValuesToStep(c.values):c.values;if(c.id!==a.id&&b[c.id]===b[a.id]&&e.indexOf(c.id)<e.indexOf(a.id)){if("undefined"===
typeof d[l]||+d[l].x!==+a.x)l=-1,d.forEach(function(b,c){b.x===a.x&&(l=c)});l in d&&0<=d[l].value*a.value&&(p+=m(d[l].value)-x)}});return p}};d.isWithinShape=function(a,b){var c=this.d3.select(a),f;this.isTargetToShow(b.id)?"circle"===a.nodeName?f=this.isStepType(b)?this.isWithinStep(a,this.getYScale(b.id)(b.value)):this.isWithinCircle(a,1.5*this.pointSelectR(b)):"path"===a.nodeName&&(f=c.classed(e.bar)?this.isWithinBar(a):!0):f=!1;return f};d.getInterpolate=function(a){var b=this.isInterpolationType(this.config.spline_interpolation_type)?
this.config.spline_interpolation_type:"cardinal";return this.isSplineType(a)?b:this.isStepType(a)?this.config.line_step_type:"linear"};d.initLine=function(){this.main.select("."+e.chart).append("g").attr("class",e.chartLines)};d.updateTargetsForLine=function(a){var b=this,c=b.config,f,d=b.classChartLine.bind(b),h=b.classLines.bind(b),g=b.classAreas.bind(b),l=b.classCircles.bind(b),m=b.classFocus.bind(b);f=b.main.select("."+e.chartLines).selectAll("."+e.chartLine).data(a).attr("class",function(a){return d(a)+
m(a)}).enter().append("g").attr("class",d).style("opacity",0).style("pointer-events","none");f.append("g").attr("class",h);f.append("g").attr("class",g);f.append("g").attr("class",function(a){return b.generateClass(e.selectedCircles,a.id)});f.append("g").attr("class",l).style("cursor",function(a){return c.data_selection_isselectable(a)?"pointer":null});a.forEach(function(a){b.main.selectAll("."+e.selectedCircles+b.getTargetSelectorSuffix(a.id)).selectAll("."+e.selectedCircle).each(function(b){b.value=
a.values[b.index].value})})};d.updateLine=function(a){var b=this;b.mainLine=b.main.selectAll("."+e.lines).selectAll("."+e.line).data(b.lineData.bind(b));b.mainLine.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",b.color);b.mainLine.style("opacity",b.initialOpacity.bind(b)).style("shape-rendering",function(a){return b.isStepType(a)?"crispEdges":""}).attr("transform",null);b.mainLine.exit().transition().duration(a).style("opacity",0).remove()};d.redrawLine=function(a,b){return[(b?
this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",a).style("stroke",this.color).style("opacity",1)]};d.generateDrawLine=function(a,b){var c=this,f=c.config,d=c.d3.svg.line(),e=c.generateGetLinePoints(a,b),g=b?c.getSubYScale:c.getYScale,l=function(a){return(b?c.subxx:c.xx).call(c,a)},m=function(a,b){return 0<f.data_groups.length?e(a,b)[0][1]:g.call(c,a.id)(a.value)},d=f.axis_rotated?d.x(m).y(l):d.x(l).y(m);f.line_connectNull||(d=d.defined(function(a){return null!=a.value}));
return function(a){var e=f.line_connectNull?c.filterRemoveNull(a.values):a.values,h=b?c.x:c.subX,m=g.call(c,a.id),l=0,n=0;c.isLineType(a)?f.data_regions[a.id]?a=c.lineWithRegions(e,h,m,f.data_regions[a.id]):(c.isStepType(a)&&(e=c.convertValuesToStep(e)),a=d.interpolate(c.getInterpolate(a))(e)):(e[0]&&(l=h(e[0].x),n=m(e[0].value)),a=f.axis_rotated?"M "+n+" "+l:"M "+l+" "+n);return a?a:"M 0 0"}};d.generateGetLinePoints=function(a,b){var c=this,f=c.config,d=c.getShapeX(0,a.__max__+1,a,!!b),e=c.getShapeY(!!b),
g=c.getShapeOffset(c.isLineType,a,!!b),l=b?c.getSubYScale:c.getYScale;return function(a,b){var p=l.call(c,a.id)(0),r=g(a,b)||p,w=d(a),n=e(a);f.axis_rotated&&(0<a.value&&n<p||0>a.value&&p<n)&&(n=p);return[[w,n-(p-r)],[w,n-(p-r)],[w,n-(p-r)],[w,n-(p-r)]]}};d.lineWithRegions=function(a,b,c,f){function d(a,b){var c;for(c=0;c<b.length;c++)if(b[c].start<a&&a<=b[c].end)return!0;return!1}function e(a){return"M"+a[0][0]+" "+a[0][1]+" "+a[1][0]+" "+a[1][1]}var g=this.config,l,m,x="M",p,r,w,n,q=this.isCategorized()?
.5:0,t,u,v=[];if(C(f))for(l=0;l<f.length;l++)v[l]={},z(f[l].start)?v[l].start=a[0].x:v[l].start=this.isTimeSeries()?this.parseDate(f[l].start):f[l].start,z(f[l].end)?v[l].end=a[a.length-1].x:v[l].end=this.isTimeSeries()?this.parseDate(f[l].end):f[l].end;t=g.axis_rotated?function(a){return c(a.value)}:function(a){return b(a.x)};u=g.axis_rotated?function(a){return b(a.x)}:function(a){return c(a.value)};f=this.isTimeSeries()?function(a,f,d,k){var m=a.x.getTime();f=f.x-a.x;a=new Date(m+f*d);m=new Date(m+
f*(d+k));d=g.axis_rotated?[[c(r(d)),b(a)],[c(r(d+k)),b(m)]]:[[b(a),c(r(d))],[b(m),c(r(d+k))]];return e(d)}:function(a,f,d,k){a=g.axis_rotated?[[c(r(d),!0),b(p(d))],[c(r(d+k),!0),b(p(d+k))]]:[[b(p(d),!0),c(r(d))],[b(p(d+k),!0),c(r(d+k))]];return e(a)};for(l=0;l<a.length;l++)if(z(v)||!d(a[l].x,v))x+=" "+t(a[l])+" "+u(a[l]);else for(p=this.getScale(a[l-1].x+q,a[l].x+q,this.isTimeSeries()),r=this.getScale(a[l-1].value,a[l].value),m=b(a[l].x)-b(a[l-1].x),w=c(a[l].value)-c(a[l-1].value),m=Math.sqrt(Math.pow(m,
2)+Math.pow(w,2)),w=2/m,n=2*w,m=w;1>=m;m+=n)x+=f(a[l-1],a[l],m,w);return x};d.updateArea=function(a){var b=this,c=b.d3;b.mainArea=b.main.selectAll("."+e.areas).selectAll("."+e.area).data(b.lineData.bind(b));b.mainArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){b.orgAreaOpacity=+c.select(this).style("opacity");return 0});b.mainArea.style("opacity",b.orgAreaOpacity);b.mainArea.exit().transition().duration(a).style("opacity",0).remove()};
d.redrawArea=function(a,b){return[(b?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)]};d.generateDrawArea=function(a,b){var c=this,f=c.config,d=c.d3.svg.area(),e=c.generateGetAreaPoints(a,b),g=b?c.getSubYScale:c.getYScale,l=function(a){return(b?c.subxx:c.xx).call(c,a)},m=function(a,b){return 0<f.data_groups.length?e(a,b)[0][1]:g.call(c,a.id)(c.getAreaBaseValue(a.id))},x=function(a,b){return 0<f.data_groups.length?
e(a,b)[1][1]:g.call(c,a.id)(a.value)},d=f.axis_rotated?d.x0(m).x1(x).y(l):d.x(l).y0(m).y1(x);f.line_connectNull||(d=d.defined(function(a){return null!==a.value}));return function(a){var b=f.line_connectNull?c.filterRemoveNull(a.values):a.values,e=0,g=0;c.isAreaType(a)?(c.isStepType(a)&&(b=c.convertValuesToStep(b)),a=d.interpolate(c.getInterpolate(a))(b)):(b[0]&&(e=c.x(b[0].x),g=c.getYScale(a.id)(b[0].value)),a=f.axis_rotated?"M "+g+" "+e:"M "+e+" "+g);return a?a:"M 0 0"}};d.getAreaBaseValue=function(){return 0};
d.generateGetAreaPoints=function(a,b){var c=this,f=c.config,d=c.getShapeX(0,a.__max__+1,a,!!b),e=c.getShapeY(!!b),g=c.getShapeOffset(c.isAreaType,a,!!b),l=b?c.getSubYScale:c.getYScale;return function(a,b){var p=l.call(c,a.id)(0),r=g(a,b)||p,w=d(a),n=e(a);f.axis_rotated&&(0<a.value&&n<p||0>a.value&&p<n)&&(n=p);return[[w,r],[w,n-(p-r)],[w,n-(p-r)],[w,r]]}};d.updateCircle=function(){this.mainCircle=this.main.selectAll("."+e.circles).selectAll("."+e.circle).data(this.lineOrScatterData.bind(this));this.mainCircle.enter().append("circle").attr("class",
this.classCircle.bind(this)).attr("r",this.pointR.bind(this)).style("fill",this.color);this.mainCircle.style("opacity",this.initialOpacityForCircle.bind(this));this.mainCircle.exit().remove()};d.redrawCircle=function(a,b,c){var f=this.main.selectAll("."+e.selectedCircle);return[(c?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",a).attr("cy",b),(c?f.transition(Math.random().toString()):f).attr("cx",
a).attr("cy",b)]};d.circleX=function(a){return a.x||0===a.x?this.x(a.x):null};d.updateCircleY=function(){var a=this,b,c;0<a.config.data_groups.length?(b=a.getShapeIndices(a.isLineType),c=a.generateGetLinePoints(b),a.circleY=function(a,b){return c(a,b)[0][1]}):a.circleY=function(b){return a.getYScale(b.id)(b.value)}};d.getCircles=function(a,b){return(b?this.main.selectAll("."+e.circles+this.getTargetSelectorSuffix(b)):this.main).selectAll("."+e.circle+(t(a)?"-"+a:""))};d.expandCircles=function(a,b,
c){var f=this.pointExpandedR.bind(this);c&&this.unexpandCircles();this.getCircles(a,b).classed(e.EXPANDED,!0).attr("r",f)};d.unexpandCircles=function(a){var b=this,c=b.pointR.bind(b);b.getCircles(a).filter(function(){return b.d3.select(this).classed(e.EXPANDED)}).classed(e.EXPANDED,!1).attr("r",c)};d.pointR=function(a){var b=this.config;return this.isStepType(a)?0:E(b.point_r)?b.point_r(a):b.point_r};d.pointExpandedR=function(a){var b=this.config;return b.point_focus_expand_enabled?b.point_focus_expand_r?
b.point_focus_expand_r:1.75*this.pointR(a):this.pointR(a)};d.pointSelectR=function(a){var b=this.config;return b.point_select_r?b.point_select_r:4*this.pointR(a)};d.isWithinCircle=function(a,b){var c=this.d3,f=c.mouse(a),d=c.select(a),c=+d.attr("cx"),d=+d.attr("cy");return Math.sqrt(Math.pow(c-f[0],2)+Math.pow(d-f[1],2))<b};d.isWithinStep=function(a,b){return 30>Math.abs(b-this.d3.mouse(a)[1])};d.initBar=function(){this.main.select("."+e.chart).append("g").attr("class",e.chartBars)};d.updateTargetsForBar=
function(a){var b=this.config,c=this.classChartBar.bind(this),f=this.classBars.bind(this),d=this.classFocus.bind(this);this.main.select("."+e.chartBars).selectAll("."+e.chartBar).data(a).attr("class",function(a){return c(a)+d(a)}).enter().append("g").attr("class",c).style("opacity",0).style("pointer-events","none").append("g").attr("class",f).style("cursor",function(a){return b.data_selection_isselectable(a)?"pointer":null})};d.updateBar=function(a){var b=this,c=b.barData.bind(b),f=b.classBar.bind(b),
d=b.initialOpacity.bind(b),h=function(a){return b.color(a.id)};b.mainBar=b.main.selectAll("."+e.bars).selectAll("."+e.bar).data(c);b.mainBar.enter().append("path").attr("class",f).style("stroke",h).style("fill",h);b.mainBar.style("opacity",d);b.mainBar.exit().transition().duration(a).style("opacity",0).remove()};d.redrawBar=function(a,b){return[(b?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",a).style("fill",this.color).style("opacity",1)]};d.getBarW=function(a,b){var c=
this.config,f="number"===typeof c.bar_width?c.bar_width:b?a.tickInterval()*c.bar_width_ratio/b:0;return c.bar_width_max&&f>c.bar_width_max?c.bar_width_max:f};d.getBars=function(a,b){return(b?this.main.selectAll("."+e.bars+this.getTargetSelectorSuffix(b)):this.main).selectAll("."+e.bar+(t(a)?"-"+a:""))};d.expandBars=function(a,b,c){c&&this.unexpandBars();this.getBars(a,b).classed(e.EXPANDED,!0)};d.unexpandBars=function(a){this.getBars(a).classed(e.EXPANDED,!1)};d.generateDrawBar=function(a,b){var c=
this.config,f=this.generateGetBarPoints(a,b);return function(a,b){var d=f(a,b),e=c.axis_rotated?1:0,m=c.axis_rotated?0:1;return"M "+d[0][e]+","+d[0][m]+" L"+d[1][e]+","+d[1][m]+" L"+d[2][e]+","+d[2][m]+" L"+d[3][e]+","+d[3][m]+" z"}};d.generateGetBarPoints=function(a,b){var c=this,f=a.__max__+1,d=c.getBarW(b?c.subXAxis:c.xAxis,f),e=c.getShapeX(d,f,a,!!b),g=c.getShapeY(!!b),l=c.getShapeOffset(c.isBarType,a,!!b),m=b?c.getSubYScale:c.getYScale;return function(a,b){var f=m.call(c,a.id)(0),n=l(a,b)||f,
q=e(a),t=g(a);c.config.axis_rotated&&(0<a.value&&t<f||0>a.value&&f<t)&&(t=f);return[[q,n],[q,t-(f-n)],[q+d,t-(f-n)],[q+d,n]]}};d.isWithinBar=function(a){var b=this.d3.mouse(a),c=a.getBoundingClientRect(),f=a.pathSegList.getItem(0),d=a.pathSegList.getItem(1);a=Math.min(f.x,d.x);f=Math.min(f.y,d.y);d=a+c.width+2;c=f+c.height+2;return a-2<b[0]&&b[0]<d&&f-2<b[1]&&b[1]<c};d.initText=function(){this.main.select("."+e.chart).append("g").attr("class",e.chartTexts);this.mainText=this.d3.selectAll([])};d.updateTargetsForText=
function(a){var b=this.classChartText.bind(this),c=this.classTexts.bind(this),f=this.classFocus.bind(this);this.main.select("."+e.chartTexts).selectAll("."+e.chartText).data(a).attr("class",function(a){return b(a)+f(a)}).enter().append("g").attr("class",b).style("opacity",0).style("pointer-events","none").append("g").attr("class",c)};d.updateText=function(a){var b=this,c=b.config,f=b.barOrLineData.bind(b),d=b.classText.bind(b);b.mainText=b.main.selectAll("."+e.texts).selectAll("."+e.text).data(f);
b.mainText.enter().append("text").attr("class",d).attr("text-anchor",function(a){return c.axis_rotated?0>a.value?"end":"start":"middle"}).style("stroke","none").style("fill",function(a){return b.color(a)}).style("fill-opacity",0);b.mainText.text(function(a,c,f){return b.dataLabelFormat(a.id)(a.value,a.id,c,f)});b.mainText.exit().transition().duration(a).style("fill-opacity",0).remove()};d.redrawText=function(a,b,c,f){return[(f?this.mainText.transition():this.mainText).attr("x",a).attr("y",b).style("fill",
this.color).style("fill-opacity",c?0:this.opacityForText.bind(this))]};d.getTextRect=function(a,b,c){c=this.d3.select("body").append("div").classed("c3",!0);var f;c.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).style("font-size",$(this.config.bindto.parentElement).css("font-size")).style("font-family",$(this.config.bindto.parentElement).css("font-family")).selectAll(".dummy").data([a]).enter().append("text").classed(b?b:"",!0).text(a).each(function(){f=
this.getBoundingClientRect()});c.remove();return f};d.generateXYForText=function(a,b,c,f){var d=this,e=d.generateGetAreaPoints(a,!1),g=d.generateGetBarPoints(b,!1),l=d.generateGetLinePoints(c,!1),m=f?d.getXForText:d.getYForText;return function(a,b){var c=d.isAreaType(a)?e:d.isBarType(a)?g:l;return m.call(d,c(a,b),a,this)}};d.getXForText=function(a,b,c){c=c.getBoundingClientRect();var f;this.config.axis_rotated?(f=this.isBarType(b)?4:6,a=a[2][1]+f*(0>b.value?-1:1)):a=this.hasType("bar")?(a[2][0]+a[0][0])/
2:a[0][0];null===b.value&&(a>this.width?a=this.width-c.width:0>a&&(a=4));return a};d.getYForText=function(a,b,c){c=c.getBoundingClientRect();this.config.axis_rotated?a=(a[0][0]+a[2][0]+.6*c.height)/2:(a=a[2][1],0>b.value||0===b.value&&!this.hasPositiveValue?(a+=c.height,this.isBarType(b)&&this.isSafari()?a-=3:!this.isBarType(b)&&this.isChrome()&&(a+=3)):a+=this.isBarType(b)?-3:-6);null!==b.value||this.config.axis_rotated||(a<c.height?a=c.height:a>this.height&&(a=this.height-4));return a};d.setTargetType=
function(a,b){var c=this,f=c.config;c.mapToTargetIds(a).forEach(function(a){c.withoutFadeIn[a]=b===f.data_types[a];f.data_types[a]=b});a||(f.data_type=b)};d.hasType=function(a,b){var c=this.config.data_types,f=!1;(b=b||this.data.targets)&&b.length?b.forEach(function(b){if((b=c[b.id])&&0<=b.indexOf(a)||!b&&"line"===a)f=!0}):Object.keys(c).length?Object.keys(c).forEach(function(b){c[b]===a&&(f=!0)}):f=this.config.data_type===a;return f};d.hasArcType=function(a){return this.hasType("pie",a)||this.hasType("donut",
a)||this.hasType("gauge",a)};d.isLineType=function(a){var b=this.config;a=B(a)?a:a.id;return!b.data_types[a]||0<="line spline area area-spline step area-step".split(" ").indexOf(b.data_types[a])};d.isStepType=function(a){a=B(a)?a:a.id;return 0<=["step","area-step"].indexOf(this.config.data_types[a])};d.isSplineType=function(a){a=B(a)?a:a.id;return 0<=["spline","area-spline"].indexOf(this.config.data_types[a])};d.isAreaType=function(a){a=B(a)?a:a.id;return 0<=["area","area-spline","area-step"].indexOf(this.config.data_types[a])};
d.isBarType=function(a){a=B(a)?a:a.id;return"bar"===this.config.data_types[a]};d.isScatterType=function(a){a=B(a)?a:a.id;return"scatter"===this.config.data_types[a]};d.isPieType=function(a){a=B(a)?a:a.id;return"pie"===this.config.data_types[a]};d.isGaugeType=function(a){a=B(a)?a:a.id;return"gauge"===this.config.data_types[a]};d.isDonutType=function(a){a=B(a)?a:a.id;return"donut"===this.config.data_types[a]};d.isArcType=function(a){return this.isPieType(a)||this.isDonutType(a)||this.isGaugeType(a)};
d.lineData=function(a){return this.isLineType(a)?[a]:[]};d.arcData=function(a){return this.isArcType(a.data)?[a]:[]};d.barData=function(a){return this.isBarType(a)?a.values:[]};d.lineOrScatterData=function(a){return this.isLineType(a)||this.isScatterType(a)?a.values:[]};d.barOrLineData=function(a){return this.isBarType(a)||this.isLineType(a)?a.values:[]};d.isInterpolationType=function(a){return 0<="linear linear-closed basis basis-open basis-closed bundle cardinal cardinal-open cardinal-closed monotone".split(" ").indexOf(a)};
d.initGrid=function(){var a=this.config,b=this.d3;this.grid=this.main.append("g").attr("clip-path",this.clipPathForGrid).attr("class",e.grid);a.grid_x_show&&this.grid.append("g").attr("class",e.xgrids);a.grid_y_show&&this.grid.append("g").attr("class",e.ygrids);a.grid_focus_show&&this.grid.append("g").attr("class",e.xgridFocus).append("line").attr("class",e.xgridFocus);this.xgrid=b.selectAll([]);a.grid_lines_front||this.initGridLines()};d.initGridLines=function(){var a=this.d3;this.gridLines=this.main.append("g").attr("clip-path",
this.clipPathForGrid).attr("class",e.grid+" "+e.gridLines);this.gridLines.append("g").attr("class",e.xgridLines);this.gridLines.append("g").attr("class",e.ygridLines);this.xgridLines=a.selectAll([])};d.updateXGrid=function(a){var b=this,c=b.config,f=b.d3,d=b.generateGridData(c.grid_x_type,b.x),h=b.isCategorized()?b.xAxis.tickOffset():0;b.xgridAttr=c.axis_rotated?{x1:0,x2:b.width,y1:function(a){return b.x(a)-h},y2:function(a){return b.x(a)-h}}:{x1:function(a){return b.x(a)+h},x2:function(a){return b.x(a)+
h},y1:0,y2:b.height};b.xgrid=b.main.select("."+e.xgrids).selectAll("."+e.xgrid).data(d);b.xgrid.enter().append("line").attr("class",e.xgrid);a||b.xgrid.attr(b.xgridAttr).style("opacity",function(){return+f.select(this).attr(c.axis_rotated?"y1":"x1")===(c.axis_rotated?b.height:0)?0:1});b.xgrid.exit().remove()};d.updateYGrid=function(){var a=this.config,b=this.yAxis.tickValues()||this.y.ticks(a.grid_y_ticks);this.ygrid=this.main.select("."+e.ygrids).selectAll("."+e.ygrid).data(b);this.ygrid.enter().append("line").attr("class",
e.ygrid);this.ygrid.attr("x1",a.axis_rotated?this.y:0).attr("x2",a.axis_rotated?this.y:this.width).attr("y1",a.axis_rotated?0:this.y).attr("y2",a.axis_rotated?this.height:this.y);this.ygrid.exit().remove();this.smoothLines(this.ygrid,"grid")};d.gridTextAnchor=function(a){return a.position?a.position:"end"};d.gridTextDx=function(a){return"start"===a.position?4:"middle"===a.position?0:-4};d.xGridTextX=function(a){return"start"===a.position?-this.height:"middle"===a.position?-this.height/2:0};d.yGridTextX=
function(a){return"start"===a.position?0:"middle"===a.position?this.width/2:this.width};d.updateGrid=function(a){var b=this.main,c=this.config,f;this.grid.style("visibility",this.hasArcType()?"hidden":"visible");b.select("line."+e.xgridFocus).style("visibility","hidden");c.grid_x_show&&this.updateXGrid();this.xgridLines=b.select("."+e.xgridLines).selectAll("."+e.xgridLine).data(c.grid_x_lines);f=this.xgridLines.enter().append("g").attr("class",function(a){return e.xgridLine+(a["class"]?" "+a["class"]:
"")});f.append("line").style("opacity",0);f.append("text").attr("text-anchor",this.gridTextAnchor).attr("transform",c.axis_rotated?"":"rotate(-90)").attr("dx",this.gridTextDx).attr("dy",-5).style("opacity",0);this.xgridLines.exit().transition().duration(a).style("opacity",0).remove();c.grid_y_show&&this.updateYGrid();this.ygridLines=b.select("."+e.ygridLines).selectAll("."+e.ygridLine).data(c.grid_y_lines);b=this.ygridLines.enter().append("g").attr("class",function(a){return e.ygridLine+(a["class"]?
" "+a["class"]:"")});b.append("line").style("opacity",0);b.append("text").attr("text-anchor",this.gridTextAnchor).attr("transform",c.axis_rotated?"rotate(-90)":"").attr("dx",this.gridTextDx).attr("dy",-5).style("opacity",0);b=this.yv.bind(this);this.ygridLines.select("line").transition().duration(a).attr("x1",c.axis_rotated?b:0).attr("x2",c.axis_rotated?b:this.width).attr("y1",c.axis_rotated?0:b).attr("y2",c.axis_rotated?this.height:b).style("opacity",1);this.ygridLines.select("text").transition().duration(a).attr("x",
c.axis_rotated?this.xGridTextX.bind(this):this.yGridTextX.bind(this)).attr("y",b).text(function(a){return a.text}).style("opacity",1);this.ygridLines.exit().transition().duration(a).style("opacity",0).remove()};d.redrawGrid=function(a){var b=this.config,c=this.xv.bind(this),f=this.xgridLines.select("line"),d=this.xgridLines.select("text");return[(a?f.transition():f).attr("x1",b.axis_rotated?0:c).attr("x2",b.axis_rotated?this.width:c).attr("y1",b.axis_rotated?c:0).attr("y2",b.axis_rotated?c:this.height).style("opacity",
1),(a?d.transition():d).attr("x",b.axis_rotated?this.yGridTextX.bind(this):this.xGridTextX.bind(this)).attr("y",c).text(function(a){return a.text}).style("opacity",1)]};d.showXGridFocus=function(a){var b=this.config;a=a.filter(function(a){return a&&t(a.value)});var c=this.main.selectAll("line."+e.xgridFocus),f=this.xx.bind(this);!b.tooltip_show||this.hasType("scatter")||this.hasArcType()||(c.style("visibility","visible").data([a[0]]).attr(b.axis_rotated?"y1":"x1",f).attr(b.axis_rotated?"y2":"x2",
f),this.smoothLines(c,"grid"))};d.hideXGridFocus=function(){this.main.select("line."+e.xgridFocus).style("visibility","hidden")};d.updateXgridFocus=function(){var a=this.config;this.main.select("line."+e.xgridFocus).attr("x1",a.axis_rotated?0:-10).attr("x2",a.axis_rotated?this.width:-10).attr("y1",a.axis_rotated?-10:0).attr("y2",a.axis_rotated?-10:this.height)};d.generateGridData=function(a,b){var c=[],f,d;d=this.main.select("."+e.axisX).selectAll(".tick").size();if("year"===a)for(f=this.getXDomain(),
d=f[0].getFullYear(),f=f[1].getFullYear();d<=f;d++)c.push(new Date(d+"-01-01 00:00:00"));else c=b.ticks(10),c.length>d&&(c=c.filter(function(a){return 0>(""+a).indexOf(".")}));return c};d.getGridFilterToRemove=function(a){return a?function(b){var c=!1;[].concat(a).forEach(function(a){if("value"in a&&b.value===a.value||"class"in a&&b["class"]===a["class"])c=!0});return c}:function(){return!0}};d.removeGridLines=function(a,b){var c=this.config,f=this.getGridFilterToRemove(a),d=function(a){return!f(a)},
h=b?e.xgridLine:e.ygridLine;this.main.select("."+(b?e.xgridLines:e.ygridLines)).selectAll("."+h).filter(f).transition().duration(c.transition_duration).style("opacity",0).remove();b?c.grid_x_lines=c.grid_x_lines.filter(d):c.grid_y_lines=c.grid_y_lines.filter(d)};d.initTooltip=function(){var a=this,b=a.config,c;a.tooltip=a.selectChart.style("position","relative").append("div").attr("class",e.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none");if(b.tooltip_init_show){if(a.isTimeSeries()&&
B(b.tooltip_init_x)){b.tooltip_init_x=a.parseDate(b.tooltip_init_x);for(c=0;c<a.data.targets[0].values.length&&0!==a.data.targets[0].values[c].x-b.tooltip_init_x;c++);b.tooltip_init_x=c}a.tooltip.html(b.tooltip_contents.call(a,a.data.targets.map(function(c){return a.addName(c.values[b.tooltip_init_x])}),a.axis.getXAxisTickFormat(),a.getYFormat(a.hasArcType()),a.color));a.tooltip.style("top",b.tooltip_init_position.top).style("left",b.tooltip_init_position.left).style("display","block")}};d.getTooltipContent=
function(a,b,c,f){var d=this.config;b=d.tooltip_format_title||b;var e=d.tooltip_format_name||function(a){return a};c=d.tooltip_format_value||c;var g,l,m,n,p=this.isOrderAsc();if(0===d.data_groups.length)a.sort(function(a,b){return"undefined"===typeof a||"undefined"===typeof b?p?a.value-b.value:b.value-a.value:0});else{var r=this.orderTargets(this.data.targets).map(function(a){return a.id});a.sort(function(a,b){return 0<a.value&&0<b.value?p?r.indexOf(a.id)-r.indexOf(b.id):r.indexOf(b.id)-r.indexOf(a.id):
p?a.value-b.value:b.value-a.value})}for(d=0;d<a.length;d++)a[d]&&(a[d].value||0===a[d].value)&&(g||(g=b?b(a[d].x):a[d].x,g="<table class='"+this.CLASS.tooltip+"'>"+(g||0===g?"<tr><th colspan='2'>"+g+"</th></tr>":"")),l=c(a[d].value,a[d].ratio,a[d].id,a[d].index),void 0!==l&&null!==a[d].name&&(m=e(a[d].name,a[d].ratio,a[d].id,a[d].index),n=this.levelColor?this.levelColor(a[d].value):f(a[d].id),g+="<tr class='"+this.CLASS.tooltipName+"-"+this.getTargetSelectorSuffix(a[d].id)+"'>",g+="<td class='name'><span style='background-color:"+
n+"'></span>"+m+"</td>",g+="<td class='value'>"+l+"</td>",g+="</tr>"));return g+"</table>"};d.tooltipPosition=function(a,b,c,f){var d=this.config,e=this.d3,g;g=this.hasArcType();f=e.mouse(f);g?(d=(this.width-(this.isLegendRight?this.getLegendWidth():0))/2+f[0],a=this.height/2+f[1]+20):(g=this.getSvgLeft(!0),d.axis_rotated?(d=g+f[0]+100,b=d+b,g=this.currentWidth-this.getCurrentPaddingRight(),a=this.x(a[0].x)+20):(d=g+this.getCurrentPaddingLeft(!0)+this.x(a[0].x)+20,b=d+b,g=g+this.currentWidth-this.getCurrentPaddingRight(),
a=f[1]+15),b>g&&(d-=b-g+20),a+c>this.currentHeight&&(a-=c+30));0>a&&(a=0);return{top:a,left:d}};d.showTooltip=function(a,b){var c=this.config,f,e;f=this.hasArcType();e=a.filter(function(a){return a&&t(a.value)});var h=c.tooltip_position||d.tooltipPosition;0!==e.length&&c.tooltip_show&&(this.tooltip.html(c.tooltip_contents.call(this,a,this.axis.getXAxisTickFormat(),this.getYFormat(f),this.color)).style("display","block"),c=this.tooltip.property("offsetWidth"),f=this.tooltip.property("offsetHeight"),
e=h.call(this,e,c,f,b),this.tooltip.style("top",e.top+"px").style("left",e.left+"px"))};d.hideTooltip=function(){this.tooltip.style("display","none")};d.initLegend=function(){this.legendItemTextBox={};this.legendHasRendered=!1;this.legend=this.svg.append("g").attr("transform",this.getTranslate("legend"));this.config.legend_show?this.updateLegendWithDefaults():(this.legend.style("visibility","hidden"),this.hiddenLegendIds=this.mapToIds(this.data.targets))};d.updateLegendWithDefaults=function(){this.updateLegend(this.mapToIds(this.data.targets),
{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})};d.updateSizeForLegend=function(a,b){var c=this.config,f=this.isLegendTop?this.getCurrentPaddingTop()+(c.legend_inset_y+5.5)*c.completeScale:this.currentHeight-a-this.getCurrentPaddingBottom()-c.legend_inset_y*c.completeScale,d=this.isLegendLeft?this.getCurrentPaddingLeft()+(c.legend_inset_x+.5)*c.completeScale:this.currentWidth-b-this.getCurrentPaddingRight()-(c.legend_inset_x+.5)*c.completeScale;this.margin3={top:this.isLegendRight?
0:this.isLegendInset?f:this.currentHeight-a+6*c.completeScale,right:NaN,bottom:0,left:this.isLegendRight?this.currentWidth-b:this.isLegendInset?d:0}};d.transformLegend=function(a){(a?this.legend.transition():this.legend).attr("transform",this.getTranslate("legend"))};d.updateLegendStep=function(a){this.legendStep=a};d.updateLegendItemWidth=function(a){this.legendItemWidth=a};d.updateLegendItemHeight=function(a){this.legendItemHeight=a};d.getLegendWidth=function(){return this.config.legend_show?this.isLegendRight||
this.isLegendInset?this.legendItemWidth*(this.legendStep+1):this.currentWidth:0};d.getLegendHeight=function(){var a=0;this.config.legend_show&&(a=this.isLegendRight?this.currentHeight:this.legendItemHeight*(this.legendStep+1));return a};d.opacityForLegend=function(a){return a.classed(e.legendItemHidden)?null:1};d.opacityForUnfocusedLegend=function(a){return a.classed(e.legendItemHidden)?null:.3};d.toggleFocusLegend=function(a,b){var c=this;a=c.mapToTargetIds(a);c.legend.selectAll("."+e.legendItem).filter(function(b){return 0<=
a.indexOf(b)}).classed(e.legendItemFocused,b).transition().duration(100).style("opacity",function(){return(b?c.opacityForLegend:c.opacityForUnfocusedLegend).call(c,c.d3.select(this))})};d.revertLegend=function(){var a=this,b=a.d3;a.legend.selectAll("."+e.legendItem).classed(e.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return a.opacityForLegend(b.select(this))})};d.showLegend=function(a){var b=this,c=b.config;c.legend_show||(c.legend_show=!0,b.legend.style("visibility",
"visible"),b.legendHasRendered||b.updateLegendWithDefaults());b.removeHiddenLegendIds(a);b.legend.selectAll(b.selectorLegends(a)).style("visibility","visible").transition().style("opacity",function(){return b.opacityForLegend(b.d3.select(this))})};d.hideLegend=function(a){var b=this.config;b.legend_show&&ea(a)&&(b.legend_show=!1,this.legend.style("visibility","hidden"));this.addHiddenLegendIds(a);this.legend.selectAll(this.selectorLegends(a)).style("opacity",0).style("visibility","hidden")};d.clearLegendItemTextBoxCache=
function(){this.legendItemTextBox={}};d.updateLegend=function(a,b,c){function f(a,b){h.legendItemTextBox[b]||(h.legendItemTextBox[b]=h.getTextRect(a.textContent,e.legendItem,a));return h.legendItemTextBox[b]}function d(b,c,e){function k(a,b){b||(n=(p-F-l)/2,n<B&&(n=(p-l)/2,F=0,A++));N[a]=A;M[A]=h.isLegendInset?10*h.config.completeScale:n;E[a]=F;F+=l}var m=0===e;e=e===a.length-1;b=f(b,c);e=b.width+D+(!e||h.isLegendRight||h.isLegendInset?z:0)+g.legend_padding;b=b.height+u;var l=h.isLegendRight||h.isLegendInset?
b:e,p=h.isLegendRight||h.isLegendInset?h.getLegendHeight():h.getLegendWidth(),n;m&&(J=v=A=F=0);if(g.legend_show&&!h.isLegendToShow(c))G[c]=P[c]=N[c]=E[c]=0;else{G[c]=e;P[c]=b;if(!v||e>=v)v=e;if(!J||b>=J)J=b;m=h.isLegendRight||h.isLegendInset?J:v;g.legend_equally?(Object.keys(G).forEach(function(a){G[a]=v}),Object.keys(P).forEach(function(a){P[a]=J}),n=(p-m*a.length)/2,n<B?(A=F=0,a.forEach(function(a){k(a)})):k(c,!0)):k(c)}}var h=this,g=h.config,l,m,n,p,r,w,q,t,u=2*g.completeScale,z=3*g.completeScale,
v=0,J=0,B=h.isLegendInset?g.legend_inset_step?3*g.completeScale:0:10*g.completeScale,D=g.completeScale*(g.legend_item_tile_width+5),K,F=0,E={},G={},P={},M=[0],N={},A=0,Q,H,I;a=a.filter(function(a){return!C(g.data_names[a])||null!==g.data_names[a]});b=b||{};Q=y(b,"withTransition",!0);H=y(b,"withTransitionForTransform",!0);h.isLegendInset&&(A=g.legend_inset_step?g.legend_inset_step:a.length,h.updateLegendStep(A));h.isLegendRight?(l=function(a){return v*N[a]},p=function(a){return M[N[a]]+E[a]}):h.isLegendInset?
(l=function(a){return v*N[a]+10*g.completeScale},p=function(a){return M[N[a]]+E[a]}):(l=function(a){return M[N[a]]+E[a]},p=function(a){return J*N[a]});m=function(a,b){return l(a,b)+g.legend_item_tile_width*g.completeScale};r=function(a,b){return p(a,b)+9*g.completeScale};n=function(a,b){return l(a,b)};w=function(a,b){return p(a,b)-5*g.completeScale};b=function(a,b){return l(a,b)-2*g.completeScale};q=function(a,b){return l(a,b)-2*g.completeScale+g.legend_item_tile_width*g.completeScale};t=function(a,
b){return p(a,b)+4*g.completeScale};K=h.legend.selectAll("."+e.legendItem).data(a).enter().append("g").attr("class",function(a){return h.generateClass(e.legendItem,a)}).style("visibility",function(a){return h.isLegendToShow(a)?"visible":"hidden"}).style("cursor","pointer").on("click",function(a){g.legend_item_onclick?g.legend_item_onclick.call(h,a):h.d3.event.altKey?(h.api.hide(),h.api.show(a)):(h.api.toggle(a),h.isTargetToShow(a)?h.api.focus(a):h.api.revert())}).on("mouseover",function(a){g.legend_item_onmouseover?
g.legend_item_onmouseover.call(h,a):(h.d3.select(this).classed(e.legendItemFocused,!0),!h.transiting&&h.isTargetToShow(a)&&h.api.focus(a))}).on("mouseout",function(a){g.legend_item_onmouseout?g.legend_item_onmouseout.call(h,a):(h.d3.select(this).classed(e.legendItemFocused,!1),h.api.revert())});K.append("text").text(function(a){return C(g.data_names[a])?g.data_names[a]:a}).each(function(a,b){d(this,a,b);h.updateLegendItemWidth(v);h.updateLegendItemHeight(J)}).style("pointer-events","none").attr("x",
h.isLegendRight||h.isLegendInset?m:-200).attr("y",h.isLegendRight||h.isLegendInset?-200:r);K.append("rect").attr("class",e.legendItemEvent).style("fill-opacity",0).attr("x",h.isLegendRight||h.isLegendInset?n:-200*g.completeScale).attr("y",h.isLegendRight||h.isLegendInset?-200*g.completeScale:w);K.append("line").attr("class",e.legendItemTile).style("stroke",h.color).style("pointer-events","none").attr("x1",h.isLegendRight||h.isLegendInset?b:-200*g.completeScale).attr("y1",h.isLegendRight||h.isLegendInset?
-200*g.completeScale:t).attr("x2",h.isLegendRight||h.isLegendInset?q:-200*g.completeScale).attr("y2",h.isLegendRight||h.isLegendInset?-200*g.completeScale:t).attr("stroke-width",g.legend_item_tile_height*g.completeScale);K=h.legend.select("."+e.legendBackground+" rect");h.isLegendInset&&0<v&&0===K.size()&&(K=h.legend.insert("g","."+e.legendItem).attr("class",e.legendBackground).append("rect"));I=h.legend.selectAll("text").data(a).text(function(a){return C(g.data_names[a])?g.data_names[a]:a}).each(function(a,
b){d(this,a,b)});(Q?I.transition():I).attr("x",m).attr("y",r);m=h.legend.selectAll("rect."+e.legendItemEvent).data(a);(Q?m.transition():m).attr("width",function(a){return G[a]}).attr("height",function(a){return P[a]}).attr("x",n).attr("y",w);n=h.legend.selectAll("line."+e.legendItemTile).data(a);(Q?n.transition():n).style("stroke",h.color).attr("x1",b).attr("y1",t).attr("x2",q).attr("y2",t);K&&(Q?K.transition():K).attr("height",h.getLegendHeight()-12*g.completeScale).attr("width",v*(A+1)+10*g.completeScale);
h.legend.selectAll("."+e.legendItem).classed(e.legendItemHidden,function(a){return!h.isTargetToShow(a)});h.updateLegendItemWidth(v);h.updateLegendItemHeight(J);h.updateLegendStep(A);h.updateSizes();h.updateScales();h.updateSvgSize();h.transformAll(H,c);h.legendHasRendered=!0};d.initTitle=function(){this.title=this.svg.append("text").text(this.config.title_text).attr("class",this.CLASS.title)};d.redrawTitle=function(){this.title.attr("x",this.xForTitle.bind(this)).attr("y",this.yForTitle.bind(this))};
d.xForTitle=function(){var a=this.config,b=a.title_position||"left";return 0<=b.indexOf("right")?this.currentWidth-this.getTextRect(this.title.node().textContent,this.CLASS.title,this.title.node()).width-a.title_padding.right:0<=b.indexOf("center")?(this.currentWidth-this.getTextRect(this.title.node().textContent,this.CLASS.title,this.title.node()).width)/2:a.title_padding.left};d.yForTitle=function(){return this.config.title_padding.top+this.getTextRect(this.title.node().textContent,this.CLASS.title,
this.title.node()).height};d.getTitlePadding=function(){return this.yForTitle()+this.config.title_padding.bottom};(function(a,b){if(Object.create)b.prototype=Object.create(a.prototype);else{var c=function(){};c.prototype=a.prototype;b.prototype=new c}return b.prototype.constructor=b})(function(a){this.owner=a},q);q.prototype.init=function(){var a=this.owner,b=a.config,c=a.main;a.axes.x=c.append("g").attr("class",e.axis+" "+e.axisX).attr("clip-path",a.clipPathForXAxis).attr("transform",a.getTranslate("x")).style("visibility",
b.axis_x_show?"visible":"hidden");a.axes.x.append("text").attr("class",e.axisXLabel).attr("transform",b.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this));a.axes.y=c.append("g").attr("class",e.axis+" "+e.axisY).attr("clip-path",b.axis_y_inner?"":a.clipPathForYAxis).attr("transform",a.getTranslate("y")).style("visibility",b.axis_y_show?"visible":"hidden");a.axes.y.append("text").attr("class",e.axisYLabel).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",
this.textAnchorForYAxisLabel.bind(this));a.axes.y2=c.append("g").attr("class",e.axis+" "+e.axisY2).attr("transform",a.getTranslate("y2")).style("visibility",b.axis_y2_show?"visible":"hidden");a.axes.y2.append("text").attr("class",e.axisY2Label).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))};q.prototype.getXAxis=function(a,b,c,d,e,h,g){var l=this.owner,m=l.config;e={isCategory:l.isCategorized(),withOuterTick:e,tickMultiline:m.axis_x_tick_multiline,
tickWidth:m.axis_x_tick_width,tickTextRotate:g?0:m.axis_x_tick_rotate,withoutTransition:h};a=da(l.d3,e,l).scale(a).orient(b);l.isTimeSeries()&&d&&"function"!==typeof d&&(d=d.map(function(a){return l.parseDate(a)}));a.tickFormat(c).tickValues(d);l.isCategorized()&&(a.tickCentered(m.axis_x_tick_centered),ea(m.axis_x_tick_culling)&&(m.axis_x_tick_culling=!1));return a};q.prototype.updateXAxisTickValues=function(a,b){var c=this.owner,d=c.config,e;if(d.axis_x_tick_fit||d.axis_x_tick_count)e=this.generateTickValues(c.mapTargetsToUniqueXs(a),
d.axis_x_tick_count,c.isTimeSeries());b?b.tickValues(e):(c.xAxis.tickValues(e),c.subXAxis.tickValues(e));return e};q.prototype.getYAxis=function(a,b,c,d,e,h){var g=this.owner,l=g.d3,m=g.config;a=da(l,{withOuterTick:e,withoutTransition:h},g).scale(a).orient(b).tickFormat(c);g.isTimeSeriesY()?a.ticks(l.time[m.axis_y_tick_time_value],m.axis_y_tick_time_interval):a.tickValues(d);return a};q.prototype.getId=function(a){var b=this.owner.config;return a in b.data_axes?b.data_axes[a]:"y"};q.prototype.getXAxisTickFormat=
function(){var a=this.owner,b=a.config,c=a.isTimeSeries()?a.defaultAxisTimeFormat:a.isCategorized()?a.categoryName:function(a){return 0>a?a.toFixed(0):a};b.axis_x_tick_format&&(E(b.axis_x_tick_format)?c=b.axis_x_tick_format:a.isTimeSeries()&&(c=function(c){return c?a.axisTimeFormat(b.axis_x_tick_format)(c):""}));return E(c)?function(b){return c.call(a,b)}:c};q.prototype.getTickValues=function(a,b){return a?a:b?b.tickValues():void 0};q.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,
this.owner.xAxis)};q.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)};q.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)};q.prototype.getLabelOptionByAxisId=function(a){var b=this.owner.config,c;"y"===a?c=b.axis_y_label:"y2"===a?c=b.axis_y2_label:"x"===a&&(c=b.axis_x_label);return c};q.prototype.getLabelText=function(a){a=this.getLabelOptionByAxisId(a);
return B(a)?a:a?a.text:null};q.prototype.setLabelText=function(a,b){var c=this.owner.config,d=this.getLabelOptionByAxisId(a);B(d)?"y"===a?c.axis_y_label=b:"y2"===a?c.axis_y2_label=b:"x"===a&&(c.axis_x_label=b):d&&(d.text=b)};q.prototype.getLabelPosition=function(a,b){var c=this.getLabelOptionByAxisId(a),c=c&&"object"===typeof c&&c.position?c.position:b;return{isInner:0<=c.indexOf("inner"),isOuter:0<=c.indexOf("outer"),isLeft:0<=c.indexOf("left"),isCenter:0<=c.indexOf("center"),isRight:0<=c.indexOf("right"),
isTop:0<=c.indexOf("top"),isMiddle:0<=c.indexOf("middle"),isBottom:0<=c.indexOf("bottom")}};q.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")};q.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")};q.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")};
q.prototype.getLabelPositionById=function(a){return"y2"===a?this.getY2AxisLabelPosition():"y"===a?this.getYAxisLabelPosition():this.getXAxisLabelPosition()};q.prototype.textForXAxisLabel=function(){return this.getLabelText("x")};q.prototype.textForYAxisLabel=function(){return this.getLabelText("y")};q.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")};q.prototype.xForAxisLabel=function(a,b){var c=this.owner;return a?b.isLeft?0:b.isCenter?c.width/2:c.width:b.isBottom?-c.height:
b.isMiddle?-c.height/2:0};q.prototype.dxForAxisLabel=function(a,b){return a?b.isLeft?"1.3em":b.isRight?"-0.3em":"0":b.isTop?"0.0em":b.isBottom?"1.0em":"0"};q.prototype.textAnchorForAxisLabel=function(a,b){return a?b.isLeft?"start":b.isCenter?"middle":"end":b.isBottom?"start":b.isMiddle?"middle":"end"};q.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};q.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,
this.getYAxisLabelPosition())};q.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())};q.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};q.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())};q.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,
this.getY2AxisLabelPosition())};q.prototype.dyForXAxisLabel=function(){var a=this.owner,b=a.config,c=this.getXAxisLabelPosition();return b.axis_rotated?c.isInner?"1.0em":-25*a.config.completeScale-this.getMaxTickWidth("x"):c.isInner?"-0.3em":b.axis_x_height?b.axis_x_height-10*a.config.completeScale:"2.1em"};q.prototype.dyForYAxisLabel=function(){var a=this.owner,b=this.getYAxisLabelPosition();return a.config.axis_rotated?b.isInner?"-0.3em":"3em":b.isInner?"1.0em":-13*a.config.completeScale-(a.config.axis_y_inner?
0:this.getMaxTickWidth("y"))};q.prototype.dyForY2AxisLabel=function(){var a=this.owner,b=this.getY2AxisLabelPosition();return a.config.axis_rotated?b.isInner?"1.0em":"-2.2em":b.isInner?"-0.3em":13*a.config.completeScale+(a.config.axis_y2_inner?0:this.getMaxTickWidth("y2"))};q.prototype.textAnchorForXAxisLabel=function(){return this.textAnchorForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())};q.prototype.textAnchorForYAxisLabel=function(){return this.textAnchorForAxisLabel(this.owner.config.axis_rotated,
this.getYAxisLabelPosition())};q.prototype.textAnchorForY2AxisLabel=function(){return this.textAnchorForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())};q.prototype.getMaxTickWidth=function(a,b){var c=this.owner,d=c.config,e=0,h,g,l;if(b&&c.currentMaxTickWidths[a])return c.currentMaxTickWidths[a];c.svg&&(h=c.filterTargetsToShow(c.data.targets),"y"===a?(g=c.y.copy().domain(c.getYDomain(h,"y")),g=this.getYAxis(g,c.yOrient,d.axis_y_tick_format,c.yAxisTickValues,!1,!0)):"y2"===
a?(g=c.y2.copy().domain(c.getYDomain(h,"y2")),g=this.getYAxis(g,c.y2Orient,d.axis_y2_tick_format,c.y2AxisTickValues,!1,!0)):(g=c.x.copy().domain(c.getXDomain(h)),g=this.getXAxis(g,c.xOrient,c.xAxisTickFormat,c.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(h,g)),l=c.d3.select("body").append("div").classed("c3",!0),d=l.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0).style("font-size",$(d.bindto.parentElement).css("font-size")).style("font-family",
$(d.bindto.parentElement).css("font-family")),d.append("g").call(g).each(function(){c.d3.select(this).selectAll("text").each(function(){var a=this.getBoundingClientRect();e<a.width&&(e=a.width)});l.remove()}));c.currentMaxTickWidths[a]=0>=e?c.currentMaxTickWidths[a]:e;return c.currentMaxTickWidths[a]};q.prototype.updateLabels=function(a){var b=this.owner,c=b.main.select("."+e.axisX+" ."+e.axisXLabel),d=b.main.select("."+e.axisY+" ."+e.axisYLabel),b=b.main.select("."+e.axisY2+" ."+e.axisY2Label);(a?
c.transition():c).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this));(a?d.transition():d).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this));(a?b.transition():b).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))};
q.prototype.getPadding=function(a,b,c,d){var e="number"===typeof a?a:a[b];return t(e)?"ratio"===a.unit?a[b]*d:this.convertPixelsToAxisPadding(e,d):c};q.prototype.convertPixelsToAxisPadding=function(a,b){var c=this.owner;return a/(c.config.axis_rotated?c.width:c.height)*b};q.prototype.generateTickValues=function(a,b,c){var d=a,e,h,g,l;if(b)if(b=E(b)?b():b,1===b)d=[a[0]];else if(2===b)d=[a[0],a[a.length-1]];else if(2<b){e=b-2;b=a[0];a=a[a.length-1];h=(a-b)/(e+1);d=[b];for(g=0;g<e;g++)l=+b+h*(g+1),d.push(c?
new Date(l):l);d.push(a)}c||(d=d.sort(function(a,b){return a-b}));return d};q.prototype.generateTransitions=function(a){var b=this.owner.axes;return{axisX:a?b.x.transition().duration(a):b.x,axisY:a?b.y.transition().duration(a):b.y,axisY2:a?b.y2.transition().duration(a):b.y2,axisSubX:a?b.subx.transition().duration(a):b.subx}};q.prototype.redraw=function(a,b){var c=this.owner;c.axes.x.style("opacity",b?0:1);c.axes.y.style("opacity",b?0:1);c.axes.y2.style("opacity",b?0:1);c.axes.subx.style("opacity",
b?0:1);a.axisX.call(c.xAxis);a.axisY.call(c.yAxis);a.axisY2.call(c.y2Axis);a.axisSubX.call(c.subXAxis)};d.getClipPath=function(a){return"url("+(0<=u.navigator.appVersion.toLowerCase().indexOf("msie 9.")?"":document.URL.split("#")[0])+"#"+a+")"};d.appendClip=function(a,b){return a.append("clipPath").attr("id",b).append("rect")};d.getAxisClipX=function(a){var b=Math.max(40,this.margin.left);return a?-(1+b):-(b-1)};d.getAxisClipY=function(a){return a?-10:-this.margin.top};d.getXAxisClipX=function(){return this.getAxisClipX(!this.config.axis_rotated)};
d.getXAxisClipY=function(){return this.getAxisClipY(!this.config.axis_rotated)-10*this.config.completeScale};d.getYAxisClipX=function(){return this.config.axis_y_inner?-1:this.getAxisClipX(this.config.axis_rotated)};d.getYAxisClipY=function(){return this.getAxisClipY(this.config.axis_rotated)};d.getAxisClipWidth=function(a){var b=Math.max(30,this.margin.left),c=Math.max(30,this.margin.right);return a?this.width+2+b+c:this.margin.left+20+100*this.config.completeScale};d.getAxisClipHeight=function(a){return(a?
this.margin.bottom:this.margin.top+this.height)+20+20*this.config.completeScale};d.getXAxisClipWidth=function(){return this.getAxisClipWidth(!this.config.axis_rotated)};d.getXAxisClipHeight=function(){return this.getAxisClipHeight(!this.config.axis_rotated)};d.getYAxisClipWidth=function(){return this.getAxisClipWidth(this.config.axis_rotated)+(this.config.axis_y_inner?20:0)};d.getYAxisClipHeight=function(){return this.getAxisClipHeight(this.config.axis_rotated)};d.initPie=function(){var a=this.config;
this.pie=this.d3.layout.pie().value(function(a){return a.values.reduce(function(a,b){return a+b.value},0)});a.data_order||this.pie.sort(null)};d.updateRadius=function(){var a=this.config,a=a.gauge_width||a.donut_width;this.radiusExpanded=Math.min(this.arcWidth,this.arcHeight)/2;this.radius=.95*this.radiusExpanded;this.innerRadiusRatio=a?(this.radius-a)/this.radius:.6;this.innerRadius=this.hasType("donut")||this.hasType("gauge")?this.radius*this.innerRadiusRatio:0};d.updateArc=function(){this.svgArc=
this.getSvgArc();this.svgArcExpanded=this.getSvgArcExpanded();this.svgArcExpandedSub=this.getSvgArcExpanded(.98)};d.updateAngle=function(a){var b=this.config,c=!1,d=0,e,h;if(!b)return null;this.pie(this.filterTargetsToShow(this.data.targets)).forEach(function(b){c||b.data.id!==a.data.id||(c=!0,a=b,a.index=d);d++});isNaN(a.startAngle)&&(a.startAngle=0);isNaN(a.endAngle)&&(a.endAngle=a.startAngle);this.isGaugeType(a.data)&&(e=b.gauge_min,h=b.gauge_max,b=Math.PI/(h-e),e=a.value<e?0:a.value<h?a.value-
e:h-e,a.startAngle=Math.PI/2*-1,a.endAngle=a.startAngle+b*e);return c?a:null};d.getSvgArc=function(){var a=this,b=a.d3.svg.arc().outerRadius(a.radius).innerRadius(a.innerRadius),c=function(c,d){var e;return d?b(c):(e=a.updateAngle(c))?b(e):"M 0 0"};c.centroid=b.centroid;return c};d.getSvgArcExpanded=function(a){var b=this,c=b.d3.svg.arc().outerRadius(b.radiusExpanded*(a?a:1)).innerRadius(b.innerRadius);return function(a){return(a=b.updateAngle(a))?c(a):"M 0 0"}};d.getArc=function(a,b,c){return c||
this.isArcType(a.data)?this.svgArc(a,b):"M 0 0"};d.transformForArcLabel=function(a){a=this.updateAngle(a);var b,c;b="";a&&!this.hasType("gauge")&&(b=this.svgArc.centroid(a),a=isNaN(b[0])?0:b[0],b=isNaN(b[1])?0:b[1],c=Math.sqrt(a*a+b*b),c=this.radius&&c?(.375<36/this.radius?1.175-36/this.radius:.8)*this.radius/c:0,b="translate("+a*c+","+b*c+")");return b};d.getArcRatio=function(a){var b=this.hasType("gauge")?Math.PI:2*Math.PI;return a?(a.endAngle-a.startAngle)/b:null};d.convertToArcData=function(a){return this.addName({id:a.data.id,
value:a.value,ratio:this.getArcRatio(a),index:a.index})};d.textForArcLabel=function(a){var b,c,d;if(!this.shouldShowArcLabel())return"";c=(b=this.updateAngle(a))?b.value:null;b=this.getArcRatio(b);a=a.data.id;return this.hasType("gauge")||this.meetsArcLabelThreshold(b)?(d=this.getArcLabelFormat())?d(c,b,a):this.defaultArcValueFormat(c,b):""};d.expandArc=function(a){var b=this,c;b.transiting?c=u.setInterval(function(){b.transiting||(u.clearInterval(c),0<b.legend.selectAll(".c3-legend-item-focused").size()&&
b.expandArc(a))},10):(a=b.mapToTargetIds(a),b.svg.selectAll(b.selectorTargets(a,"."+e.chartArc)).each(function(a){b.shouldExpand(a.data.id)&&b.d3.select(this).selectAll("path").transition().duration(b.expandDuration(a.data.id)).attr("d",b.svgArcExpanded).transition().duration(2*b.expandDuration(a.data.id)).attr("d",b.svgArcExpandedSub).each(function(a){b.isDonutType(a.data)})}))};d.unexpandArc=function(a){var b=this;b.transiting||(a=b.mapToTargetIds(a),b.svg.selectAll(b.selectorTargets(a,"."+e.chartArc)).selectAll("path").transition().duration(function(a){return b.expandDuration(a.data.id)}).attr("d",
b.svgArc),b.svg.selectAll("."+e.arc).style("opacity",1))};d.expandDuration=function(a){var b=this.config;return this.isDonutType(a)?b.donut_expand_duration:this.isGaugeType(a)?b.gauge_expand_duration:this.isPieType(a)?b.pie_expand_duration:50};d.shouldExpand=function(a){var b=this.config;return this.isDonutType(a)&&b.donut_expand||this.isGaugeType(a)&&b.gauge_expand||this.isPieType(a)&&b.pie_expand};d.shouldShowArcLabel=function(){var a=this.config,b=!0;this.hasType("donut")?b=a.donut_label_show:
this.hasType("pie")&&(b=a.pie_label_show);return b};d.meetsArcLabelThreshold=function(a){var b=this.config,b=this.hasType("donut")?b.donut_label_threshold:b.pie_label_threshold;return a>=b};d.getArcLabelFormat=function(){var a=this.config,b=a.pie_label_format;this.hasType("gauge")?b=a.gauge_label_format:this.hasType("donut")&&(b=a.donut_label_format);return b};d.getArcTitle=function(){return this.hasType("donut")?this.config.donut_title:""};d.updateTargetsForArc=function(a){var b=this.main,c=this.classChartArc.bind(this),
d=this.classArcs.bind(this),k=this.classFocus.bind(this);a=b.select("."+e.chartArcs).selectAll("."+e.chartArc).data(this.pie(a)).attr("class",function(a){return c(a)+k(a.data)}).enter().append("g").attr("class",c);a.append("g").attr("class",d);a.append("text").attr("dy",this.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")};d.initArc=function(){this.arcs=this.main.select("."+e.chart).append("g").attr("class",e.chartArcs).attr("transform",
this.getTranslate("arc"));this.arcs.append("text").attr("class",e.chartArcsTitle).style("text-anchor","middle").text(this.getArcTitle())};d.redrawArc=function(a,b,c){var d=this,k=d.d3,h=d.config,g=d.main,l;l=g.selectAll("."+e.arcs).selectAll("."+e.arc).data(d.arcData.bind(d));l.enter().append("path").attr("class",d.classArc.bind(d)).style("fill",function(a){return d.color(a.data)}).style("cursor",function(a){return h.interaction_enabled&&h.data_selection_isselectable(a)?"pointer":null}).style("opacity",
0).each(function(a){d.isGaugeType(a.data)&&(a.startAngle=a.endAngle=Math.PI/2*-1);this._current=a});l.attr("transform",function(a){return!d.isGaugeType(a.data)&&c?"scale(0)":""}).style("opacity",function(a){return a===this._current?0:1}).on("mouseover",h.interaction_enabled?function(a){var b;!d.transiting&&(a=d.updateAngle(a))&&(b=d.convertToArcData(a),d.expandArc(a.data.id),d.api.focus(a.data.id),d.toggleFocusLegend(a.data.id,!0),d.config.data_onmouseover(b,this))}:null).on("mousemove",h.interaction_enabled?
function(a){if(a=d.updateAngle(a))a=d.convertToArcData(a),a=[a],d.showTooltip(a,this)}:null).on("mouseout",h.interaction_enabled?function(a){var b;!d.transiting&&(a=d.updateAngle(a))&&(b=d.convertToArcData(a),d.unexpandArc(a.data.id),d.api.revert(),d.revertLegend(),d.hideTooltip(),d.config.data_onmouseout(b,this))}:null).on("click",h.interaction_enabled?function(a,b){var c=d.updateAngle(a);c&&(c=d.convertToArcData(c),d.toggleShape&&d.toggleShape(this,c,b),d.config.data_onclick.call(d.api,c,this))}:
null).each(function(){d.transiting=!0}).transition().duration(a).attrTween("d",function(a){var b=d.updateAngle(a),c;if(!b)return function(){return"M 0 0"};isNaN(this._current.startAngle)&&(this._current.startAngle=0);isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle);c=k.interpolate(this._current,b);this._current=c(0);return function(b){b=c(b);b.data=a.data;return d.getArc(b,!0)}}).attr("transform",c?"scale(1)":"").style("fill",function(a){return d.levelColor?d.levelColor(a.data.values[0].value):
d.color(a.data.id)}).style("opacity",1).call(d.endall,function(){d.transiting=!1});l.exit().transition().duration(b).style("opacity",0).remove();g.selectAll("."+e.chartArc).select("text").style("opacity",0).attr("class",function(a){return d.isGaugeType(a.data)?e.gaugeValue:""}).text(d.textForArcLabel.bind(d)).attr("transform",d.transformForArcLabel.bind(d)).style("font-size",function(a){return d.isGaugeType(a.data)?Math.round(d.radius/5)+"px":""}).transition().duration(a).style("opacity",function(a){return d.isTargetToShow(a.data.id)&&
d.isArcType(a.data)?1:0});g.select("."+e.chartArcsTitle).style("opacity",d.hasType("donut")||d.hasType("gauge")?1:0);d.hasType("gauge")&&(d.arcs.select("."+e.chartArcsBackground).attr("d",function(){return d.getArc({data:[{value:h.gauge_max}],startAngle:Math.PI/2*-1,endAngle:Math.PI/2},!0,!0)}),d.arcs.select("."+e.chartArcsGaugeUnit).attr("dy",".75em").text(h.gauge_label_show?h.gauge_units:""),d.arcs.select("."+e.chartArcsGaugeMin).attr("dx",-1*(d.innerRadius+(d.radius-d.innerRadius)/2)+"px").attr("dy",
"1.2em").text(h.gauge_label_show?h.gauge_min:""),d.arcs.select("."+e.chartArcsGaugeMax).attr("dx",d.innerRadius+(d.radius-d.innerRadius)/2+"px").attr("dy","1.2em").text(h.gauge_label_show?h.gauge_max:""))};d.initGauge=function(){var a=this.arcs;this.hasType("gauge")&&(a.append("path").attr("class",e.chartArcsBackground),a.append("text").attr("class",e.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",e.chartArcsGaugeMin).style("text-anchor",
"middle").style("pointer-events","none"),a.append("text").attr("class",e.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))};d.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0};d.initRegion=function(){this.region=this.main.append("g").attr("clip-path",this.clipPath).attr("class",e.regions)};d.updateRegion=function(a){var b=this.config;this.region.style("visibility",this.hasArcType()?"hidden":"visible");this.mainRegion=this.main.select("."+e.regions).selectAll("."+
e.region).data(b.regions);this.mainRegion.enter().append("g").attr("class",this.classRegion.bind(this)).append("rect").style("fill-opacity",0);this.mainRegion.exit().transition().duration(a).style("opacity",0).remove()};d.redrawRegion=function(a){var b=this.mainRegion.selectAll("rect"),c=this.regionX.bind(this),d=this.regionY.bind(this),e=this.regionWidth.bind(this),h=this.regionHeight.bind(this);return[(a?b.transition():b).attr("x",c).attr("y",d).attr("width",e).attr("height",h).style("fill-opacity",
function(a){return t(a.opacity)?a.opacity:.1})]};d.regionX=function(a){var b=this.config,c="y"===a.axis?this.y:this.y2;return"y"===a.axis||"y2"===a.axis?b.axis_rotated?"start"in a?c(a.start):0:0:b.axis_rotated?0:"start"in a?this.x(this.isTimeSeries()?this.parseDate(a.start):a.start):0};d.regionY=function(a){var b=this.config,c="y"===a.axis?this.y:this.y2;return"y"===a.axis||"y2"===a.axis?b.axis_rotated?0:"end"in a?c(a.end):0:b.axis_rotated?"start"in a?this.x(this.isTimeSeries()?this.parseDate(a.start):
a.start):0:0};d.regionWidth=function(a){var b=this.config,c=this.regionX(a),d="y"===a.axis?this.y:this.y2;a="y"===a.axis||"y2"===a.axis?b.axis_rotated?"end"in a?d(a.end):this.width:this.width:b.axis_rotated?this.width:"end"in a?this.x(this.isTimeSeries()?this.parseDate(a.end):a.end):this.width;return a<c?0:a-c};d.regionHeight=function(a){var b=this.config,c=this.regionY(a),d="y"===a.axis?this.y:this.y2;a="y"===a.axis||"y2"===a.axis?b.axis_rotated?this.height:"start"in a?d(a.start):this.height:b.axis_rotated?
"end"in a?this.x(this.isTimeSeries()?this.parseDate(a.end):a.end):this.height:this.height;return a<c?0:a-c};d.isRegionOnX=function(a){return!a.axis||"x"===a.axis};d.drag=function(a){var b=this,c=b.config,d=b.main,k=b.d3,h,g,l,m,n,p,r;b.hasArcType()||!c.data_selection_enabled||c.zoom_enabled&&!b.zoom.altDomain||!c.data_selection_multiple||(h=b.dragStart[0],g=b.dragStart[1],l=a[0],a=a[1],m=Math.min(h,l),n=Math.max(h,l),p=c.data_selection_grouped?b.margin.top:Math.min(g,a),r=c.data_selection_grouped?
b.height:Math.max(g,a),d.select("."+e.dragarea).attr("x",m).attr("y",p).attr("width",n-m).attr("height",r-p),d.selectAll("."+e.shapes).selectAll("."+e.shape).filter(function(a){return c.data_selection_isselectable(a)}).each(function(a,c){var d=k.select(this),f=d.classed(e.SELECTED),g=d.classed(e.INCLUDED),h,l,q,t,u;h=!1;if(d.classed(e.circle))h=1*d.attr("cx"),l=1*d.attr("cy"),u=b.togglePoint,h=m<h&&h<n&&p<l&&l<r;else if(d.classed(e.bar))u=ga(this),h=u.x,l=u.y,q=u.width,t=u.height,u=b.togglePath,h=
!(n<h||h+q<m)&&!(r<l||l+t<p);else return;h^g&&(d.classed(e.INCLUDED,!g),d.classed(e.SELECTED,!f),u.call(b,!f,d,a,c))}))};d.dragstart=function(a){var b=this.config;!this.hasArcType()&&b.data_selection_enabled&&(this.dragStart=a,this.main.select("."+e.chart).append("rect").attr("class",e.dragarea).style("opacity",.1),this.dragging=!0)};d.dragend=function(){var a=this.config;!this.hasArcType()&&a.data_selection_enabled&&(this.main.select("."+e.dragarea).transition().duration(100).style("opacity",0).remove(),
this.main.selectAll("."+e.shape).classed(e.INCLUDED,!1),this.dragging=!1)};d.selectPoint=function(a,b,c){var d=this,k=d.config,h=(k.axis_rotated?d.circleY:d.circleX).bind(d),g=(k.axis_rotated?d.circleX:d.circleY).bind(d),l=d.pointSelectR.bind(d);k.data_onselected.call(d.api,b,a.node());d.main.select("."+e.selectedCircles+d.getTargetSelectorSuffix(b.id)).selectAll("."+e.selectedCircle+"-"+c).data([b]).enter().append("circle").attr("class",function(){return d.generateClass(e.selectedCircle,c)}).attr("cx",
h).attr("cy",g).attr("stroke",function(){return d.color(b)}).attr("r",function(a){return 1.4*d.pointSelectR(a)}).transition().duration(100).attr("r",l)};d.unselectPoint=function(a,b,c){this.config.data_onunselected.call(this.api,b,a.node());this.main.select("."+e.selectedCircles+this.getTargetSelectorSuffix(b.id)).selectAll("."+e.selectedCircle+"-"+c).transition().duration(100).attr("r",0).remove()};d.togglePoint=function(a,b,c,d){a?this.selectPoint(b,c,d):this.unselectPoint(b,c,d)};d.selectPath=
function(a,b){var c=this;c.config.data_onselected.call(c,b,a.node());a.transition().duration(100).style("fill",function(){return c.d3.rgb(c.color(b)).brighter(.75)})};d.unselectPath=function(a,b){var c=this;c.config.data_onunselected.call(c,b,a.node());a.transition().duration(100).style("fill",function(){return c.color(b)})};d.togglePath=function(a,b,c,d){a?this.selectPath(b,c,d):this.unselectPath(b,c,d)};d.getToggle=function(a,b){var c;"circle"===a.nodeName?c=this.isStepType(b)?function(){}:this.togglePoint:
"path"===a.nodeName&&(c=this.togglePath);return c};d.toggleShape=function(a,b,c){var d=this.d3,k=this.config,h=d.select(a),g=h.classed(e.SELECTED),l=this.getToggle(a,b).bind(this);k.data_selection_enabled&&k.data_selection_isselectable(b)&&(k.data_selection_multiple||this.main.selectAll("."+e.shapes+(k.data_selection_grouped?this.getTargetSelectorSuffix(b.id):"")).selectAll("."+e.shape).each(function(a,b){var c=d.select(this);c.classed(e.SELECTED)&&l(!1,c.classed(e.SELECTED,!1),a,b)}),h.classed(e.SELECTED,
!g),l(!g,h,b,c))};d.initBrush=function(){var a=this;a.brush=a.d3.svg.brush().on("brush",function(){a.redrawForBrush()});a.brush.update=function(){a.context&&a.context.select("."+e.brush).call(this);return this};a.brush.scale=function(b){return a.config.axis_rotated?this.y(b):this.x(b)}};d.initSubchart=function(){var a=this.config,b=this.context=this.svg.append("g").attr("transform",this.getTranslate("context")),c=a.subchart_show?"visible":"hidden";b.style("visibility",c);b.append("g").attr("clip-path",
this.clipPathForSubchart).attr("class",e.chart);b.select("."+e.chart).append("g").attr("class",e.chartBars);b.select("."+e.chart).append("g").attr("class",e.chartLines);b.append("g").attr("clip-path",this.clipPath).attr("class",e.brush).call(this.brush);this.axes.subx=b.append("g").attr("class",e.axisX).attr("transform",this.getTranslate("subx")).attr("clip-path",a.axis_rotated?"":this.clipPathForXAxis).style("visibility",a.subchart_axis_x_show?c:"hidden")};d.updateTargetsForSubchart=function(a){var b=
this.context,c=this.config,d,k,h=this.classChartBar.bind(this),g=this.classBars.bind(this);d=this.classChartLine.bind(this);var l=this.classLines.bind(this),m=this.classAreas.bind(this);c.subchart_show&&(k=b.select("."+e.chartBars).selectAll("."+e.chartBar).data(a).attr("class",h),k=k.enter().append("g").style("opacity",0).attr("class",h),k.append("g").attr("class",g),a=b.select("."+e.chartLines).selectAll("."+e.chartLine).data(a).attr("class",d),d=a.enter().append("g").style("opacity",0).attr("class",
d),d.append("g").attr("class",l),d.append("g").attr("class",m),b.selectAll("."+e.brush+" rect").attr(c.axis_rotated?"width":"height",c.axis_rotated?this.width2:this.height2))};d.updateBarForSubchart=function(a){this.contextBar=this.context.selectAll("."+e.bars).selectAll("."+e.bar).data(this.barData.bind(this));this.contextBar.enter().append("path").attr("class",this.classBar.bind(this)).style("stroke","none").style("fill",this.color);this.contextBar.style("opacity",this.initialOpacity.bind(this));
this.contextBar.exit().transition().duration(a).style("opacity",0).remove()};d.redrawBarForSubchart=function(a,b,c){(b?this.contextBar.transition(Math.random().toString()).duration(c):this.contextBar).attr("d",a).style("opacity",1)};d.updateLineForSubchart=function(a){this.contextLine=this.context.selectAll("."+e.lines).selectAll("."+e.line).data(this.lineData.bind(this));this.contextLine.enter().append("path").attr("class",this.classLine.bind(this)).style("stroke",this.color);this.contextLine.style("opacity",
this.initialOpacity.bind(this));this.contextLine.exit().transition().duration(a).style("opacity",0).remove()};d.redrawLineForSubchart=function(a,b,c){(b?this.contextLine.transition(Math.random().toString()).duration(c):this.contextLine).attr("d",a).style("opacity",1)};d.updateAreaForSubchart=function(a){var b=this,c=b.d3;b.contextArea=b.context.selectAll("."+e.areas).selectAll("."+e.area).data(b.lineData.bind(b));b.contextArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",
b.color).style("opacity",function(){b.orgAreaOpacity=+c.select(this).style("opacity");return 0});b.contextArea.style("opacity",0);b.contextArea.exit().transition().duration(a).style("opacity",0).remove()};d.redrawAreaForSubchart=function(a,b,c){(b?this.contextArea.transition(Math.random().toString()).duration(c):this.contextArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)};d.redrawSubchart=function(a,b,c,d,e,h,g){b=this.d3;d=this.config;this.context.style("visibility",
d.subchart_show?"visible":"hidden");d.subchart_show&&(b.event&&"zoom"===b.event.type&&this.brush.extent(this.x.orgDomain()).update(),a&&(this.brush.empty()||this.brush.extent(this.x.orgDomain()).update(),a=this.generateDrawArea(e,!0),h=this.generateDrawBar(h,!0),g=this.generateDrawLine(g,!0),this.updateBarForSubchart(c),this.updateLineForSubchart(c),this.updateAreaForSubchart(c),this.redrawBarForSubchart(h,c,c),this.redrawLineForSubchart(g,c,c),this.redrawAreaForSubchart(a,c,c)))};d.redrawForBrush=
function(){var a=this.x;this.redraw({withTransition:!1,withY:this.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1});this.config.subchart_onbrush.call(this.api,a.orgDomain())};d.transformContext=function(a,b){var c;b&&b.axisSubX?c=b.axisSubX:(c=this.context.select("."+e.axisX),a&&(c=c.transition()));this.context.attr("transform",this.getTranslate("context"));c.attr("transform",this.getTranslate("subx"))};d.getDefaultExtent=function(){var a=this.config,a=E(a.axis_x_extent)?
a.axis_x_extent(this.getXDomain(this.data.targets)):a.axis_x_extent;this.isTimeSeries()&&(a=[this.parseDate(a[0]),this.parseDate(a[1])]);return a};d.initZoom=function(){var a=this,b=a.d3,c=a.config,d;a.zoom=b.behavior.zoom().on("zoomstart",function(){d=b.event.sourceEvent;a.zoom.altDomain=b.event.sourceEvent.altKey?a.x.orgDomain():null;c.zoom_onzoomstart.call(a.api,b.event.sourceEvent)}).on("zoom",function(){a.redrawForZoom.call(a)}).on("zoomend",function(){var e=b.event.sourceEvent;e&&d.clientX===
e.clientX&&d.clientY===e.clientY||(a.redrawEventRect(),a.updateZoom(),c.zoom_onzoomend.call(a.api,a.x.orgDomain()))});a.zoom.scale=function(a){return c.axis_rotated?this.y(a):this.x(a)};a.zoom.orgScaleExtent=function(){var b=c.zoom_extent?c.zoom_extent:[1,10];return[b[0],Math.max(a.getMaxDataCount()/b[1],b[1])]};a.zoom.updateScaleExtent=function(){var b=P(a.x.orgDomain())/P(a.getZoomDomain()),c=this.orgScaleExtent();this.scaleExtent([c[0]*b,c[1]*b]);return this}};d.getZoomDomain=function(){var a=
this.config,b=this.d3,c=b.min([this.orgXDomain[0],a.zoom_x_min]),a=b.max([this.orgXDomain[1],a.zoom_x_max]);return[c,a]};d.updateZoom=function(){var a=this.config.zoom_enabled?this.zoom:function(){};this.main.select("."+e.zoomRect).call(a).on("dblclick.zoom",null);this.main.selectAll("."+e.eventRect).call(a).on("dblclick.zoom",null)};d.redrawForZoom=function(){var a=this.d3,b=this.config,c=this.zoom,d=this.x;b.zoom_enabled&&0!==this.filterTargetsToShow(this.data.targets).length&&("mousemove"===a.event.sourceEvent.type&&
c.altDomain?(d.domain(c.altDomain),c.scale(d).updateScaleExtent()):(this.isCategorized()&&d.orgDomain()[0]===this.orgXDomain[0]&&d.domain([this.orgXDomain[0]-1E-10,d.orgDomain()[1]]),this.redraw({withTransition:!1,withY:b.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===a.event.sourceEvent.type&&(this.cancelClick=!0),b.zoom_onzoom.call(this.api,d.orgDomain())))};d.generateColor=function(){var a=this.config,b=this.d3,c=a.data_colors,d=D(a.color_pattern)?a.color_pattern:
b.scale.category10().range(),e=a.data_color,h=[];return function(a){var b=a.id||a.data&&a.data.id||a,m;c[b]instanceof Function?m=c[b](a):c[b]?m=c[b]:(0>h.indexOf(b)&&h.push(b),m=d[h.indexOf(b)%d.length],c[b]=m);return e instanceof Function?e(m,a):m}};d.generateLevelColor=function(){var a=this.config,b=a.color_pattern,c=a.color_threshold,d="value"===c.unit,e=c.values&&c.values.length?c.values:[],h=c.max||100;return D(a.color_threshold)?function(a){var c,m,n=b[b.length-1];for(c=0;c<e.length;c++)if(m=
d?a:100*a/h,m<e[c]){n=b[c];break}return n}:null};d.getYFormat=function(a){var b=this,c=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.yFormat,d=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.y2Format;return function(a,e,g){return("y2"===b.axis.getId(g)?d:c).call(b,a,e)}};d.yFormat=function(a){var b=this.config;return(b.axis_y_tick_format?b.axis_y_tick_format:this.defaultValueFormat)(a)};d.y2Format=function(a){var b=this.config;return(b.axis_y2_tick_format?b.axis_y2_tick_format:this.defaultValueFormat)(a)};
d.defaultValueFormat=function(a){return t(a)?+a:""};d.defaultArcValueFormat=function(a,b){return(100*b).toFixed(1)+"%"};d.dataLabelFormat=function(a){var b=this.config.data_labels,c=function(a){return t(a)?+a:""};return"function"===typeof b.format?b.format:"object"===typeof b.format?b.format[a]?!0===b.format[a]?c:b.format[a]:function(){return""}:c};d.hasCaches=function(a){for(var b=0;b<a.length;b++)if(!(a[b]in this.cache))return!1;return!0};d.addCache=function(a,b){this.cache[a]=this.cloneTarget(b)};
d.getCaches=function(a){var b=[],c;for(c=0;c<a.length;c++)a[c]in this.cache&&b.push(this.cloneTarget(this.cache[a[c]]));return b};var e=d.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",
chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",
tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",
ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};
d.generateClass=function(a,b){return" "+a+" "+a+this.getTargetSelectorSuffix(b)};d.classText=function(a){return this.generateClass(e.text,a.index)};d.classTexts=function(a){return this.generateClass(e.texts,a.id)};d.classShape=function(a){return this.generateClass(e.shape,a.index)};d.classShapes=function(a){return this.generateClass(e.shapes,a.id)};d.classLine=function(a){return this.classShape(a)+this.generateClass(e.line,a.id)};d.classLines=function(a){return this.classShapes(a)+this.generateClass(e.lines,
a.id)};d.classCircle=function(a){return this.classShape(a)+this.generateClass(e.circle,a.index)};d.classCircles=function(a){return this.classShapes(a)+this.generateClass(e.circles,a.id)};d.classBar=function(a){return this.classShape(a)+this.generateClass(e.bar,a.index)};d.classBars=function(a){return this.classShapes(a)+this.generateClass(e.bars,a.id)};d.classArc=function(a){return this.classShape(a.data)+this.generateClass(e.arc,a.data.id)};d.classArcs=function(a){return this.classShapes(a.data)+
this.generateClass(e.arcs,a.data.id)};d.classArea=function(a){return this.classShape(a)+this.generateClass(e.area,a.id)};d.classAreas=function(a){return this.classShapes(a)+this.generateClass(e.areas,a.id)};d.classRegion=function(a,b){return this.generateClass(e.region,b)+" "+("class"in a?a["class"]:"")};d.classEvent=function(a){return this.generateClass(e.eventRect,a.index)};d.classTarget=function(a){var b=this.config.data_classes[a],c="";b&&(c=" "+e.target+"-"+b);return this.generateClass(e.target,
a)+c};d.classFocus=function(a){return this.classFocused(a)+this.classDefocused(a)};d.classFocused=function(a){return" "+(0<=this.focusedTargetIds.indexOf(a.id)?e.focused:"")};d.classDefocused=function(a){return" "+(0<=this.defocusedTargetIds.indexOf(a.id)?e.defocused:"")};d.classChartText=function(a){return e.chartText+this.classTarget(a.id)};d.classChartLine=function(a){return e.chartLine+this.classTarget(a.id)};d.classChartBar=function(a){return e.chartBar+this.classTarget(a.id)};d.classChartArc=
function(a){return e.chartArc+this.classTarget(a.data.id)};d.getTargetSelectorSuffix=function(a){return a||0===a?("-"+a).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""};d.selectorTarget=function(a,b){return(b||"")+"."+e.target+this.getTargetSelectorSuffix(a)};d.selectorTargets=function(a,b){var c=this;a=a||[];return a.length?a.map(function(a){return c.selectorTarget(a,b)}):null};d.selectorLegend=function(a){return"."+e.legendItem+this.getTargetSelectorSuffix(a)};d.selectorLegends=function(a){var b=
this;return a&&a.length?a.map(function(a){return b.selectorLegend(a)}):null};var t=d.isValue=function(a){return a||0===a},E=d.isFunction=function(a){return"function"===typeof a},B=d.isString=function(a){return"string"===typeof a},z=d.isUndefined=function(a){return"undefined"===typeof a},C=d.isDefined=function(a){return"undefined"!==typeof a};d.ceil10=function(a){return 10*Math.ceil(a/10)};var M=d.asHalfPixel=function(a){return Math.ceil(a)+.5},P=d.diffDomain=function(a){return a[1]-a[0]},ea=d.isEmpty=
function(a){return"undefined"===typeof a||null===a||B(a)&&0===a.length||"object"===typeof a&&0===Object.keys(a).length},D=d.notEmpty=function(a){return!d.isEmpty(a)},y=d.getOption=function(a,b,c){return C(a[b])?a[b]:c},fa=d.hasValue=function(a,b){var c=!1;Object.keys(a).forEach(function(d){a[d]===b&&(c=!0)});return c},ga=d.getPathBox=function(a){var b=a.getBoundingClientRect();a=[a.pathSegList.getItem(0),a.pathSegList.getItem(1)];return{x:a[0].x,y:Math.min(a[0].y,a[1].y),width:b.width,height:b.height}};
n.focus=function(a){var b=this.internal,c;a=b.mapToTargetIds(a);c=b.svg.selectAll(b.selectorTargets(a.filter(b.isTargetToShow,b)));this.revert();this.defocus();c.classed(e.focused,!0).classed(e.defocused,!1);b.hasArcType()&&b.expandArc(a);b.toggleFocusLegend(a,!0);b.focusedTargetIds=a;b.defocusedTargetIds=b.defocusedTargetIds.filter(function(b){return 0>a.indexOf(b)})};n.defocus=function(a){var b=this.internal;a=b.mapToTargetIds(a);b.svg.selectAll(b.selectorTargets(a.filter(b.isTargetToShow,b))).classed(e.focused,
!1).classed(e.defocused,!0);b.hasArcType()&&b.unexpandArc(a);b.toggleFocusLegend(a,!1);b.focusedTargetIds=b.focusedTargetIds.filter(function(b){return 0>a.indexOf(b)});b.defocusedTargetIds=a};n.revert=function(a){var b=this.internal;a=b.mapToTargetIds(a);b.svg.selectAll(b.selectorTargets(a)).classed(e.focused,!1).classed(e.defocused,!1);b.hasArcType()&&b.unexpandArc(a);b.config.legend_show&&(b.showLegend(a.filter(b.isLegendToShow.bind(b))),b.legend.selectAll(b.selectorLegends(a)).filter(function(){return b.d3.select(this).classed(e.legendItemFocused)}).classed(e.legendItemFocused,
!1));b.focusedTargetIds=[];b.defocusedTargetIds=[]};n.show=function(a,b){var c=this.internal,d;a=c.mapToTargetIds(a);b=b||{};c.removeHiddenTargetIds(a);d=c.svg.selectAll(c.selectorTargets(a));d.transition().style("opacity",1,"important").call(c.endall,function(){d.style("opacity",null).style("opacity",1)});b.withLegend&&c.showLegend(a);c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})};n.hide=function(a,b){var c=this.internal,d;a=c.mapToTargetIds(a);b=b||{};c.addHiddenTargetIds(a);
d=c.svg.selectAll(c.selectorTargets(a));d.transition().style("opacity",0,"important").call(c.endall,function(){d.style("opacity",null).style("opacity",0)});b.withLegend&&c.hideLegend(a);c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})};n.toggle=function(a,b){var c=this,d=this.internal;d.mapToTargetIds(a).forEach(function(a){d.isTargetToShow(a)?c.hide(a,b):c.show(a,b)})};n.zoom=function(a){var b=this.internal;a&&(b.isTimeSeries()&&(a=a.map(function(a){return b.parseDate(a)})),
b.brush.extent(a),b.redraw({withUpdateXDomain:!0,withY:b.config.zoom_rescale}),b.config.zoom_onzoom.call(this,b.x.orgDomain()));return b.brush.extent()};n.zoom.enable=function(a){var b=this.internal;b.config.zoom_enabled=a;b.updateAndRedraw()};n.unzoom=function(){var a=this.internal;a.brush.clear().update();a.redraw({withUpdateXDomain:!0})};n.zoom.max=function(a){var b=this.internal,c=b.config,d=b.d3;if(0===a||a)c.zoom_x_max=d.max([b.orgXDomain[1],a]);else return c.zoom_x_max};n.zoom.min=function(a){var b=
this.internal,c=b.config,d=b.d3;if(0===a||a)c.zoom_x_min=d.min([b.orgXDomain[0],a]);else return c.zoom_x_min};n.zoom.range=function(a){if(arguments.length)C(a.max)&&this.domain.max(a.max),C(a.min)&&this.domain.min(a.min);else return{max:this.domain.max(),min:this.domain.min()}};n.load=function(a){var b=this.internal,c=b.config;a.xs&&b.addXs(a.xs);"classes"in a&&Object.keys(a.classes).forEach(function(b){c.data_classes[b]=a.classes[b]});"categories"in a&&b.isCategorized()&&(c.axis_x_categories=a.categories);
"axes"in a&&Object.keys(a.axes).forEach(function(b){c.data_axes[b]=a.axes[b]});"colors"in a&&Object.keys(a.colors).forEach(function(b){c.data_colors[b]=a.colors[b]});"cacheIds"in a&&b.hasCaches(a.cacheIds)?b.load(b.getCaches(a.cacheIds),a.done):"unload"in a?b.unload(b.mapToTargetIds("boolean"===typeof a.unload&&a.unload?null:a.unload),function(){b.loadFromArgs(a)}):b.loadFromArgs(a)};n.unload=function(a){var b=this.internal;a=a||{};a instanceof Array?a={ids:a}:"string"===typeof a&&(a={ids:[a]});b.unload(b.mapToTargetIds(a.ids),
function(){b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0});a.done&&a.done()})};n.flow=function(a){var b=this.internal,c,d,e=[],h=b.getMaxDataCount(),g,l=0,m=0,n;if(a.json)d=b.convertJsonToData(a.json,a.keys);else if(a.rows)d=b.convertRowsToData(a.rows);else if(a.columns)d=b.convertColumnsToData(a.columns);else return;c=b.convertDataToTargets(d,!0);b.data.targets.forEach(function(a){var d=!1,f,g;for(f=0;f<c.length;f++)if(a.id===c[f].id){d=!0;a.values[a.values.length-1]&&(m=a.values[a.values.length-
1].index+1);l=c[f].values.length;for(g=0;g<l;g++)c[f].values[g].index=m+g,b.isTimeSeries()||(c[f].values[g].x=m+g);a.values=a.values.concat(c[f].values);c.splice(f,1);break}d||e.push(a.id)});b.data.targets.forEach(function(a){var c,d;for(c=0;c<e.length;c++)if(a.id===e[c])for(m=a.values[a.values.length-1].index+1,d=0;d<l;d++)a.values.push({id:a.id,index:m+d,x:b.isTimeSeries()?b.getOtherTargetX(m+d):m+d,value:null})});b.data.targets.length&&c.forEach(function(a){var c,d=[];for(c=b.data.targets[0].values[0].index;c<
m;c++)d.push({id:a.id,index:c,x:b.isTimeSeries()?b.getOtherTargetX(c):c,value:null});a.values.forEach(function(a){a.index+=m;b.isTimeSeries()||(a.x+=m)});a.values=d.concat(a.values)});b.data.targets=b.data.targets.concat(c);b.getMaxDataCount();g=b.data.targets[0];d=g.values[0];C(a.to)?(l=0,n=b.isTimeSeries()?b.parseDate(a.to):a.to,g.values.forEach(function(a){a.x<n&&l++})):C(a.length)&&(l=a.length);h?1===h&&b.isTimeSeries()&&(g=(g.values[g.values.length-1].x-d.x)/2,g=[new Date(+d.x-g),new Date(+d.x+
g)],b.updateXDomain(null,!0,!0,!1,g)):(g=b.isTimeSeries()?1<g.values.length?g.values[g.values.length-1].x-d.x:d.x-b.getXDomain(b.data.targets)[0]:1,g=[d.x-g,d.x],b.updateXDomain(null,!0,!0,!1,g));b.updateTargets(b.data.targets);b.redraw({flow:{index:d.index,length:l,duration:t(a.duration)?a.duration:b.config.transition_duration,done:a.done,orgDataCount:h},withLegend:!0,withTransition:1<h,withTrimXDomain:!1,withUpdateXAxis:!0})};d.generateFlow=function(a){var b=this,c=b.config,d=b.d3;return function(){var k=
a.targets,h=a.flow,g=a.drawBar,l=a.drawLine,m=a.drawArea,n=a.cx,p=a.cy,r=a.xv,q=a.xForText,t=a.yForText,u=a.duration,y=1,z,v=h.index,B=h.length,C=b.getValueOnIndex(b.data.targets[0].values,v),D=b.getValueOnIndex(b.data.targets[0].values,v+B),y=b.x.domain(),u=h.duration||u,E=h.done||function(){},F=b.generateWait(),G=b.xgrid||d.selectAll([]),M=b.xgridLines||d.selectAll([]),U=b.mainRegion||d.selectAll([]),Y=b.mainText||d.selectAll([]),N=b.mainBar||d.selectAll([]),A=b.mainLine||d.selectAll([]),Q=b.mainArea||
d.selectAll([]),H=b.mainCircle||d.selectAll([]);b.flowing=!0;b.data.targets.forEach(function(a){a.values.splice(0,B)});k=b.updateXDomain(k,!0,!0);b.updateXGrid&&b.updateXGrid(!0);h.orgDataCount?h=1===h.orgDataCount||C.x===D.x?b.x(y[0])-b.x(k[0]):b.isTimeSeries()?b.x(y[0])-b.x(k[0]):b.x(C.x)-b.x(D.x):1!==b.data.targets[0].values.length?h=b.x(y[0])-b.x(k[0]):b.isTimeSeries()?(C=b.getValueOnIndex(b.data.targets[0].values,0),D=b.getValueOnIndex(b.data.targets[0].values,b.data.targets[0].values.length-
1),h=b.x(C.x)-b.x(D.x)):h=P(k)/2;y=P(y)/P(k);z="translate("+h+",0) scale("+y+",1)";b.hideXGridFocus();d.transition().ease("linear").duration(u).each(function(){F.add(b.axes.x.transition().call(b.xAxis));F.add(N.transition().attr("transform",z));F.add(A.transition().attr("transform",z));F.add(Q.transition().attr("transform",z));F.add(H.transition().attr("transform",z));F.add(Y.transition().attr("transform",z));F.add(U.filter(b.isRegionOnX).transition().attr("transform",z));F.add(G.transition().attr("transform",
z));F.add(M.transition().attr("transform",z))}).call(F,function(){var a,d=[],f=[],h=[];if(B){for(a=0;a<B;a++)d.push("."+e.shape+"-"+(v+a)),f.push("."+e.text+"-"+(v+a)),h.push("."+e.eventRect+"-"+(v+a));b.svg.selectAll("."+e.shapes).selectAll(d).remove();b.svg.selectAll("."+e.texts).selectAll(f).remove();b.svg.selectAll("."+e.eventRects).selectAll(h).remove();b.svg.select("."+e.xgrid).remove()}G.attr("transform",null).attr(b.xgridAttr);M.attr("transform",null);M.select("line").attr("x1",c.axis_rotated?
0:r).attr("x2",c.axis_rotated?b.width:r);M.select("text").attr("x",c.axis_rotated?b.width:0).attr("y",r);N.attr("transform",null).attr("d",g);A.attr("transform",null).attr("d",l);Q.attr("transform",null).attr("d",m);H.attr("transform",null).attr("cx",n).attr("cy",p);Y.attr("transform",null).attr("x",q).attr("y",t).style("fill-opacity",b.opacityForText.bind(b));U.attr("transform",null);U.select("rect").filter(b.isRegionOnX).attr("x",b.regionX.bind(b)).attr("width",b.regionWidth.bind(b));c.interaction_enabled&&
b.redrawEventRect();E();b.flowing=!1})}};n.selected=function(a){var b=this.internal,c=b.d3;return c.merge(b.main.selectAll("."+e.shapes+b.getTargetSelectorSuffix(a)).selectAll("."+e.shape).filter(function(){return c.select(this).classed(e.SELECTED)}).map(function(a){return a.map(function(a){a=a.__data__;return a.data?a.data:a})}))};n.select=function(a,b,c){var d=this.internal,k=d.d3,h=d.config;h.data_selection_enabled&&d.main.selectAll("."+e.shapes).selectAll("."+e.shape).each(function(g,l){var m=
k.select(this),n=g.data?g.data.id:g.id,p=d.getToggle(this,g).bind(d),n=h.data_selection_grouped||!a||0<=a.indexOf(n),q=!b||0<=b.indexOf(l),t=m.classed(e.SELECTED);m.classed(e.line)||m.classed(e.area)||(n&&q?h.data_selection_isselectable(g)&&!t&&p(!0,m.classed(e.SELECTED,!0),g,l):C(c)&&c&&t&&p(!1,m.classed(e.SELECTED,!1),g,l))})};n.unselect=function(a,b){var c=this.internal,d=c.d3,k=c.config;k.data_selection_enabled&&c.main.selectAll("."+e.shapes).selectAll("."+e.shape).each(function(h,g){var l=d.select(this),
m=h.data?h.data.id:h.id,n=c.getToggle(this,h).bind(c),m=k.data_selection_grouped||!a||0<=a.indexOf(m),p=!b||0<=b.indexOf(g),q=l.classed(e.SELECTED);l.classed(e.line)||l.classed(e.area)||m&&p&&k.data_selection_isselectable(h)&&q&&n(!1,l.classed(e.SELECTED,!1),h,g)})};n.transform=function(a,b){var c=this.internal,d=0<=["pie","donut"].indexOf(a)?{withTransform:!0}:null;c.transformTo(b,a,d)};d.transformTo=function(a,b,c){var d=!this.hasArcType();c=c||{withTransitionForAxis:d};this.transiting=c.withTransitionForTransform=
!1;this.setTargetType(a,b);this.updateTargets(this.data.targets);this.updateAndRedraw(c)};n.groups=function(a){var b=this.internal,c=b.config;if(z(a))return c.data_groups;c.data_groups=a;b.redraw();return c.data_groups};n.xgrids=function(a){var b=this.internal,c=b.config;if(!a)return c.grid_x_lines;c.grid_x_lines=a;b.redrawWithoutRescale();return c.grid_x_lines};n.xgrids.add=function(a){return this.xgrids(this.internal.config.grid_x_lines.concat(a?a:[]))};n.xgrids.remove=function(a){this.internal.removeGridLines(a,
!0)};n.ygrids=function(a){var b=this.internal,c=b.config;if(!a)return c.grid_y_lines;c.grid_y_lines=a;b.redrawWithoutRescale();return c.grid_y_lines};n.ygrids.add=function(a){return this.ygrids(this.internal.config.grid_y_lines.concat(a?a:[]))};n.ygrids.remove=function(a){this.internal.removeGridLines(a,!1)};n.regions=function(a){var b=this.internal,c=b.config;if(!a)return c.regions;c.regions=a;b.redrawWithoutRescale();return c.regions};n.regions.add=function(a){var b=this.internal,c=b.config;if(!a)return c.regions;
c.regions=c.regions.concat(a);b.redrawWithoutRescale();return c.regions};n.regions.remove=function(a){var b=this.internal,c=b.config,d,k;a=a||{};d=b.getOption(a,"duration",c.transition_duration);k=b.getOption(a,"classes",[e.region]);a=b.main.select("."+e.regions).selectAll(k.map(function(a){return"."+a}));(d?a.transition().duration(d):a).style("opacity",0).remove();c.regions=c.regions.filter(function(a){var b=!1;if(!a["class"])return!0;a["class"].split(" ").forEach(function(a){0<=k.indexOf(a)&&(b=
!0)});return!b});return c.regions};n.data=function(a){var b=this.internal.data.targets;return"undefined"===typeof a?b:b.filter(function(b){return 0<=[].concat(a).indexOf(b.id)})};n.data.shown=function(a){return this.internal.filterTargetsToShow(this.data(a))};n.data.values=function(a){var b=null;a&&(a=this.data(a),b=a[0]?a[0].values.map(function(a){return a.value}):null);return b};n.data.names=function(a){this.internal.clearLegendItemTextBoxCache();return this.internal.updateDataAttributes("names",
a)};n.data.colors=function(a){return this.internal.updateDataAttributes("colors",a)};n.data.axes=function(a){return this.internal.updateDataAttributes("axes",a)};n.category=function(a,b){var c=this.internal,d=c.config;1<arguments.length&&(d.axis_x_categories[a]=b,c.redraw());return d.axis_x_categories[a]};n.categories=function(a){var b=this.internal,c=b.config;if(!arguments.length)return c.axis_x_categories;c.axis_x_categories=a;b.redraw();return c.axis_x_categories};n.color=function(a){return this.internal.color(a)};
n.x=function(a){var b=this.internal;arguments.length&&(b.updateTargetX(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}));return b.data.xs};n.xs=function(a){var b=this.internal;arguments.length&&(b.updateTargetXs(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}));return b.data.xs};n.axis=function(){};n.axis.labels=function(a){var b=this.internal;arguments.length&&(Object.keys(a).forEach(function(c){b.axis.setLabelText(c,a[c])}),b.axis.updateLabels())};
n.axis.max=function(a){var b=this.internal,c=b.config;if(arguments.length)"object"===typeof a?(t(a.x)&&(c.axis_x_max=a.x),t(a.y)&&(c.axis_y_max=a.y),t(a.y2)&&(c.axis_y2_max=a.y2)):c.axis_y_max=c.axis_y2_max=a,b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0});else return{x:c.axis_x_max,y:c.axis_y_max,y2:c.axis_y2_max}};n.axis.min=function(a){var b=this.internal,c=b.config;if(arguments.length)"object"===typeof a?(t(a.x)&&(c.axis_x_min=a.x),t(a.y)&&(c.axis_y_min=a.y),t(a.y2)&&(c.axis_y2_min=a.y2)):
c.axis_y_min=c.axis_y2_min=a,b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0});else return{x:c.axis_x_min,y:c.axis_y_min,y2:c.axis_y2_min}};n.axis.range=function(a){if(arguments.length)C(a.max)&&this.axis.max(a.max),C(a.min)&&this.axis.min(a.min);else return{max:this.axis.max(),min:this.axis.min()}};n.legend=function(){};n.legend.show=function(a){var b=this.internal;b.showLegend(b.mapToTargetIds(a));b.updateAndRedraw({withLegend:!0})};n.legend.hide=function(a){var b=this.internal;b.hideLegend(b.mapToTargetIds(a));
b.updateAndRedraw({withLegend:!0})};n.resize=function(a){var b=this.internal.config;b.size_width=a?a.width:null;b.size_height=a?a.height:null;this.flush()};n.flush=function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})};n.destroy=function(){var a=this.internal;u.clearInterval(a.intervalForObserveInserted);void 0!==a.resizeTimeout&&u.clearTimeout(a.resizeTimeout);if(u.detachEvent)u.detachEvent("onresize",a.resizeFunction);else if(u.removeEventListener)u.removeEventListener("resize",
a.resizeFunction);else{var b=u.onresize;b&&b.add&&b.remove&&b.remove(a.resizeFunction)}a.selectChart.classed("c3",!1).html("");Object.keys(a).forEach(function(b){a[b]=null});return null};n.tooltip=function(){};n.tooltip.show=function(a){var b=this.internal,c,d;a.mouse&&(d=a.mouse);a.data?b.isMultipleX()?(d=[b.x(a.data.x),b.getYScale(a.data.id)(a.data.value)],c=null):c=t(a.data.index)?a.data.index:b.getIndexByX(a.data.x):"undefined"!==typeof a.x?c=b.getIndexByX(a.x):"undefined"!==typeof a.index&&(c=
a.index);b.dispatchEvent("mouseover",c,d);b.dispatchEvent("mousemove",c,d);b.config.tooltip_onshow.call(b,a.data)};n.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0);this.internal.config.tooltip_onhide.call(this)};var U;d.isSafari=function(){var a=u.navigator.userAgent;return 0<=a.indexOf("Safari")&&0>a.indexOf("Chrome")};d.isChrome=function(){return 0<=u.navigator.userAgent.indexOf("Chrome")};"function"===typeof define&&define.amd?define("c3",["d3"],function(){return G}):"undefined"!==
typeof exports&&"undefined"!==typeof module?module.exports=G:u.c3=G})(window);